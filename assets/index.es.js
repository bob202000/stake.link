import{b as hl,s as Kc,g as vf,a as Vm,c as oe,d as Bm,x as mf,r as Lo,H as Gm,e as wf,q as Ro,f as Wm,h as Jm,w as _f,_ as Qm}from"./index.js";import{e as Hr,E as Vc}from"./events.js";import{d as Ym,s as Gi,a as us,i as ll,c as Zm,b as Xm,f as jo,p as bf,J as pi,e as Bc,g as Gc,h as Wc,j as Si,k as fi,l as ss,m as e1,n as t1,o as fl,q as pl}from"./provider.js";import{c as Ai,g as r1}from"./bn.js";import"./vendor.js";import"./ethers.js";function Jc(s){return globalThis.Buffer!=null?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):s}function Ef(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Jc(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}function Tc(s,t){t||(t=s.reduce((a,h)=>a+h.length,0));const r=Ef(t);let n=0;for(const a of s)r.set(a,n),n+=a.length;return Jc(r)}function If(s,t,r,n){return{name:s,prefix:t,encoder:{name:s,prefix:t,encode:r},decoder:{decode:n}}}const dl=If("utf8","u",s=>{const t=new TextDecoder("utf8");return"u"+t.decode(s)},s=>new TextEncoder().encode(s.substring(1))),pc=If("ascii","a",s=>{let t="a";for(let r=0;r<s.length;r++)t+=String.fromCharCode(s[r]);return t},s=>{s=s.substring(1);const t=Ef(s.length);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}),xf={utf8:dl,"utf-8":dl,hex:hl.base16,latin1:pc,ascii:pc,binary:pc,...hl};function gr(s,t="utf8"){const r=xf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Jc(globalThis.Buffer.from(s,"utf-8")):r.decoder.decode(`${r.prefix}${s}`)}function nr(s,t="utf8"){const r=xf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(s.buffer,s.byteOffset,s.byteLength).toString("utf8"):r.encoder.encode(s).substring(1)}const i1={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},n1=":";function s1(s){const[t,r]=s.split(n1);return{namespace:t,reference:r}}function o1(s,t=[]){const r=[];return Object.keys(s).forEach(n=>{if(t.length&&!t.includes(n))return;const a=s[n];r.push(...a.accounts)}),r}function Pf(s,t){return s.includes(":")?[s]:t.chains||[]}const Sf="base10",ir="base16",Rc="base64pad",Qc="utf8",Of=0,Ji=1,a1=0,gl=1,Nc=12,Yc=32;function c1(){const s=mf.generateKeyPair();return{privateKey:nr(s.secretKey,ir),publicKey:nr(s.publicKey,ir)}}function $c(){const s=Lo.randomBytes(Yc);return nr(s,ir)}function u1(s,t){const r=mf.sharedKey(gr(s,ir),gr(t,ir),!0),n=new Gm(Kc.SHA256,r).expand(Yc);return nr(n,ir)}function h1(s){const t=Kc.hash(gr(s,ir));return nr(t,ir)}function xn(s){const t=Kc.hash(gr(s,Qc));return nr(t,ir)}function l1(s){return gr(`${s}`,Sf)}function hs(s){return Number(nr(s,Sf))}function f1(s){const t=l1(typeof s.type<"u"?s.type:Of);if(hs(t)===Ji&&typeof s.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof s.senderPublicKey<"u"?gr(s.senderPublicKey,ir):void 0,n=typeof s.iv<"u"?gr(s.iv,ir):Lo.randomBytes(Nc),a=new wf.ChaCha20Poly1305(gr(s.symKey,ir)).seal(n,gr(s.message,Qc));return d1({type:t,sealed:a,iv:n,senderPublicKey:r})}function p1(s){const t=new wf.ChaCha20Poly1305(gr(s.symKey,ir)),{sealed:r,iv:n}=No(s.encoded),a=t.open(n,r);if(a===null)throw new Error("Failed to decrypt");return nr(a,Qc)}function d1(s){if(hs(s.type)===Ji){if(typeof s.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return nr(Tc([s.type,s.senderPublicKey,s.iv,s.sealed]),Rc)}return nr(Tc([s.type,s.iv,s.sealed]),Rc)}function No(s){const t=gr(s,Rc),r=t.slice(a1,gl),n=gl;if(hs(r)===Ji){const v=n+Yc,m=v+Nc,g=t.slice(n,v),E=t.slice(v,m),S=t.slice(m);return{type:r,sealed:S,iv:E,senderPublicKey:g}}const a=n+Nc,h=t.slice(n,a),f=t.slice(a);return{type:r,sealed:f,iv:h}}function g1(s,t){const r=No(s);return Af({type:hs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?nr(r.senderPublicKey,ir):void 0,receiverPublicKey:t?.receiverPublicKey})}function Af(s){const t=s?.type||Of;if(t===Ji){if(typeof s?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof s?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:s?.senderPublicKey,receiverPublicKey:s?.receiverPublicKey}}function yl(s){return s.type===Ji&&typeof s.senderPublicKey=="string"&&typeof s.receiverPublicKey=="string"}var y1=Object.defineProperty,vl=Object.getOwnPropertySymbols,v1=Object.prototype.hasOwnProperty,m1=Object.prototype.propertyIsEnumerable,ml=(s,t,r)=>t in s?y1(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,wl=(s,t)=>{for(var r in t||(t={}))v1.call(t,r)&&ml(s,r,t[r]);if(vl)for(var r of vl(t))m1.call(t,r)&&ml(s,r,t[r]);return s};const w1="ReactNative",Er={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},_1="js";function Zc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function On(){return!Bm()&&!!vf()&&navigator.product===w1}function An(){return!Zc()&&!!vf()}function ls(){return On()?Er.reactNative:Zc()?Er.node:An()?Er.browser:Er.unknown}function b1(){var s;try{return On()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(s=global.Application)==null?void 0:s.applicationId:void 0}catch{return}}function E1(s,t){let r=Ro.parse(s);return r=wl(wl({},r),t),s=Ro.stringify(r),s}function I1(){return Vm()||{name:"",description:"",url:"",icons:[""]}}function x1(){if(ls()===Er.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const s=Ym();if(s===null)return"unknown";const t=s.os?s.os.replace(" ","").toLowerCase():"unknown";return s.type==="browser"?[t,s.name,s.version].join("-"):[t,s.version].join("-")}function P1(){var s;const t=ls();return t===Er.browser?[t,((s=Wm())==null?void 0:s.host)||"unknown"].join(":"):t}function S1(s,t,r){const n=x1(),a=P1();return[[s,t].join("-"),[_1,r].join("-"),n,a].join("/")}function O1({protocol:s,version:t,relayUrl:r,sdkVersion:n,auth:a,projectId:h,useOnCloseEvent:f,bundleId:v}){const m=r.split("?"),g=S1(s,t,n),E={auth:a,ua:g,projectId:h,useOnCloseEvent:f||void 0,origin:v||void 0},S=E1(m[1]||"",E);return m[0]+"?"+S}function Bi(s,t){return s.filter(r=>t.includes(r)).length===s.length}function Cf(s){return Object.fromEntries(s.entries())}function Tf(s){return new Map(Object.entries(s))}function En(s=oe.FIVE_MINUTES,t){const r=oe.toMiliseconds(s||oe.FIVE_MINUTES);let n,a,h;return{resolve:f=>{h&&n&&(clearTimeout(h),n(f))},reject:f=>{h&&a&&(clearTimeout(h),a(f))},done:()=>new Promise((f,v)=>{h=setTimeout(()=>{v(new Error(t))},r),n=f,a=v})}}function os(s,t,r){return new Promise(async(n,a)=>{const h=setTimeout(()=>a(new Error(r)),t);try{const f=await s;n(f)}catch(f){a(f)}clearTimeout(h)})}function Rf(s,t){if(typeof t=="string"&&t.startsWith(`${s}:`))return t;if(s.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(s.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${s}`)}function A1(s){return Rf("topic",s)}function C1(s){return Rf("id",s)}function Nf(s){const[t,r]=s.split(":"),n={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")n.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return n}function zr(s,t){return oe.fromMiliseconds((t||Date.now())+oe.toMiliseconds(s))}function Oi(s){return Date.now()>=oe.toMiliseconds(s)}function $t(s,t){return`${s}${t?`:${t}`:""}`}function dc(s=[],t=[]){return[...new Set([...s,...t])]}async function T1({id:s,topic:t,wcDeepLink:r}){try{if(!r)return;let a=(typeof r=="string"?JSON.parse(r):r)?.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const h=`${a}/wc?requestId=${s}&sessionTopic=${t}`,f=ls();f===Er.browser?h.startsWith("https://")?window.open(h,"_blank","noreferrer noopener"):window.open(h,"_self","noreferrer noopener"):f===Er.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(h)}catch(n){console.error(n)}}async function R1(s,t){try{return await s.getItem(t)||(An()?localStorage.getItem(t):void 0)}catch(r){console.error(r)}}const N1="irn";function Dc(s){return s?.relay||{protocol:N1}}function Oo(s){const t=i1[s];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${s}`);return t}var $1=Object.defineProperty,_l=Object.getOwnPropertySymbols,D1=Object.prototype.hasOwnProperty,F1=Object.prototype.propertyIsEnumerable,bl=(s,t,r)=>t in s?$1(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,L1=(s,t)=>{for(var r in t||(t={}))D1.call(t,r)&&bl(s,r,t[r]);if(_l)for(var r of _l(t))F1.call(t,r)&&bl(s,r,t[r]);return s};function j1(s,t="-"){const r={},n="relay"+t;return Object.keys(s).forEach(a=>{if(a.startsWith(n)){const h=a.replace(n,""),f=s[a];r[h]=f}}),r}function El(s){s=s.includes("wc://")?s.replace("wc://",""):s,s=s.includes("wc:")?s.replace("wc:",""):s;const t=s.indexOf(":"),r=s.indexOf("?")!==-1?s.indexOf("?"):void 0,n=s.substring(0,t),a=s.substring(t+1,r).split("@"),h=typeof r<"u"?s.substring(r):"",f=Ro.parse(h);return{protocol:n,topic:M1(a[0]),version:parseInt(a[1],10),symKey:f.symKey,relay:j1(f)}}function M1(s){return s.startsWith("//")?s.substring(2):s}function q1(s,t="-"){const r="relay",n={};return Object.keys(s).forEach(a=>{const h=r+t+a;s[a]&&(n[h]=s[a])}),n}function U1(s){return`${s.protocol}:${s.topic}@${s.version}?`+Ro.stringify(L1({symKey:s.symKey},q1(s.relay)))}function Cn(s){const t=[];return s.forEach(r=>{const[n,a]=r.split(":");t.push(`${n}:${a}`)}),t}function z1(s){const t=[];return Object.values(s).forEach(r=>{t.push(...Cn(r.accounts))}),t}function H1(s,t){const r=[];return Object.values(s).forEach(n=>{Cn(n.accounts).includes(t)&&r.push(...n.methods)}),r}function k1(s,t){const r=[];return Object.values(s).forEach(n=>{Cn(n.accounts).includes(t)&&r.push(...n.events)}),r}function K1(s,t){const r=Ao(s,t);if(r)throw new Error(r.message);const n={};for(const[a,h]of Object.entries(s))n[a]={methods:h.methods,events:h.events,chains:h.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return n}function Xc(s){return s.includes(":")}function rs(s){return Xc(s)?s.split(":")[0]:s}const V1={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},B1={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Y(s,t){const{message:r,code:n}=B1[s];return{message:t?`${r} ${t}`:r,code:n}}function It(s,t){const{message:r,code:n}=V1[s];return{message:t?`${r} ${t}`:r,code:n}}function Yr(s,t){return Array.isArray(s)?typeof t<"u"&&s.length?s.every(t):!0:!1}function Pn(s){return Object.getPrototypeOf(s)===Object.prototype&&Object.keys(s).length}function rr(s){return typeof s>"u"}function zt(s,t){return t&&rr(s)?!0:typeof s=="string"&&!!s.trim().length}function eu(s,t){return t&&rr(s)?!0:typeof s=="number"&&!isNaN(s)}function G1(s,t){const{requiredNamespaces:r}=t,n=Object.keys(s.namespaces),a=Object.keys(r);let h=!0;return Bi(a,n)?(n.forEach(f=>{const{accounts:v,methods:m,events:g}=s.namespaces[f],E=Cn(v),S=r[f];(!Bi(Pf(f,S),E)||!Bi(S.methods,m)||!Bi(S.events,g))&&(h=!1)}),h):!1}function $o(s){return zt(s,!1)&&s.includes(":")?s.split(":").length===2:!1}function W1(s){if(zt(s,!1)&&s.includes(":")){const t=s.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&$o(r)}}return!1}function J1(s){if(zt(s,!1))try{return typeof new URL(s)<"u"}catch{return!1}return!1}function Q1(s){var t;return(t=s?.proposer)==null?void 0:t.publicKey}function Y1(s){return s?.topic}function Z1(s,t){let r=null;return zt(s?.publicKey,!1)||(r=Y("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Il(s){let t=!0;return Yr(s)?s.length&&(t=s.every(r=>zt(r,!1))):t=!1,t}function X1(s,t,r){let n=null;return Yr(t)&&t.length?t.forEach(a=>{n||$o(a)||(n=It("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):$o(s)||(n=It("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function ew(s,t,r){let n=null;return Object.entries(s).forEach(([a,h])=>{if(n)return;const f=X1(a,Pf(a,h),`${t} ${r}`);f&&(n=f)}),n}function tw(s,t){let r=null;return Yr(s)?s.forEach(n=>{r||W1(n)||(r=It("UNSUPPORTED_ACCOUNTS",`${t}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=It("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function rw(s,t){let r=null;return Object.values(s).forEach(n=>{if(r)return;const a=tw(n?.accounts,`${t} namespace`);a&&(r=a)}),r}function iw(s,t){let r=null;return Il(s?.methods)?Il(s?.events)||(r=It("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=It("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function $f(s,t){let r=null;return Object.values(s).forEach(n=>{if(r)return;const a=iw(n,`${t}, namespace`);a&&(r=a)}),r}function nw(s,t,r){let n=null;if(s&&Pn(s)){const a=$f(s,t);a&&(n=a);const h=ew(s,t,r);h&&(n=h)}else n=Y("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}function Ao(s,t){let r=null;if(s&&Pn(s)){const n=$f(s,t);n&&(r=n);const a=rw(s,t);a&&(r=a)}else r=Y("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Df(s){return zt(s.protocol,!0)}function sw(s,t){let r=!1;return t&&!s?r=!0:s&&Yr(s)&&s.length&&s.forEach(n=>{r=Df(n)}),r}function ow(s){return typeof s=="number"}function pr(s){return typeof s<"u"&&typeof s!==null}function aw(s){return!(!s||typeof s!="object"||!s.code||!eu(s.code,!1)||!s.message||!zt(s.message,!1))}function cw(s){return!(rr(s)||!zt(s.method,!1))}function uw(s){return!(rr(s)||rr(s.result)&&rr(s.error)||!eu(s.id,!1)||!zt(s.jsonrpc,!1))}function hw(s){return!(rr(s)||!zt(s.name,!1))}function xl(s,t){return!(!$o(t)||!z1(s).includes(t))}function lw(s,t,r){return zt(r,!1)?H1(s,t).includes(r):!1}function fw(s,t,r){return zt(r,!1)?k1(s,t).includes(r):!1}function Pl(s,t,r){let n=null;const a=pw(s),h=dw(t),f=Object.keys(a),v=Object.keys(h),m=Sl(Object.keys(s)),g=Sl(Object.keys(t)),E=m.filter(S=>!g.includes(S));return E.length&&(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${E.toString()}
      Received: ${Object.keys(t).toString()}`)),Bi(f,v)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${v.toString()}`)),Object.keys(t).forEach(S=>{if(!S.includes(":")||n)return;const j=Cn(t[S].accounts);j.includes(S)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${j.toString()}`))}),f.forEach(S=>{n||(Bi(a[S].methods,h[S].methods)?Bi(a[S].events,h[S].events)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${S}`)):n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${S}`))}),n}function pw(s){const t={};return Object.keys(s).forEach(r=>{var n;r.includes(":")?t[r]=s[r]:(n=s[r].chains)==null||n.forEach(a=>{t[a]={methods:s[r].methods,events:s[r].events}})}),t}function Sl(s){return[...new Set(s.map(t=>t.includes(":")?t.split(":")[0]:t))]}function dw(s){const t={};return Object.keys(s).forEach(r=>{r.includes(":")?t[r]=s[r]:Cn(s[r].accounts)?.forEach(a=>{t[a]={accounts:s[r].accounts.filter(h=>h.includes(`${a}:`)),methods:s[r].methods,events:s[r].events}})}),t}function gw(s,t){return eu(s,!1)&&s<=t.max&&s>=t.min}function Ol(){const s=ls();return new Promise(t=>{switch(s){case Er.browser:t(yw());break;case Er.reactNative:t(vw());break;case Er.node:t(mw());break;default:t(!0)}})}function yw(){return An()&&navigator?.onLine}async function vw(){return On()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function mw(){return!0}function ww(s){switch(ls()){case Er.browser:_w(s);break;case Er.reactNative:bw(s);break}}function _w(s){!On()&&An()&&(window.addEventListener("online",()=>s(!0)),window.addEventListener("offline",()=>s(!1)))}function bw(s){On()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>s(t?.isConnected))}const gc={};class _o{static get(t){return gc[t]}static set(t,r){gc[t]=r}static delete(t){delete gc[t]}}const Ew=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Iw=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,xw=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Pw(s,t){if(s==="__proto__"||s==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Sw(s);return}return t}function Sw(s){console.warn(`[destr] Dropping "${s}" key to prevent prototype pollution.`)}function bo(s,t={}){if(typeof s!="string")return s;const r=s.trim();if(s[0]==='"'&&s.at(-1)==='"'&&!s.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!xw.test(s)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return s}try{if(Ew.test(s)||Iw.test(s)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(s,Pw)}return JSON.parse(s)}catch(n){if(t.strict)throw n;return s}}function Ow(s){return!s||typeof s.then!="function"?Promise.resolve(s):s}function Ut(s,...t){try{return Ow(s(...t))}catch(r){return Promise.reject(r)}}function Aw(s){const t=typeof s;return s===null||t!=="object"&&t!=="function"}function Cw(s){const t=Object.getPrototypeOf(s);return!t||t.isPrototypeOf(Object)}function Co(s){if(Aw(s))return String(s);if(Cw(s)||Array.isArray(s))return JSON.stringify(s);if(typeof s.toJSON=="function")return Co(s.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Ff(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Fc="base64:";function Tw(s){if(typeof s=="string")return s;Ff();const t=Buffer.from(s).toString("base64");return Fc+t}function Rw(s){return typeof s!="string"||!s.startsWith(Fc)?s:(Ff(),Buffer.from(s.slice(Fc.length),"base64"))}function fr(s){return s?s.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Nw(...s){return fr(s.join(":"))}function Eo(s){return s=fr(s),s?s+":":""}const $w="memory",Dw=()=>{const s=new Map;return{name:$w,options:{},hasItem(t){return s.has(t)},getItem(t){return s.get(t)??null},getItemRaw(t){return s.get(t)??null},setItem(t,r){s.set(t,r)},setItemRaw(t,r){s.set(t,r)},removeItem(t){s.delete(t)},getKeys(){return Array.from(s.keys())},clear(){s.clear()},dispose(){s.clear()}}};function Fw(s={}){const t={mounts:{"":s.driver||Dw()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=g=>{for(const E of t.mountpoints)if(g.startsWith(E))return{base:E,relativeKey:g.slice(E.length),driver:t.mounts[E]};return{base:"",relativeKey:g,driver:t.mounts[""]}},n=(g,E)=>t.mountpoints.filter(S=>S.startsWith(g)||E&&g.startsWith(S)).map(S=>({relativeBase:g.length>S.length?g.slice(S.length):void 0,mountpoint:S,driver:t.mounts[S]})),a=(g,E)=>{if(!!t.watching){E=fr(E);for(const S of t.watchListeners)S(g,E)}},h=async()=>{if(!t.watching){t.watching=!0;for(const g in t.mounts)t.unwatch[g]=await Al(t.mounts[g],a,g)}},f=async()=>{if(!!t.watching){for(const g in t.unwatch)await t.unwatch[g]();t.unwatch={},t.watching=!1}},v=(g,E,S)=>{const j=new Map,z=$=>{let ie=j.get($.base);return ie||(ie={driver:$.driver,base:$.base,items:[]},j.set($.base,ie)),ie};for(const $ of g){const ie=typeof $=="string",ce=fr(ie?$:$.key),ue=ie?void 0:$.value,fe=ie||!$.options?E:{...E,...$.options},le=r(ce);z(le).items.push({key:ce,value:ue,relativeKey:le.relativeKey,options:fe})}return Promise.all([...j.values()].map($=>S($))).then($=>$.flat())},m={hasItem(g,E={}){g=fr(g);const{relativeKey:S,driver:j}=r(g);return Ut(j.hasItem,S,E)},getItem(g,E={}){g=fr(g);const{relativeKey:S,driver:j}=r(g);return Ut(j.getItem,S,E).then(z=>bo(z))},getItems(g,E){return v(g,E,S=>S.driver.getItems?Ut(S.driver.getItems,S.items.map(j=>({key:j.relativeKey,options:j.options})),E).then(j=>j.map(z=>({key:Nw(S.base,z.key),value:bo(z.value)}))):Promise.all(S.items.map(j=>Ut(S.driver.getItem,j.relativeKey,j.options).then(z=>({key:j.key,value:bo(z)})))))},getItemRaw(g,E={}){g=fr(g);const{relativeKey:S,driver:j}=r(g);return j.getItemRaw?Ut(j.getItemRaw,S,E):Ut(j.getItem,S,E).then(z=>Rw(z))},async setItem(g,E,S={}){if(E===void 0)return m.removeItem(g);g=fr(g);const{relativeKey:j,driver:z}=r(g);!z.setItem||(await Ut(z.setItem,j,Co(E),S),z.watch||a("update",g))},async setItems(g,E){await v(g,E,async S=>{S.driver.setItems&&await Ut(S.driver.setItems,S.items.map(j=>({key:j.relativeKey,value:Co(j.value),options:j.options})),E),S.driver.setItem&&await Promise.all(S.items.map(j=>Ut(S.driver.setItem,j.relativeKey,Co(j.value),j.options)))})},async setItemRaw(g,E,S={}){if(E===void 0)return m.removeItem(g,S);g=fr(g);const{relativeKey:j,driver:z}=r(g);if(z.setItemRaw)await Ut(z.setItemRaw,j,E,S);else if(z.setItem)await Ut(z.setItem,j,Tw(E),S);else return;z.watch||a("update",g)},async removeItem(g,E={}){typeof E=="boolean"&&(E={removeMeta:E}),g=fr(g);const{relativeKey:S,driver:j}=r(g);!j.removeItem||(await Ut(j.removeItem,S,E),(E.removeMeta||E.removeMata)&&await Ut(j.removeItem,S+"$",E),j.watch||a("remove",g))},async getMeta(g,E={}){typeof E=="boolean"&&(E={nativeOnly:E}),g=fr(g);const{relativeKey:S,driver:j}=r(g),z=Object.create(null);if(j.getMeta&&Object.assign(z,await Ut(j.getMeta,S,E)),!E.nativeOnly){const $=await Ut(j.getItem,S+"$",E).then(ie=>bo(ie));$&&typeof $=="object"&&(typeof $.atime=="string"&&($.atime=new Date($.atime)),typeof $.mtime=="string"&&($.mtime=new Date($.mtime)),Object.assign(z,$))}return z},setMeta(g,E,S={}){return this.setItem(g+"$",E,S)},removeMeta(g,E={}){return this.removeItem(g+"$",E)},async getKeys(g,E={}){g=Eo(g);const S=n(g,!0);let j=[];const z=[];for(const $ of S){const ce=(await Ut($.driver.getKeys,$.relativeBase,E)).map(ue=>$.mountpoint+fr(ue)).filter(ue=>!j.some(fe=>ue.startsWith(fe)));z.push(...ce),j=[$.mountpoint,...j.filter(ue=>!ue.startsWith($.mountpoint))]}return g?z.filter($=>$.startsWith(g)&&!$.endsWith("$")):z.filter($=>!$.endsWith("$"))},async clear(g,E={}){g=Eo(g),await Promise.all(n(g,!1).map(async S=>{if(S.driver.clear)return Ut(S.driver.clear,S.relativeBase,E);if(S.driver.removeItem){const j=await S.driver.getKeys(S.relativeBase||"",E);return Promise.all(j.map(z=>S.driver.removeItem(z,E)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(g=>Cl(g)))},async watch(g){return await h(),t.watchListeners.push(g),async()=>{t.watchListeners=t.watchListeners.filter(E=>E!==g),t.watchListeners.length===0&&await f()}},async unwatch(){t.watchListeners=[],await f()},mount(g,E){if(g=Eo(g),g&&t.mounts[g])throw new Error(`already mounted at ${g}`);return g&&(t.mountpoints.push(g),t.mountpoints.sort((S,j)=>j.length-S.length)),t.mounts[g]=E,t.watching&&Promise.resolve(Al(E,a,g)).then(S=>{t.unwatch[g]=S}).catch(console.error),m},async unmount(g,E=!0){g=Eo(g),!(!g||!t.mounts[g])&&(t.watching&&g in t.unwatch&&(t.unwatch[g](),delete t.unwatch[g]),E&&await Cl(t.mounts[g]),t.mountpoints=t.mountpoints.filter(S=>S!==g),delete t.mounts[g])},getMount(g=""){g=fr(g)+":";const E=r(g);return{driver:E.driver,base:E.base}},getMounts(g="",E={}){return g=fr(g),n(g,E.parents).map(j=>({driver:j.driver,base:j.mountpoint}))}};return m}function Al(s,t,r){return s.watch?s.watch((n,a)=>t(n,r+a)):()=>{}}async function Cl(s){typeof s.dispose=="function"&&await Ut(s.dispose)}function Qi(s){return new Promise((t,r)=>{s.oncomplete=s.onsuccess=()=>t(s.result),s.onabort=s.onerror=()=>r(s.error)})}function Lf(s,t){const r=indexedDB.open(s);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=Qi(r);return(a,h)=>n.then(f=>h(f.transaction(t,a).objectStore(t)))}let yc;function fs(){return yc||(yc=Lf("keyval-store","keyval")),yc}function Tl(s,t=fs()){return t("readonly",r=>Qi(r.get(s)))}function Lw(s,t,r=fs()){return r("readwrite",n=>(n.put(t,s),Qi(n.transaction)))}function jw(s,t=fs()){return t("readwrite",r=>(r.delete(s),Qi(r.transaction)))}function Mw(s=fs()){return s("readwrite",t=>(t.clear(),Qi(t.transaction)))}function qw(s,t){return s.openCursor().onsuccess=function(){!this.result||(t(this.result),this.result.continue())},Qi(s.transaction)}function Uw(s=fs()){return s("readonly",t=>{if(t.getAllKeys)return Qi(t.getAllKeys());const r=[];return qw(t,n=>r.push(n.key)).then(()=>r)})}const zw="idb-keyval";var Hw=(s={})=>{const t=s.base&&s.base.length>0?`${s.base}:`:"",r=a=>t+a;let n;return s.dbName&&s.storeName&&(n=Lf(s.dbName,s.storeName)),{name:zw,options:s,async hasItem(a){return!(typeof await Tl(r(a),n)>"u")},async getItem(a){return await Tl(r(a),n)??null},setItem(a,h){return Lw(r(a),h,n)},removeItem(a){return jw(r(a),n)},getKeys(){return Uw(n)},clear(){return Mw(n)}}};const kw="WALLET_CONNECT_V2_INDEXED_DB",Kw="keyvaluestorage";class Vw{constructor(){this.indexedDb=Fw({driver:Hw({dbName:kw,storeName:Kw})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,Gi(r))}async removeItem(t){await this.indexedDb.removeItem(t)}}var vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},To={exports:{}};(function(){let s;function t(){}s=t,s.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},s.prototype.setItem=function(r,n){this[r]=String(n)},s.prototype.removeItem=function(r){delete this[r]},s.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},s.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},s.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof vc<"u"&&vc.localStorage?To.exports=vc.localStorage:typeof window<"u"&&window.localStorage?To.exports=window.localStorage:To.exports=new t})();function Bw(s){var t;return[s[0],us((t=s[1])!=null?t:"")]}class Gw{constructor(){this.localStorage=To.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Bw)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return us(r)}async setItem(t,r){this.localStorage.setItem(t,Gi(r))}async removeItem(t){this.localStorage.removeItem(t)}}const Ww="wc_storage_version",Rl=1,Jw=async(s,t,r)=>{const n=Ww,a=await t.getItem(n);if(a&&a>=Rl){r(t);return}const h=await s.getKeys();if(!h.length){r(t);return}const f=[];for(;h.length;){const v=h.shift();if(!v)continue;const m=v.toLowerCase();if(m.includes("wc@")||m.includes("walletconnect")||m.includes("wc_")||m.includes("wallet_connect")){const g=await s.getItem(v);await t.setItem(v,g),f.push(v)}}await t.setItem(n,Rl),r(t),Qw(s,f)},Qw=async(s,t)=>{t.length&&t.forEach(async r=>{await s.removeItem(r)})};class Yw{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const t=new Gw;this.storage=t;try{const r=new Vw;Jw(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),t())},20)})}}var Tn={},ps={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(s){var t,r,n,a,h,f,v,m,g,E,S,j,z,$,ie,ce,ue,fe,le,ae,ye,ve,re;(function(Q){var He=typeof Ai=="object"?Ai:typeof self=="object"?self:typeof this=="object"?this:{};Q(b(He,b(s.exports)));function b(O,A){return O!==He&&(typeof Object.create=="function"?Object.defineProperty(O,"__esModule",{value:!0}):O.__esModule=!0),function(q,x){return O[q]=A?A(q,x):x}}})(function(Q){var He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,O){b.__proto__=O}||function(b,O){for(var A in O)O.hasOwnProperty(A)&&(b[A]=O[A])};t=function(b,O){He(b,O);function A(){this.constructor=b}b.prototype=O===null?Object.create(O):(A.prototype=O.prototype,new A)},r=Object.assign||function(b){for(var O,A=1,q=arguments.length;A<q;A++){O=arguments[A];for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(b[x]=O[x])}return b},n=function(b,O){var A={};for(var q in b)Object.prototype.hasOwnProperty.call(b,q)&&O.indexOf(q)<0&&(A[q]=b[q]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,q=Object.getOwnPropertySymbols(b);x<q.length;x++)O.indexOf(q[x])<0&&Object.prototype.propertyIsEnumerable.call(b,q[x])&&(A[q[x]]=b[q[x]]);return A},a=function(b,O,A,q){var x=arguments.length,_=x<3?O:q===null?q=Object.getOwnPropertyDescriptor(O,A):q,G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(b,O,A,q);else for(var X=b.length-1;X>=0;X--)(G=b[X])&&(_=(x<3?G(_):x>3?G(O,A,_):G(O,A))||_);return x>3&&_&&Object.defineProperty(O,A,_),_},h=function(b,O){return function(A,q){O(A,q,b)}},f=function(b,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(b,O)},v=function(b,O,A,q){function x(_){return _ instanceof A?_:new A(function(G){G(_)})}return new(A||(A=Promise))(function(_,G){function X(V){try{D(q.next(V))}catch(J){G(J)}}function W(V){try{D(q.throw(V))}catch(J){G(J)}}function D(V){V.done?_(V.value):x(V.value).then(X,W)}D((q=q.apply(b,O||[])).next())})},m=function(b,O){var A={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},q,x,_,G;return G={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function X(D){return function(V){return W([D,V])}}function W(D){if(q)throw new TypeError("Generator is already executing.");for(;A;)try{if(q=1,x&&(_=D[0]&2?x.return:D[0]?x.throw||((_=x.return)&&_.call(x),0):x.next)&&!(_=_.call(x,D[1])).done)return _;switch(x=0,_&&(D=[D[0]&2,_.value]),D[0]){case 0:case 1:_=D;break;case 4:return A.label++,{value:D[1],done:!1};case 5:A.label++,x=D[1],D=[0];continue;case 7:D=A.ops.pop(),A.trys.pop();continue;default:if(_=A.trys,!(_=_.length>0&&_[_.length-1])&&(D[0]===6||D[0]===2)){A=0;continue}if(D[0]===3&&(!_||D[1]>_[0]&&D[1]<_[3])){A.label=D[1];break}if(D[0]===6&&A.label<_[1]){A.label=_[1],_=D;break}if(_&&A.label<_[2]){A.label=_[2],A.ops.push(D);break}_[2]&&A.ops.pop(),A.trys.pop();continue}D=O.call(b,A)}catch(V){D=[6,V],x=0}finally{q=_=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}},re=function(b,O,A,q){q===void 0&&(q=A),b[q]=O[A]},g=function(b,O){for(var A in b)A!=="default"&&!O.hasOwnProperty(A)&&(O[A]=b[A])},E=function(b){var O=typeof Symbol=="function"&&Symbol.iterator,A=O&&b[O],q=0;if(A)return A.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&q>=b.length&&(b=void 0),{value:b&&b[q++],done:!b}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(b,O){var A=typeof Symbol=="function"&&b[Symbol.iterator];if(!A)return b;var q=A.call(b),x,_=[],G;try{for(;(O===void 0||O-- >0)&&!(x=q.next()).done;)_.push(x.value)}catch(X){G={error:X}}finally{try{x&&!x.done&&(A=q.return)&&A.call(q)}finally{if(G)throw G.error}}return _},j=function(){for(var b=[],O=0;O<arguments.length;O++)b=b.concat(S(arguments[O]));return b},z=function(){for(var b=0,O=0,A=arguments.length;O<A;O++)b+=arguments[O].length;for(var q=Array(b),x=0,O=0;O<A;O++)for(var _=arguments[O],G=0,X=_.length;G<X;G++,x++)q[x]=_[G];return q},$=function(b){return this instanceof $?(this.v=b,this):new $(b)},ie=function(b,O,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q=A.apply(b,O||[]),x,_=[];return x={},G("next"),G("throw"),G("return"),x[Symbol.asyncIterator]=function(){return this},x;function G(he){q[he]&&(x[he]=function(Ae){return new Promise(function(Jt,Ie){_.push([he,Ae,Jt,Ie])>1||X(he,Ae)})})}function X(he,Ae){try{W(q[he](Ae))}catch(Jt){J(_[0][3],Jt)}}function W(he){he.value instanceof $?Promise.resolve(he.value.v).then(D,V):J(_[0][2],he)}function D(he){X("next",he)}function V(he){X("throw",he)}function J(he,Ae){he(Ae),_.shift(),_.length&&X(_[0][0],_[0][1])}},ce=function(b){var O,A;return O={},q("next"),q("throw",function(x){throw x}),q("return"),O[Symbol.iterator]=function(){return this},O;function q(x,_){O[x]=b[x]?function(G){return(A=!A)?{value:$(b[x](G)),done:x==="return"}:_?_(G):G}:_}},ue=function(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=b[Symbol.asyncIterator],A;return O?O.call(b):(b=typeof E=="function"?E(b):b[Symbol.iterator](),A={},q("next"),q("throw"),q("return"),A[Symbol.asyncIterator]=function(){return this},A);function q(_){A[_]=b[_]&&function(G){return new Promise(function(X,W){G=b[_](G),x(X,W,G.done,G.value)})}}function x(_,G,X,W){Promise.resolve(W).then(function(D){_({value:D,done:X})},G)}},fe=function(b,O){return Object.defineProperty?Object.defineProperty(b,"raw",{value:O}):b.raw=O,b},le=function(b){if(b&&b.__esModule)return b;var O={};if(b!=null)for(var A in b)Object.hasOwnProperty.call(b,A)&&(O[A]=b[A]);return O.default=b,O},ae=function(b){return b&&b.__esModule?b:{default:b}},ye=function(b,O){if(!O.has(b))throw new TypeError("attempted to get private field on non-instance");return O.get(b)},ve=function(b,O,A){if(!O.has(b))throw new TypeError("attempted to set private field on non-instance");return O.set(b,A),A},Q("__extends",t),Q("__assign",r),Q("__rest",n),Q("__decorate",a),Q("__param",h),Q("__metadata",f),Q("__awaiter",v),Q("__generator",m),Q("__exportStar",g),Q("__createBinding",re),Q("__values",E),Q("__read",S),Q("__spread",j),Q("__spreadArrays",z),Q("__await",$),Q("__asyncGenerator",ie),Q("__asyncDelegator",ce),Q("__asyncValues",ue),Q("__makeTemplateObject",fe),Q("__importStar",le),Q("__importDefault",ae),Q("__classPrivateFieldGet",ye),Q("__classPrivateFieldSet",ve)})})(ps);var Mo={},tu={},qo={};class Yi{}var Zw=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Yi},Symbol.toStringTag,{value:"Module"})),Xw=r1(Zw);Object.defineProperty(qo,"__esModule",{value:!0});qo.IHeartBeat=void 0;const e_=Xw;class t_ extends e_.IEvents{constructor(t){super()}}qo.IHeartBeat=t_;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),ps.exports.__exportStar(qo,s)})(tu);var ru={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.HEARTBEAT_EVENTS=Sn.HEARTBEAT_INTERVAL=void 0;const r_=oe;Sn.HEARTBEAT_INTERVAL=r_.FIVE_SECONDS;Sn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),ps.exports.__exportStar(Sn,s)})(ru);Object.defineProperty(Mo,"__esModule",{value:!0});Mo.HeartBeat=void 0;const mc=ps.exports,i_=Hr.exports,n_=oe,s_=tu,wc=ru;class iu extends s_.IHeartBeat{constructor(t){super(t),this.events=new i_.EventEmitter,this.interval=wc.HEARTBEAT_INTERVAL,this.interval=t?.interval||wc.HEARTBEAT_INTERVAL}static init(t){return mc.__awaiter(this,void 0,void 0,function*(){const r=new iu(t);return yield r.init(),r})}init(){return mc.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}initialize(){return mc.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),n_.toMiliseconds(this.interval))})}pulse(){this.events.emit(wc.HEARTBEAT_EVENTS.pulse)}}Mo.HeartBeat=iu;(function(s){Object.defineProperty(s,"__esModule",{value:!0});const t=ps.exports;t.__exportStar(Mo,s),t.__exportStar(tu,s),t.__exportStar(ru,s)})(Tn);var $e={},jf={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(s){var t,r,n,a,h,f,v,m,g,E,S,j,z,$,ie,ce,ue,fe,le,ae,ye,ve,re;(function(Q){var He=typeof Ai=="object"?Ai:typeof self=="object"?self:typeof this=="object"?this:{};Q(b(He,b(s.exports)));function b(O,A){return O!==He&&(typeof Object.create=="function"?Object.defineProperty(O,"__esModule",{value:!0}):O.__esModule=!0),function(q,x){return O[q]=A?A(q,x):x}}})(function(Q){var He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,O){b.__proto__=O}||function(b,O){for(var A in O)O.hasOwnProperty(A)&&(b[A]=O[A])};t=function(b,O){He(b,O);function A(){this.constructor=b}b.prototype=O===null?Object.create(O):(A.prototype=O.prototype,new A)},r=Object.assign||function(b){for(var O,A=1,q=arguments.length;A<q;A++){O=arguments[A];for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(b[x]=O[x])}return b},n=function(b,O){var A={};for(var q in b)Object.prototype.hasOwnProperty.call(b,q)&&O.indexOf(q)<0&&(A[q]=b[q]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,q=Object.getOwnPropertySymbols(b);x<q.length;x++)O.indexOf(q[x])<0&&Object.prototype.propertyIsEnumerable.call(b,q[x])&&(A[q[x]]=b[q[x]]);return A},a=function(b,O,A,q){var x=arguments.length,_=x<3?O:q===null?q=Object.getOwnPropertyDescriptor(O,A):q,G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(b,O,A,q);else for(var X=b.length-1;X>=0;X--)(G=b[X])&&(_=(x<3?G(_):x>3?G(O,A,_):G(O,A))||_);return x>3&&_&&Object.defineProperty(O,A,_),_},h=function(b,O){return function(A,q){O(A,q,b)}},f=function(b,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(b,O)},v=function(b,O,A,q){function x(_){return _ instanceof A?_:new A(function(G){G(_)})}return new(A||(A=Promise))(function(_,G){function X(V){try{D(q.next(V))}catch(J){G(J)}}function W(V){try{D(q.throw(V))}catch(J){G(J)}}function D(V){V.done?_(V.value):x(V.value).then(X,W)}D((q=q.apply(b,O||[])).next())})},m=function(b,O){var A={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},q,x,_,G;return G={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function X(D){return function(V){return W([D,V])}}function W(D){if(q)throw new TypeError("Generator is already executing.");for(;A;)try{if(q=1,x&&(_=D[0]&2?x.return:D[0]?x.throw||((_=x.return)&&_.call(x),0):x.next)&&!(_=_.call(x,D[1])).done)return _;switch(x=0,_&&(D=[D[0]&2,_.value]),D[0]){case 0:case 1:_=D;break;case 4:return A.label++,{value:D[1],done:!1};case 5:A.label++,x=D[1],D=[0];continue;case 7:D=A.ops.pop(),A.trys.pop();continue;default:if(_=A.trys,!(_=_.length>0&&_[_.length-1])&&(D[0]===6||D[0]===2)){A=0;continue}if(D[0]===3&&(!_||D[1]>_[0]&&D[1]<_[3])){A.label=D[1];break}if(D[0]===6&&A.label<_[1]){A.label=_[1],_=D;break}if(_&&A.label<_[2]){A.label=_[2],A.ops.push(D);break}_[2]&&A.ops.pop(),A.trys.pop();continue}D=O.call(b,A)}catch(V){D=[6,V],x=0}finally{q=_=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}},re=function(b,O,A,q){q===void 0&&(q=A),b[q]=O[A]},g=function(b,O){for(var A in b)A!=="default"&&!O.hasOwnProperty(A)&&(O[A]=b[A])},E=function(b){var O=typeof Symbol=="function"&&Symbol.iterator,A=O&&b[O],q=0;if(A)return A.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&q>=b.length&&(b=void 0),{value:b&&b[q++],done:!b}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(b,O){var A=typeof Symbol=="function"&&b[Symbol.iterator];if(!A)return b;var q=A.call(b),x,_=[],G;try{for(;(O===void 0||O-- >0)&&!(x=q.next()).done;)_.push(x.value)}catch(X){G={error:X}}finally{try{x&&!x.done&&(A=q.return)&&A.call(q)}finally{if(G)throw G.error}}return _},j=function(){for(var b=[],O=0;O<arguments.length;O++)b=b.concat(S(arguments[O]));return b},z=function(){for(var b=0,O=0,A=arguments.length;O<A;O++)b+=arguments[O].length;for(var q=Array(b),x=0,O=0;O<A;O++)for(var _=arguments[O],G=0,X=_.length;G<X;G++,x++)q[x]=_[G];return q},$=function(b){return this instanceof $?(this.v=b,this):new $(b)},ie=function(b,O,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q=A.apply(b,O||[]),x,_=[];return x={},G("next"),G("throw"),G("return"),x[Symbol.asyncIterator]=function(){return this},x;function G(he){q[he]&&(x[he]=function(Ae){return new Promise(function(Jt,Ie){_.push([he,Ae,Jt,Ie])>1||X(he,Ae)})})}function X(he,Ae){try{W(q[he](Ae))}catch(Jt){J(_[0][3],Jt)}}function W(he){he.value instanceof $?Promise.resolve(he.value.v).then(D,V):J(_[0][2],he)}function D(he){X("next",he)}function V(he){X("throw",he)}function J(he,Ae){he(Ae),_.shift(),_.length&&X(_[0][0],_[0][1])}},ce=function(b){var O,A;return O={},q("next"),q("throw",function(x){throw x}),q("return"),O[Symbol.iterator]=function(){return this},O;function q(x,_){O[x]=b[x]?function(G){return(A=!A)?{value:$(b[x](G)),done:x==="return"}:_?_(G):G}:_}},ue=function(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=b[Symbol.asyncIterator],A;return O?O.call(b):(b=typeof E=="function"?E(b):b[Symbol.iterator](),A={},q("next"),q("throw"),q("return"),A[Symbol.asyncIterator]=function(){return this},A);function q(_){A[_]=b[_]&&function(G){return new Promise(function(X,W){G=b[_](G),x(X,W,G.done,G.value)})}}function x(_,G,X,W){Promise.resolve(W).then(function(D){_({value:D,done:X})},G)}},fe=function(b,O){return Object.defineProperty?Object.defineProperty(b,"raw",{value:O}):b.raw=O,b},le=function(b){if(b&&b.__esModule)return b;var O={};if(b!=null)for(var A in b)Object.hasOwnProperty.call(b,A)&&(O[A]=b[A]);return O.default=b,O},ae=function(b){return b&&b.__esModule?b:{default:b}},ye=function(b,O){if(!O.has(b))throw new TypeError("attempted to get private field on non-instance");return O.get(b)},ve=function(b,O,A){if(!O.has(b))throw new TypeError("attempted to set private field on non-instance");return O.set(b,A),A},Q("__extends",t),Q("__assign",r),Q("__rest",n),Q("__decorate",a),Q("__param",h),Q("__metadata",f),Q("__awaiter",v),Q("__generator",m),Q("__exportStar",g),Q("__createBinding",re),Q("__values",E),Q("__read",S),Q("__spread",j),Q("__spreadArrays",z),Q("__await",$),Q("__asyncGenerator",ie),Q("__asyncDelegator",ce),Q("__asyncValues",ue),Q("__makeTemplateObject",fe),Q("__importStar",le),Q("__importDefault",ae),Q("__classPrivateFieldGet",ye),Q("__classPrivateFieldSet",ve)})})(jf);function o_(s){try{return JSON.stringify(s)}catch{return'"[Circular]"'}}var a_=c_;function c_(s,t,r){var n=r&&r.stringify||o_,a=1;if(typeof s=="object"&&s!==null){var h=t.length+a;if(h===1)return s;var f=new Array(h);f[0]=n(s);for(var v=1;v<h;v++)f[v]=n(t[v]);return f.join(" ")}if(typeof s!="string")return s;var m=t.length;if(m===0)return s;for(var g="",E=1-a,S=-1,j=s&&s.length||0,z=0;z<j;){if(s.charCodeAt(z)===37&&z+1<j){switch(S=S>-1?S:0,s.charCodeAt(z+1)){case 100:case 102:if(E>=m||t[E]==null)break;S<z&&(g+=s.slice(S,z)),g+=Number(t[E]),S=z+2,z++;break;case 105:if(E>=m||t[E]==null)break;S<z&&(g+=s.slice(S,z)),g+=Math.floor(Number(t[E])),S=z+2,z++;break;case 79:case 111:case 106:if(E>=m||t[E]===void 0)break;S<z&&(g+=s.slice(S,z));var $=typeof t[E];if($==="string"){g+="'"+t[E]+"'",S=z+2,z++;break}if($==="function"){g+=t[E].name||"<anonymous>",S=z+2,z++;break}g+=n(t[E]),S=z+2,z++;break;case 115:if(E>=m)break;S<z&&(g+=s.slice(S,z)),g+=String(t[E]),S=z+2,z++;break;case 37:S<z&&(g+=s.slice(S,z)),g+="%",S=z+2,z++,E--;break}++E}++z}return S===-1?s:(S<j&&(g+=s.slice(S)),g)}const Nl=a_;var u_=Qr;const as=w_().console||{},h_={mapHttpRequest:Io,mapHttpResponse:Io,wrapRequestSerializer:_c,wrapResponseSerializer:_c,wrapErrorSerializer:_c,req:Io,res:Io,err:g_};function l_(s,t){return Array.isArray(s)?s.filter(function(n){return n!=="!stdSerializers.err"}):s===!0?Object.keys(t):!1}function Qr(s){s=s||{},s.browser=s.browser||{};const t=s.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const r=s.browser.write||as;s.browser.write&&(s.browser.asObject=!0);const n=s.serializers||{},a=l_(s.browser.serialize,n);let h=s.browser.serialize;Array.isArray(s.browser.serialize)&&s.browser.serialize.indexOf("!stdSerializers.err")>-1&&(h=!1);const f=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),s.enabled===!1&&(s.level="silent");const v=s.level||"info",m=Object.create(r);m.log||(m.log=cs),Object.defineProperty(m,"levelVal",{get:E}),Object.defineProperty(m,"level",{get:S,set:j});const g={transmit:t,serialize:a,asObject:s.browser.asObject,levels:f,timestamp:y_(s)};m.levels=Qr.levels,m.level=v,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=cs,m.serializers=n,m._serialize=a,m._stdErrSerialize=h,m.child=z,t&&(m._logEvent=Lc());function E(){return this.level==="silent"?1/0:this.levels.values[this.level]}function S(){return this._level}function j($){if($!=="silent"&&!this.levels.values[$])throw Error("unknown level "+$);this._level=$,_n(g,m,"error","log"),_n(g,m,"fatal","error"),_n(g,m,"warn","error"),_n(g,m,"info","log"),_n(g,m,"debug","log"),_n(g,m,"trace","log")}function z($,ie){if(!$)throw new Error("missing bindings for child Pino");ie=ie||{},a&&$.serializers&&(ie.serializers=$.serializers);const ce=ie.serializers;if(a&&ce){var ue=Object.assign({},n,ce),fe=s.browser.serialize===!0?Object.keys(ue):a;delete $.serializers,Uo([$],fe,ue,this._stdErrSerialize)}function le(ae){this._childLevel=(ae._childLevel|0)+1,this.error=bn(ae,$,"error"),this.fatal=bn(ae,$,"fatal"),this.warn=bn(ae,$,"warn"),this.info=bn(ae,$,"info"),this.debug=bn(ae,$,"debug"),this.trace=bn(ae,$,"trace"),ue&&(this.serializers=ue,this._serialize=fe),t&&(this._logEvent=Lc([].concat(ae._logEvent.bindings,$)))}return le.prototype=this,new le(this)}return m}Qr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Qr.stdSerializers=h_;Qr.stdTimeFunctions=Object.assign({},{nullTime:Mf,epochTime:qf,unixTime:v_,isoTime:m_});function _n(s,t,r,n){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?cs:a[r]?a[r]:as[r]||as[n]||cs,f_(s,t,r)}function f_(s,t,r){!s.transmit&&t[r]===cs||(t[r]=function(n){return function(){const h=s.timestamp(),f=new Array(arguments.length),v=Object.getPrototypeOf&&Object.getPrototypeOf(this)===as?as:this;for(var m=0;m<f.length;m++)f[m]=arguments[m];if(s.serialize&&!s.asObject&&Uo(f,this._serialize,this.serializers,this._stdErrSerialize),s.asObject?n.call(v,p_(this,r,f,h)):n.apply(v,f),s.transmit){const g=s.transmit.level||t.level,E=Qr.levels.values[g],S=Qr.levels.values[r];if(S<E)return;d_(this,{ts:h,methodLevel:r,methodValue:S,transmitLevel:g,transmitValue:Qr.levels.values[s.transmit.level||t.level],send:s.transmit.send,val:t.levelVal},f)}}}(t[r]))}function p_(s,t,r,n){s._serialize&&Uo(r,s._serialize,s.serializers,s._stdErrSerialize);const a=r.slice();let h=a[0];const f={};n&&(f.time=n),f.level=Qr.levels.values[t];let v=(s._childLevel|0)+1;if(v<1&&(v=1),h!==null&&typeof h=="object"){for(;v--&&typeof a[0]=="object";)Object.assign(f,a.shift());h=a.length?Nl(a.shift(),a):void 0}else typeof h=="string"&&(h=Nl(a.shift(),a));return h!==void 0&&(f.msg=h),f}function Uo(s,t,r,n){for(const a in s)if(n&&s[a]instanceof Error)s[a]=Qr.stdSerializers.err(s[a]);else if(typeof s[a]=="object"&&!Array.isArray(s[a]))for(const h in s[a])t&&t.indexOf(h)>-1&&h in r&&(s[a][h]=r[h](s[a][h]))}function bn(s,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var a=1;a<n.length;a++)n[a]=arguments[a-1];return s[r].apply(this,n)}}function d_(s,t,r){const n=t.send,a=t.ts,h=t.methodLevel,f=t.methodValue,v=t.val,m=s._logEvent.bindings;Uo(r,s._serialize||Object.keys(s.serializers),s.serializers,s._stdErrSerialize===void 0?!0:s._stdErrSerialize),s._logEvent.ts=a,s._logEvent.messages=r.filter(function(g){return m.indexOf(g)===-1}),s._logEvent.level.label=h,s._logEvent.level.value=f,n(h,s._logEvent,v),s._logEvent=Lc(m)}function Lc(s){return{ts:0,messages:[],bindings:s||[],level:{label:"",value:0}}}function g_(s){const t={type:s.constructor.name,msg:s.message,stack:s.stack};for(const r in s)t[r]===void 0&&(t[r]=s[r]);return t}function y_(s){return typeof s.timestamp=="function"?s.timestamp:s.timestamp===!1?Mf:qf}function Io(){return{}}function _c(s){return s}function cs(){}function Mf(){return!1}function qf(){return Date.now()}function v_(){return Math.round(Date.now()/1e3)}function m_(){return new Date(Date.now()).toISOString()}function w_(){function s(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return s(self)||s(window)||s(this)||{}}}var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.PINO_CUSTOM_CONTEXT_KEY=Wi.PINO_LOGGER_DEFAULTS=void 0;Wi.PINO_LOGGER_DEFAULTS={level:"info"};Wi.PINO_CUSTOM_CONTEXT_KEY="custom_context";var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.generateChildLogger=dr.formatChildLoggerContext=dr.getLoggerContext=dr.setBrowserLoggerContext=dr.getBrowserLoggerContext=dr.getDefaultLoggerOptions=void 0;const Rn=Wi;function __(s){return Object.assign(Object.assign({},s),{level:s?.level||Rn.PINO_LOGGER_DEFAULTS.level})}dr.getDefaultLoggerOptions=__;function Uf(s,t=Rn.PINO_CUSTOM_CONTEXT_KEY){return s[t]||""}dr.getBrowserLoggerContext=Uf;function zf(s,t,r=Rn.PINO_CUSTOM_CONTEXT_KEY){return s[r]=t,s}dr.setBrowserLoggerContext=zf;function Hf(s,t=Rn.PINO_CUSTOM_CONTEXT_KEY){let r="";return typeof s.bindings>"u"?r=Uf(s,t):r=s.bindings().context||"",r}dr.getLoggerContext=Hf;function kf(s,t,r=Rn.PINO_CUSTOM_CONTEXT_KEY){const n=Hf(s,r);return n.trim()?`${n}/${t}`:t}dr.formatChildLoggerContext=kf;function b_(s,t,r=Rn.PINO_CUSTOM_CONTEXT_KEY){const n=kf(s,t,r),a=s.child({context:n});return zf(a,n,r)}dr.generateChildLogger=b_;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.pino=void 0;const t=jf.exports,r=t.__importDefault(u_);Object.defineProperty(s,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Wi,s),t.__exportStar(dr,s)})($e);class E_ extends Yi{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class I_ extends Yi{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class x_{constructor(t,r){this.logger=t,this.core=r}}class P_ extends Yi{constructor(t,r){super(),this.relayer=t,this.logger=r}}class S_ extends Yi{constructor(t){super()}}class O_{constructor(t,r,n,a){this.core=t,this.logger=r,this.name=n}}class A_ extends Yi{constructor(t,r){super(),this.relayer=t,this.logger=r}}class C_ extends Yi{constructor(t,r){super(),this.core=t,this.logger=r}}class T_{constructor(t,r){this.projectId=t,this.logger=r}}class R_{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class N_{constructor(t){this.client=t}}var nu={},Kf={};(function(s){Object.defineProperty(s,"__esModule",{value:!0});var t=Jm,r=_f;s.DIGEST_LENGTH=64,s.BLOCK_SIZE=128;var n=function(){function v(){this.digestLength=s.DIGEST_LENGTH,this.blockSize=s.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},v.prototype.update=function(m,g){if(g===void 0&&(g=m.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var E=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<s.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=m[E++],g--;this._bufferLength===this.blockSize&&(h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(E=h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,m,E,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=m[E++],g--;return this},v.prototype.finish=function(m){if(!this._finished){var g=this._bytesHashed,E=this._bufferLength,S=g/536870912|0,j=g<<3,z=g%128<112?128:256;this._buffer[E]=128;for(var $=E+1;$<z-8;$++)this._buffer[$]=0;t.writeUint32BE(S,this._buffer,z-8),t.writeUint32BE(j,this._buffer,z-4),h(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,z),this._finished=!0}for(var $=0;$<this.digestLength/8;$++)t.writeUint32BE(this._stateHi[$],m,$*8),t.writeUint32BE(this._stateLo[$],m,$*8+4);return this},v.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(m){return this._stateHi.set(m.stateHi),this._stateLo.set(m.stateLo),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(m){r.wipe(m.stateHi),r.wipe(m.stateLo),m.buffer&&r.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},v}();s.SHA512=n;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function h(v,m,g,E,S,j,z){for(var $=g[0],ie=g[1],ce=g[2],ue=g[3],fe=g[4],le=g[5],ae=g[6],ye=g[7],ve=E[0],re=E[1],Q=E[2],He=E[3],b=E[4],O=E[5],A=E[6],q=E[7],x,_,G,X,W,D,V,J;z>=128;){for(var he=0;he<16;he++){var Ae=8*he+j;v[he]=t.readUint32BE(S,Ae),m[he]=t.readUint32BE(S,Ae+4)}for(var he=0;he<80;he++){var Jt=$,Ie=ie,$r=ce,M=ue,L=fe,N=le,u=ae,P=ye,ne=ve,me=re,xe=Q,De=He,Le=b,Ce=O,xt=A,mt=q;if(x=ye,_=q,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=(fe>>>14|b<<32-14)^(fe>>>18|b<<32-18)^(b>>>41-32|fe<<32-(41-32)),_=(b>>>14|fe<<32-14)^(b>>>18|fe<<32-18)^(fe>>>41-32|b<<32-(41-32)),W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,x=fe&le^~fe&ae,_=b&O^~b&A,W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,x=a[he*2],_=a[he*2+1],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,x=v[he%16],_=m[he%16],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,G=V&65535|J<<16,X=W&65535|D<<16,x=G,_=X,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=($>>>28|ve<<32-28)^(ve>>>34-32|$<<32-(34-32))^(ve>>>39-32|$<<32-(39-32)),_=(ve>>>28|$<<32-28)^($>>>34-32|ve<<32-(34-32))^($>>>39-32|ve<<32-(39-32)),W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,x=$&ie^$&ce^ie&ce,_=ve&re^ve&Q^re&Q,W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,P=V&65535|J<<16,mt=W&65535|D<<16,x=M,_=De,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=G,_=X,W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,M=V&65535|J<<16,De=W&65535|D<<16,ie=Jt,ce=Ie,ue=$r,fe=M,le=L,ae=N,ye=u,$=P,re=ne,Q=me,He=xe,b=De,O=Le,A=Ce,q=xt,ve=mt,he%16===15)for(var Ae=0;Ae<16;Ae++)x=v[Ae],_=m[Ae],W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=v[(Ae+9)%16],_=m[(Ae+9)%16],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,G=v[(Ae+1)%16],X=m[(Ae+1)%16],x=(G>>>1|X<<32-1)^(G>>>8|X<<32-8)^G>>>7,_=(X>>>1|G<<32-1)^(X>>>8|G<<32-8)^(X>>>7|G<<32-7),W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,G=v[(Ae+14)%16],X=m[(Ae+14)%16],x=(G>>>19|X<<32-19)^(X>>>61-32|G<<32-(61-32))^G>>>6,_=(X>>>19|G<<32-19)^(G>>>61-32|X<<32-(61-32))^(X>>>6|G<<32-6),W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,v[Ae]=V&65535|J<<16,m[Ae]=W&65535|D<<16}x=$,_=ve,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[0],_=E[0],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[0]=$=V&65535|J<<16,E[0]=ve=W&65535|D<<16,x=ie,_=re,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[1],_=E[1],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[1]=ie=V&65535|J<<16,E[1]=re=W&65535|D<<16,x=ce,_=Q,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[2],_=E[2],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[2]=ce=V&65535|J<<16,E[2]=Q=W&65535|D<<16,x=ue,_=He,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[3],_=E[3],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[3]=ue=V&65535|J<<16,E[3]=He=W&65535|D<<16,x=fe,_=b,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[4],_=E[4],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[4]=fe=V&65535|J<<16,E[4]=b=W&65535|D<<16,x=le,_=O,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[5],_=E[5],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[5]=le=V&65535|J<<16,E[5]=O=W&65535|D<<16,x=ae,_=A,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[6],_=E[6],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[6]=ae=V&65535|J<<16,E[6]=A=W&65535|D<<16,x=ye,_=q,W=_&65535,D=_>>>16,V=x&65535,J=x>>>16,x=g[7],_=E[7],W+=_&65535,D+=_>>>16,V+=x&65535,J+=x>>>16,D+=W>>>16,V+=D>>>16,J+=V>>>16,g[7]=ye=V&65535|J<<16,E[7]=q=W&65535|D<<16,j+=128,z-=128}return j}function f(v){var m=new n;m.update(v);var g=m.digest();return m.clean(),g}s.hash=f})(Kf);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.convertSecretKeyToX25519=s.convertPublicKeyToX25519=s.verify=s.sign=s.extractPublicKeyFromSecretKey=s.generateKeyPair=s.generateKeyPairFromSeed=s.SEED_LENGTH=s.SECRET_KEY_LENGTH=s.PUBLIC_KEY_LENGTH=s.SIGNATURE_LENGTH=void 0;const t=Lo,r=Kf,n=_f;s.SIGNATURE_LENGTH=64,s.PUBLIC_KEY_LENGTH=32,s.SECRET_KEY_LENGTH=64,s.SEED_LENGTH=32;function a(M){const L=new Float64Array(16);if(M)for(let N=0;N<M.length;N++)L[N]=M[N];return L}const h=new Uint8Array(32);h[0]=9;const f=a(),v=a([1]),m=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),E=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),j=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function z(M,L){for(let N=0;N<16;N++)M[N]=L[N]|0}function $(M){let L=1;for(let N=0;N<16;N++){let u=M[N]+L+65535;L=Math.floor(u/65536),M[N]=u-L*65536}M[0]+=L-1+37*(L-1)}function ie(M,L,N){const u=~(N-1);for(let P=0;P<16;P++){const ne=u&(M[P]^L[P]);M[P]^=ne,L[P]^=ne}}function ce(M,L){const N=a(),u=a();for(let P=0;P<16;P++)u[P]=L[P];$(u),$(u),$(u);for(let P=0;P<2;P++){N[0]=u[0]-65517;for(let me=1;me<15;me++)N[me]=u[me]-65535-(N[me-1]>>16&1),N[me-1]&=65535;N[15]=u[15]-32767-(N[14]>>16&1);const ne=N[15]>>16&1;N[14]&=65535,ie(u,N,1-ne)}for(let P=0;P<16;P++)M[2*P]=u[P]&255,M[2*P+1]=u[P]>>8}function ue(M,L){let N=0;for(let u=0;u<32;u++)N|=M[u]^L[u];return(1&N-1>>>8)-1}function fe(M,L){const N=new Uint8Array(32),u=new Uint8Array(32);return ce(N,M),ce(u,L),ue(N,u)}function le(M){const L=new Uint8Array(32);return ce(L,M),L[0]&1}function ae(M,L){for(let N=0;N<16;N++)M[N]=L[2*N]+(L[2*N+1]<<8);M[15]&=32767}function ye(M,L,N){for(let u=0;u<16;u++)M[u]=L[u]+N[u]}function ve(M,L,N){for(let u=0;u<16;u++)M[u]=L[u]-N[u]}function re(M,L,N){let u,P,ne=0,me=0,xe=0,De=0,Le=0,Ce=0,xt=0,mt=0,ot=0,Me=0,Ye=0,Ze=0,at=0,ke=0,Xe=0,Fe=0,Ve=0,ht=0,Ue=0,Pt=0,Dt=0,Ht=0,kt=0,jt=0,Qt=0,sr=0,kr=0,Yt=0,Zr=0,gi=0,Ni=0,lt=N[0],rt=N[1],ft=N[2],pt=N[3],ct=N[4],it=N[5],St=N[6],Ot=N[7],dt=N[8],At=N[9],gt=N[10],wt=N[11],yt=N[12],Qe=N[13],Ct=N[14],Tt=N[15];u=L[0],ne+=u*lt,me+=u*rt,xe+=u*ft,De+=u*pt,Le+=u*ct,Ce+=u*it,xt+=u*St,mt+=u*Ot,ot+=u*dt,Me+=u*At,Ye+=u*gt,Ze+=u*wt,at+=u*yt,ke+=u*Qe,Xe+=u*Ct,Fe+=u*Tt,u=L[1],me+=u*lt,xe+=u*rt,De+=u*ft,Le+=u*pt,Ce+=u*ct,xt+=u*it,mt+=u*St,ot+=u*Ot,Me+=u*dt,Ye+=u*At,Ze+=u*gt,at+=u*wt,ke+=u*yt,Xe+=u*Qe,Fe+=u*Ct,Ve+=u*Tt,u=L[2],xe+=u*lt,De+=u*rt,Le+=u*ft,Ce+=u*pt,xt+=u*ct,mt+=u*it,ot+=u*St,Me+=u*Ot,Ye+=u*dt,Ze+=u*At,at+=u*gt,ke+=u*wt,Xe+=u*yt,Fe+=u*Qe,Ve+=u*Ct,ht+=u*Tt,u=L[3],De+=u*lt,Le+=u*rt,Ce+=u*ft,xt+=u*pt,mt+=u*ct,ot+=u*it,Me+=u*St,Ye+=u*Ot,Ze+=u*dt,at+=u*At,ke+=u*gt,Xe+=u*wt,Fe+=u*yt,Ve+=u*Qe,ht+=u*Ct,Ue+=u*Tt,u=L[4],Le+=u*lt,Ce+=u*rt,xt+=u*ft,mt+=u*pt,ot+=u*ct,Me+=u*it,Ye+=u*St,Ze+=u*Ot,at+=u*dt,ke+=u*At,Xe+=u*gt,Fe+=u*wt,Ve+=u*yt,ht+=u*Qe,Ue+=u*Ct,Pt+=u*Tt,u=L[5],Ce+=u*lt,xt+=u*rt,mt+=u*ft,ot+=u*pt,Me+=u*ct,Ye+=u*it,Ze+=u*St,at+=u*Ot,ke+=u*dt,Xe+=u*At,Fe+=u*gt,Ve+=u*wt,ht+=u*yt,Ue+=u*Qe,Pt+=u*Ct,Dt+=u*Tt,u=L[6],xt+=u*lt,mt+=u*rt,ot+=u*ft,Me+=u*pt,Ye+=u*ct,Ze+=u*it,at+=u*St,ke+=u*Ot,Xe+=u*dt,Fe+=u*At,Ve+=u*gt,ht+=u*wt,Ue+=u*yt,Pt+=u*Qe,Dt+=u*Ct,Ht+=u*Tt,u=L[7],mt+=u*lt,ot+=u*rt,Me+=u*ft,Ye+=u*pt,Ze+=u*ct,at+=u*it,ke+=u*St,Xe+=u*Ot,Fe+=u*dt,Ve+=u*At,ht+=u*gt,Ue+=u*wt,Pt+=u*yt,Dt+=u*Qe,Ht+=u*Ct,kt+=u*Tt,u=L[8],ot+=u*lt,Me+=u*rt,Ye+=u*ft,Ze+=u*pt,at+=u*ct,ke+=u*it,Xe+=u*St,Fe+=u*Ot,Ve+=u*dt,ht+=u*At,Ue+=u*gt,Pt+=u*wt,Dt+=u*yt,Ht+=u*Qe,kt+=u*Ct,jt+=u*Tt,u=L[9],Me+=u*lt,Ye+=u*rt,Ze+=u*ft,at+=u*pt,ke+=u*ct,Xe+=u*it,Fe+=u*St,Ve+=u*Ot,ht+=u*dt,Ue+=u*At,Pt+=u*gt,Dt+=u*wt,Ht+=u*yt,kt+=u*Qe,jt+=u*Ct,Qt+=u*Tt,u=L[10],Ye+=u*lt,Ze+=u*rt,at+=u*ft,ke+=u*pt,Xe+=u*ct,Fe+=u*it,Ve+=u*St,ht+=u*Ot,Ue+=u*dt,Pt+=u*At,Dt+=u*gt,Ht+=u*wt,kt+=u*yt,jt+=u*Qe,Qt+=u*Ct,sr+=u*Tt,u=L[11],Ze+=u*lt,at+=u*rt,ke+=u*ft,Xe+=u*pt,Fe+=u*ct,Ve+=u*it,ht+=u*St,Ue+=u*Ot,Pt+=u*dt,Dt+=u*At,Ht+=u*gt,kt+=u*wt,jt+=u*yt,Qt+=u*Qe,sr+=u*Ct,kr+=u*Tt,u=L[12],at+=u*lt,ke+=u*rt,Xe+=u*ft,Fe+=u*pt,Ve+=u*ct,ht+=u*it,Ue+=u*St,Pt+=u*Ot,Dt+=u*dt,Ht+=u*At,kt+=u*gt,jt+=u*wt,Qt+=u*yt,sr+=u*Qe,kr+=u*Ct,Yt+=u*Tt,u=L[13],ke+=u*lt,Xe+=u*rt,Fe+=u*ft,Ve+=u*pt,ht+=u*ct,Ue+=u*it,Pt+=u*St,Dt+=u*Ot,Ht+=u*dt,kt+=u*At,jt+=u*gt,Qt+=u*wt,sr+=u*yt,kr+=u*Qe,Yt+=u*Ct,Zr+=u*Tt,u=L[14],Xe+=u*lt,Fe+=u*rt,Ve+=u*ft,ht+=u*pt,Ue+=u*ct,Pt+=u*it,Dt+=u*St,Ht+=u*Ot,kt+=u*dt,jt+=u*At,Qt+=u*gt,sr+=u*wt,kr+=u*yt,Yt+=u*Qe,Zr+=u*Ct,gi+=u*Tt,u=L[15],Fe+=u*lt,Ve+=u*rt,ht+=u*ft,Ue+=u*pt,Pt+=u*ct,Dt+=u*it,Ht+=u*St,kt+=u*Ot,jt+=u*dt,Qt+=u*At,sr+=u*gt,kr+=u*wt,Yt+=u*yt,Zr+=u*Qe,gi+=u*Ct,Ni+=u*Tt,ne+=38*Ve,me+=38*ht,xe+=38*Ue,De+=38*Pt,Le+=38*Dt,Ce+=38*Ht,xt+=38*kt,mt+=38*jt,ot+=38*Qt,Me+=38*sr,Ye+=38*kr,Ze+=38*Yt,at+=38*Zr,ke+=38*gi,Xe+=38*Ni,P=1,u=ne+P+65535,P=Math.floor(u/65536),ne=u-P*65536,u=me+P+65535,P=Math.floor(u/65536),me=u-P*65536,u=xe+P+65535,P=Math.floor(u/65536),xe=u-P*65536,u=De+P+65535,P=Math.floor(u/65536),De=u-P*65536,u=Le+P+65535,P=Math.floor(u/65536),Le=u-P*65536,u=Ce+P+65535,P=Math.floor(u/65536),Ce=u-P*65536,u=xt+P+65535,P=Math.floor(u/65536),xt=u-P*65536,u=mt+P+65535,P=Math.floor(u/65536),mt=u-P*65536,u=ot+P+65535,P=Math.floor(u/65536),ot=u-P*65536,u=Me+P+65535,P=Math.floor(u/65536),Me=u-P*65536,u=Ye+P+65535,P=Math.floor(u/65536),Ye=u-P*65536,u=Ze+P+65535,P=Math.floor(u/65536),Ze=u-P*65536,u=at+P+65535,P=Math.floor(u/65536),at=u-P*65536,u=ke+P+65535,P=Math.floor(u/65536),ke=u-P*65536,u=Xe+P+65535,P=Math.floor(u/65536),Xe=u-P*65536,u=Fe+P+65535,P=Math.floor(u/65536),Fe=u-P*65536,ne+=P-1+37*(P-1),P=1,u=ne+P+65535,P=Math.floor(u/65536),ne=u-P*65536,u=me+P+65535,P=Math.floor(u/65536),me=u-P*65536,u=xe+P+65535,P=Math.floor(u/65536),xe=u-P*65536,u=De+P+65535,P=Math.floor(u/65536),De=u-P*65536,u=Le+P+65535,P=Math.floor(u/65536),Le=u-P*65536,u=Ce+P+65535,P=Math.floor(u/65536),Ce=u-P*65536,u=xt+P+65535,P=Math.floor(u/65536),xt=u-P*65536,u=mt+P+65535,P=Math.floor(u/65536),mt=u-P*65536,u=ot+P+65535,P=Math.floor(u/65536),ot=u-P*65536,u=Me+P+65535,P=Math.floor(u/65536),Me=u-P*65536,u=Ye+P+65535,P=Math.floor(u/65536),Ye=u-P*65536,u=Ze+P+65535,P=Math.floor(u/65536),Ze=u-P*65536,u=at+P+65535,P=Math.floor(u/65536),at=u-P*65536,u=ke+P+65535,P=Math.floor(u/65536),ke=u-P*65536,u=Xe+P+65535,P=Math.floor(u/65536),Xe=u-P*65536,u=Fe+P+65535,P=Math.floor(u/65536),Fe=u-P*65536,ne+=P-1+37*(P-1),M[0]=ne,M[1]=me,M[2]=xe,M[3]=De,M[4]=Le,M[5]=Ce,M[6]=xt,M[7]=mt,M[8]=ot,M[9]=Me,M[10]=Ye,M[11]=Ze,M[12]=at,M[13]=ke,M[14]=Xe,M[15]=Fe}function Q(M,L){re(M,L,L)}function He(M,L){const N=a();let u;for(u=0;u<16;u++)N[u]=L[u];for(u=253;u>=0;u--)Q(N,N),u!==2&&u!==4&&re(N,N,L);for(u=0;u<16;u++)M[u]=N[u]}function b(M,L){const N=a();let u;for(u=0;u<16;u++)N[u]=L[u];for(u=250;u>=0;u--)Q(N,N),u!==1&&re(N,N,L);for(u=0;u<16;u++)M[u]=N[u]}function O(M,L){const N=a(),u=a(),P=a(),ne=a(),me=a(),xe=a(),De=a(),Le=a(),Ce=a();ve(N,M[1],M[0]),ve(Ce,L[1],L[0]),re(N,N,Ce),ye(u,M[0],M[1]),ye(Ce,L[0],L[1]),re(u,u,Ce),re(P,M[3],L[3]),re(P,P,g),re(ne,M[2],L[2]),ye(ne,ne,ne),ve(me,u,N),ve(xe,ne,P),ye(De,ne,P),ye(Le,u,N),re(M[0],me,xe),re(M[1],Le,De),re(M[2],De,xe),re(M[3],me,Le)}function A(M,L,N){for(let u=0;u<4;u++)ie(M[u],L[u],N)}function q(M,L){const N=a(),u=a(),P=a();He(P,L[2]),re(N,L[0],P),re(u,L[1],P),ce(M,u),M[31]^=le(N)<<7}function x(M,L,N){z(M[0],f),z(M[1],v),z(M[2],v),z(M[3],f);for(let u=255;u>=0;--u){const P=N[u/8|0]>>(u&7)&1;A(M,L,P),O(L,M),O(M,M),A(M,L,P)}}function _(M,L){const N=[a(),a(),a(),a()];z(N[0],E),z(N[1],S),z(N[2],v),re(N[3],E,S),x(M,N,L)}function G(M){if(M.length!==s.SEED_LENGTH)throw new Error(`ed25519: seed must be ${s.SEED_LENGTH} bytes`);const L=(0,r.hash)(M);L[0]&=248,L[31]&=127,L[31]|=64;const N=new Uint8Array(32),u=[a(),a(),a(),a()];_(u,L),q(N,u);const P=new Uint8Array(64);return P.set(M),P.set(N,32),{publicKey:N,secretKey:P}}s.generateKeyPairFromSeed=G;function X(M){const L=(0,t.randomBytes)(32,M),N=G(L);return(0,n.wipe)(L),N}s.generateKeyPair=X;function W(M){if(M.length!==s.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${s.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(M.subarray(32))}s.extractPublicKeyFromSecretKey=W;const D=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function V(M,L){let N,u,P,ne;for(u=63;u>=32;--u){for(N=0,P=u-32,ne=u-12;P<ne;++P)L[P]+=N-16*L[u]*D[P-(u-32)],N=Math.floor((L[P]+128)/256),L[P]-=N*256;L[P]+=N,L[u]=0}for(N=0,P=0;P<32;P++)L[P]+=N-(L[31]>>4)*D[P],N=L[P]>>8,L[P]&=255;for(P=0;P<32;P++)L[P]-=N*D[P];for(u=0;u<32;u++)L[u+1]+=L[u]>>8,M[u]=L[u]&255}function J(M){const L=new Float64Array(64);for(let N=0;N<64;N++)L[N]=M[N];for(let N=0;N<64;N++)M[N]=0;V(M,L)}function he(M,L){const N=new Float64Array(64),u=[a(),a(),a(),a()],P=(0,r.hash)(M.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const ne=new Uint8Array(64);ne.set(P.subarray(32),32);const me=new r.SHA512;me.update(ne.subarray(32)),me.update(L);const xe=me.digest();me.clean(),J(xe),_(u,xe),q(ne,u),me.reset(),me.update(ne.subarray(0,32)),me.update(M.subarray(32)),me.update(L);const De=me.digest();J(De);for(let Le=0;Le<32;Le++)N[Le]=xe[Le];for(let Le=0;Le<32;Le++)for(let Ce=0;Ce<32;Ce++)N[Le+Ce]+=De[Le]*P[Ce];return V(ne.subarray(32),N),ne}s.sign=he;function Ae(M,L){const N=a(),u=a(),P=a(),ne=a(),me=a(),xe=a(),De=a();return z(M[2],v),ae(M[1],L),Q(P,M[1]),re(ne,P,m),ve(P,P,M[2]),ye(ne,M[2],ne),Q(me,ne),Q(xe,me),re(De,xe,me),re(N,De,P),re(N,N,ne),b(N,N),re(N,N,P),re(N,N,ne),re(N,N,ne),re(M[0],N,ne),Q(u,M[0]),re(u,u,ne),fe(u,P)&&re(M[0],M[0],j),Q(u,M[0]),re(u,u,ne),fe(u,P)?-1:(le(M[0])===L[31]>>7&&ve(M[0],f,M[0]),re(M[3],M[0],M[1]),0)}function Jt(M,L,N){const u=new Uint8Array(32),P=[a(),a(),a(),a()],ne=[a(),a(),a(),a()];if(N.length!==s.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${s.SIGNATURE_LENGTH} bytes`);if(Ae(ne,M))return!1;const me=new r.SHA512;me.update(N.subarray(0,32)),me.update(M),me.update(L);const xe=me.digest();return J(xe),x(P,ne,xe),_(ne,N.subarray(32)),O(P,ne),q(u,P),!ue(N,u)}s.verify=Jt;function Ie(M){let L=[a(),a(),a(),a()];if(Ae(L,M))throw new Error("Ed25519: invalid public key");let N=a(),u=a(),P=L[1];ye(N,v,P),ve(u,v,P),He(u,u),re(N,N,u);let ne=new Uint8Array(32);return ce(ne,N),ne}s.convertPublicKeyToX25519=Ie;function $r(M){const L=(0,r.hash)(M.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const N=new Uint8Array(L.subarray(0,32));return(0,n.wipe)(L),N}s.convertSecretKeyToX25519=$r})(nu);const $_="EdDSA",D_="JWT",Vf=".",Bf="base64url",F_="utf8",L_="utf8",j_=":",M_="did",q_="key",$l="base58btc",U_="z",z_="K36",H_=32;function Do(s){return nr(gr(Gi(s),F_),Bf)}function Gf(s){const t=gr(z_,$l),r=U_+nr(Tc([t,s]),$l);return[M_,q_,r].join(j_)}function k_(s){return nr(s,Bf)}function K_(s){return gr([Do(s.header),Do(s.payload)].join(Vf),L_)}function V_(s){return[Do(s.header),Do(s.payload),k_(s.signature)].join(Vf)}function Dl(s=Lo.randomBytes(H_)){return nu.generateKeyPairFromSeed(s)}async function B_(s,t,r,n,a=oe.fromMiliseconds(Date.now())){const h={alg:$_,typ:D_},f=Gf(n.publicKey),v=a+r,m={iss:f,sub:s,aud:t,iat:a,exp:v},g=K_({header:h,payload:m}),E=nu.sign(n.secretKey,g);return V_({header:h,payload:m,signature:E})}const G_=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),W_=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Fl=s=>s.split("?")[0],Ll=10,J_=G_();class Q_{constructor(t){if(this.url=t,this.events=new Hr.exports.EventEmitter,this.registering=!1,!ll(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Gi(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!ll(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,a)=>{this.events.once("register_error",h=>{this.resetMaxListeners(),a(h)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,n)=>{const a=new URLSearchParams(t).get("origin"),h=Zm.isReactNative()?{headers:{origin:a}}:{rejectUnauthorized:!Xm(t)},f=new J_(t,[],h);W_()?f.onerror=v=>{const m=v;n(this.emitError(m.error))}:f.on("error",v=>{n(this.emitError(v))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?us(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),a=n.message||n.toString(),h=jo(t,a);this.events.emit("payload",h)}parseError(t,r=this.url){return bf(t,Fl(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ll&&this.events.setMaxListeners(Ll)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${Fl(this.url)}`));return this.events.emit("register_error",r),r}}var jc={exports:{}};(function(s,t){var r=200,n="__lodash_hash_undefined__",a=1,h=2,f=9007199254740991,v="[object Arguments]",m="[object Array]",g="[object AsyncFunction]",E="[object Boolean]",S="[object Date]",j="[object Error]",z="[object Function]",$="[object GeneratorFunction]",ie="[object Map]",ce="[object Number]",ue="[object Null]",fe="[object Object]",le="[object Promise]",ae="[object Proxy]",ye="[object RegExp]",ve="[object Set]",re="[object String]",Q="[object Symbol]",He="[object Undefined]",b="[object WeakMap]",O="[object ArrayBuffer]",A="[object DataView]",q="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",G="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",D="[object Uint8ClampedArray]",V="[object Uint16Array]",J="[object Uint32Array]",he=/[\\^$.*+?()[\]{}|]/g,Ae=/^\[object .+?Constructor\]$/,Jt=/^(?:0|[1-9]\d*)$/,Ie={};Ie[q]=Ie[x]=Ie[_]=Ie[G]=Ie[X]=Ie[W]=Ie[D]=Ie[V]=Ie[J]=!0,Ie[v]=Ie[m]=Ie[O]=Ie[E]=Ie[A]=Ie[S]=Ie[j]=Ie[z]=Ie[ie]=Ie[ce]=Ie[fe]=Ie[ye]=Ie[ve]=Ie[re]=Ie[b]=!1;var $r=typeof Ai=="object"&&Ai&&Ai.Object===Object&&Ai,M=typeof self=="object"&&self&&self.Object===Object&&self,L=$r||M||Function("return this")(),N=t&&!t.nodeType&&t,u=N&&!0&&s&&!s.nodeType&&s,P=u&&u.exports===N,ne=P&&$r.process,me=function(){try{return ne&&ne.binding&&ne.binding("util")}catch{}}(),xe=me&&me.isTypedArray;function De(y,C){for(var K=-1,ee=y==null?0:y.length,Ge=0,_e=[];++K<ee;){var et=y[K];C(et,K,y)&&(_e[Ge++]=et)}return _e}function Le(y,C){for(var K=-1,ee=C.length,Ge=y.length;++K<ee;)y[Ge+K]=C[K];return y}function Ce(y,C){for(var K=-1,ee=y==null?0:y.length;++K<ee;)if(C(y[K],K,y))return!0;return!1}function xt(y,C){for(var K=-1,ee=Array(y);++K<y;)ee[K]=C(K);return ee}function mt(y){return function(C){return y(C)}}function ot(y,C){return y.has(C)}function Me(y,C){return y?.[C]}function Ye(y){var C=-1,K=Array(y.size);return y.forEach(function(ee,Ge){K[++C]=[Ge,ee]}),K}function Ze(y,C){return function(K){return y(C(K))}}function at(y){var C=-1,K=Array(y.size);return y.forEach(function(ee){K[++C]=ee}),K}var ke=Array.prototype,Xe=Function.prototype,Fe=Object.prototype,Ve=L["__core-js_shared__"],ht=Xe.toString,Ue=Fe.hasOwnProperty,Pt=function(){var y=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Dt=Fe.toString,Ht=RegExp("^"+ht.call(Ue).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=P?L.Buffer:void 0,jt=L.Symbol,Qt=L.Uint8Array,sr=Fe.propertyIsEnumerable,kr=ke.splice,Yt=jt?jt.toStringTag:void 0,Zr=Object.getOwnPropertySymbols,gi=kt?kt.isBuffer:void 0,Ni=Ze(Object.keys,Object),lt=yr(L,"DataView"),rt=yr(L,"Map"),ft=yr(L,"Promise"),pt=yr(L,"Set"),ct=yr(L,"WeakMap"),it=yr(Object,"create"),St=ei(lt),Ot=ei(rt),dt=ei(ft),At=ei(pt),gt=ei(ct),wt=jt?jt.prototype:void 0,yt=wt?wt.valueOf:void 0;function Qe(y){var C=-1,K=y==null?0:y.length;for(this.clear();++C<K;){var ee=y[C];this.set(ee[0],ee[1])}}function Ct(){this.__data__=it?it(null):{},this.size=0}function Tt(y){var C=this.has(y)&&delete this.__data__[y];return this.size-=C?1:0,C}function ko(y){var C=this.__data__;if(it){var K=C[y];return K===n?void 0:K}return Ue.call(C,y)?C[y]:void 0}function Ko(y){var C=this.__data__;return it?C[y]!==void 0:Ue.call(C,y)}function Vo(y,C){var K=this.__data__;return this.size+=this.has(y)?0:1,K[y]=it&&C===void 0?n:C,this}Qe.prototype.clear=Ct,Qe.prototype.delete=Tt,Qe.prototype.get=ko,Qe.prototype.has=Ko,Qe.prototype.set=Vo;function Ir(y){var C=-1,K=y==null?0:y.length;for(this.clear();++C<K;){var ee=y[C];this.set(ee[0],ee[1])}}function Bo(){this.__data__=[],this.size=0}function Go(y){var C=this.__data__,K=$i(C,y);if(K<0)return!1;var ee=C.length-1;return K==ee?C.pop():kr.call(C,K,1),--this.size,!0}function Wo(y){var C=this.__data__,K=$i(C,y);return K<0?void 0:C[K][1]}function Jo(y){return $i(this.__data__,y)>-1}function Qo(y,C){var K=this.__data__,ee=$i(K,y);return ee<0?(++this.size,K.push([y,C])):K[ee][1]=C,this}Ir.prototype.clear=Bo,Ir.prototype.delete=Go,Ir.prototype.get=Wo,Ir.prototype.has=Jo,Ir.prototype.set=Qo;function Xr(y){var C=-1,K=y==null?0:y.length;for(this.clear();++C<K;){var ee=y[C];this.set(ee[0],ee[1])}}function Xi(){this.size=0,this.__data__={hash:new Qe,map:new(rt||Ir),string:new Qe}}function Yo(y){var C=yi(this,y).delete(y);return this.size-=C?1:0,C}function en(y){return yi(this,y).get(y)}function Zo(y){return yi(this,y).has(y)}function Xo(y,C){var K=yi(this,y),ee=K.size;return K.set(y,C),this.size+=K.size==ee?0:1,this}Xr.prototype.clear=Xi,Xr.prototype.delete=Yo,Xr.prototype.get=en,Xr.prototype.has=Zo,Xr.prototype.set=Xo;function tn(y){var C=-1,K=y==null?0:y.length;for(this.__data__=new Xr;++C<K;)this.add(y[C])}function gs(y){return this.__data__.set(y,n),this}function ys(y){return this.__data__.has(y)}tn.prototype.add=tn.prototype.push=gs,tn.prototype.has=ys;function Dr(y){var C=this.__data__=new Ir(y);this.size=C.size}function ea(){this.__data__=new Ir,this.size=0}function ta(y){var C=this.__data__,K=C.delete(y);return this.size=C.size,K}function ra(y){return this.__data__.get(y)}function ia(y){return this.__data__.has(y)}function vs(y,C){var K=this.__data__;if(K instanceof Ir){var ee=K.__data__;if(!rt||ee.length<r-1)return ee.push([y,C]),this.size=++K.size,this;K=this.__data__=new Xr(ee)}return K.set(y,C),this.size=K.size,this}Dr.prototype.clear=ea,Dr.prototype.delete=ta,Dr.prototype.get=ra,Dr.prototype.has=ia,Dr.prototype.set=vs;function ms(y,C){var K=sn(y),ee=!K&&Ts(y),Ge=!K&&!ee&&Dn(y),_e=!K&&!ee&&!Ge&&$s(y),et=K||ee||Ge||_e,Rt=et?xt(y.length,String):[],Re=Rt.length;for(var We in y)(C||Ue.call(y,We))&&!(et&&(We=="length"||Ge&&(We=="offset"||We=="parent")||_e&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Ps(We,Re)))&&Rt.push(We);return Rt}function $i(y,C){for(var K=y.length;K--;)if(Cs(y[K][0],C))return K;return-1}function Nn(y,C,K){var ee=C(y);return sn(y)?ee:Le(ee,K(y))}function Di(y){return y==null?y===void 0?He:ue:Yt&&Yt in Object(y)?Is(y):oa(y)}function $n(y){return Li(y)&&Di(y)==v}function Fi(y,C,K,ee,Ge){return y===C?!0:y==null||C==null||!Li(y)&&!Li(C)?y!==y&&C!==C:ws(y,C,K,ee,Fi,Ge)}function ws(y,C,K,ee,Ge,_e){var et=sn(y),Rt=sn(C),Re=et?m:Kr(y),We=Rt?m:Kr(C);Re=Re==v?fe:Re,We=We==v?fe:We;var _t=Re==fe,or=We==fe,Nt=Re==We;if(Nt&&Dn(y)){if(!Dn(C))return!1;et=!0,_t=!1}if(Nt&&!_t)return _e||(_e=new Dr),et||$s(y)?rn(y,C,K,ee,Ge,_e):sa(y,C,Re,K,ee,Ge,_e);if(!(K&a)){var tt=_t&&Ue.call(y,"__wrapped__"),Zt=or&&Ue.call(C,"__wrapped__");if(tt||Zt){var Fr=tt?y.value():y,xr=Zt?C.value():C;return _e||(_e=new Dr),Ge(Fr,xr,K,ee,_e)}}return Nt?(_e||(_e=new Dr),Es(y,C,K,ee,Ge,_e)):!1}function na(y){if(!Ns(y)||Os(y))return!1;var C=on(y)?Ht:Ae;return C.test(ei(y))}function _s(y){return Li(y)&&Rs(y.length)&&!!Ie[Di(y)]}function bs(y){if(!As(y))return Ni(y);var C=[];for(var K in Object(y))Ue.call(y,K)&&K!="constructor"&&C.push(K);return C}function rn(y,C,K,ee,Ge,_e){var et=K&a,Rt=y.length,Re=C.length;if(Rt!=Re&&!(et&&Re>Rt))return!1;var We=_e.get(y);if(We&&_e.get(C))return We==C;var _t=-1,or=!0,Nt=K&h?new tn:void 0;for(_e.set(y,C),_e.set(C,y);++_t<Rt;){var tt=y[_t],Zt=C[_t];if(ee)var Fr=et?ee(Zt,tt,_t,C,y,_e):ee(tt,Zt,_t,y,C,_e);if(Fr!==void 0){if(Fr)continue;or=!1;break}if(Nt){if(!Ce(C,function(xr,Vr){if(!ot(Nt,Vr)&&(tt===xr||Ge(tt,xr,K,ee,_e)))return Nt.push(Vr)})){or=!1;break}}else if(!(tt===Zt||Ge(tt,Zt,K,ee,_e))){or=!1;break}}return _e.delete(y),_e.delete(C),or}function sa(y,C,K,ee,Ge,_e,et){switch(K){case A:if(y.byteLength!=C.byteLength||y.byteOffset!=C.byteOffset)return!1;y=y.buffer,C=C.buffer;case O:return!(y.byteLength!=C.byteLength||!_e(new Qt(y),new Qt(C)));case E:case S:case ce:return Cs(+y,+C);case j:return y.name==C.name&&y.message==C.message;case ye:case re:return y==C+"";case ie:var Rt=Ye;case ve:var Re=ee&a;if(Rt||(Rt=at),y.size!=C.size&&!Re)return!1;var We=et.get(y);if(We)return We==C;ee|=h,et.set(y,C);var _t=rn(Rt(y),Rt(C),ee,Ge,_e,et);return et.delete(y),_t;case Q:if(yt)return yt.call(y)==yt.call(C)}return!1}function Es(y,C,K,ee,Ge,_e){var et=K&a,Rt=nn(y),Re=Rt.length,We=nn(C),_t=We.length;if(Re!=_t&&!et)return!1;for(var or=Re;or--;){var Nt=Rt[or];if(!(et?Nt in C:Ue.call(C,Nt)))return!1}var tt=_e.get(y);if(tt&&_e.get(C))return tt==C;var Zt=!0;_e.set(y,C),_e.set(C,y);for(var Fr=et;++or<Re;){Nt=Rt[or];var xr=y[Nt],Vr=C[Nt];if(ee)var Fn=et?ee(Vr,xr,Nt,C,y,_e):ee(xr,Vr,Nt,y,C,_e);if(!(Fn===void 0?xr===Vr||Ge(xr,Vr,K,ee,_e):Fn)){Zt=!1;break}Fr||(Fr=Nt=="constructor")}if(Zt&&!Fr){var ji=y.constructor,Mt=C.constructor;ji!=Mt&&"constructor"in y&&"constructor"in C&&!(typeof ji=="function"&&ji instanceof ji&&typeof Mt=="function"&&Mt instanceof Mt)&&(Zt=!1)}return _e.delete(y),_e.delete(C),Zt}function nn(y){return Nn(y,ua,xs)}function yi(y,C){var K=y.__data__;return Ss(C)?K[typeof C=="string"?"string":"hash"]:K.map}function yr(y,C){var K=Me(y,C);return na(K)?K:void 0}function Is(y){var C=Ue.call(y,Yt),K=y[Yt];try{y[Yt]=void 0;var ee=!0}catch{}var Ge=Dt.call(y);return ee&&(C?y[Yt]=K:delete y[Yt]),Ge}var xs=Zr?function(y){return y==null?[]:(y=Object(y),De(Zr(y),function(C){return sr.call(y,C)}))}:Be,Kr=Di;(lt&&Kr(new lt(new ArrayBuffer(1)))!=A||rt&&Kr(new rt)!=ie||ft&&Kr(ft.resolve())!=le||pt&&Kr(new pt)!=ve||ct&&Kr(new ct)!=b)&&(Kr=function(y){var C=Di(y),K=C==fe?y.constructor:void 0,ee=K?ei(K):"";if(ee)switch(ee){case St:return A;case Ot:return ie;case dt:return le;case At:return ve;case gt:return b}return C});function Ps(y,C){return C=C??f,!!C&&(typeof y=="number"||Jt.test(y))&&y>-1&&y%1==0&&y<C}function Ss(y){var C=typeof y;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?y!=="__proto__":y===null}function Os(y){return!!Pt&&Pt in y}function As(y){var C=y&&y.constructor,K=typeof C=="function"&&C.prototype||Fe;return y===K}function oa(y){return Dt.call(y)}function ei(y){if(y!=null){try{return ht.call(y)}catch{}try{return y+""}catch{}}return""}function Cs(y,C){return y===C||y!==y&&C!==C}var Ts=$n(function(){return arguments}())?$n:function(y){return Li(y)&&Ue.call(y,"callee")&&!sr.call(y,"callee")},sn=Array.isArray;function aa(y){return y!=null&&Rs(y.length)&&!on(y)}var Dn=gi||Ke;function ca(y,C){return Fi(y,C)}function on(y){if(!Ns(y))return!1;var C=Di(y);return C==z||C==$||C==g||C==ae}function Rs(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=f}function Ns(y){var C=typeof y;return y!=null&&(C=="object"||C=="function")}function Li(y){return y!=null&&typeof y=="object"}var $s=xe?mt(xe):_s;function ua(y){return aa(y)?ms(y):bs(y)}function Be(){return[]}function Ke(){return!1}s.exports=ca})(jc,jc.exports);var Y_=jc.exports;function Z_(s,t){if(s.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var a=0;a<s.length;a++){var h=s.charAt(a),f=h.charCodeAt(0);if(r[f]!==255)throw new TypeError(h+" is ambiguous");r[f]=a}var v=s.length,m=s.charAt(0),g=Math.log(v)/Math.log(256),E=Math.log(256)/Math.log(v);function S($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var ie=0,ce=0,ue=0,fe=$.length;ue!==fe&&$[ue]===0;)ue++,ie++;for(var le=(fe-ue)*E+1>>>0,ae=new Uint8Array(le);ue!==fe;){for(var ye=$[ue],ve=0,re=le-1;(ye!==0||ve<ce)&&re!==-1;re--,ve++)ye+=256*ae[re]>>>0,ae[re]=ye%v>>>0,ye=ye/v>>>0;if(ye!==0)throw new Error("Non-zero carry");ce=ve,ue++}for(var Q=le-ce;Q!==le&&ae[Q]===0;)Q++;for(var He=m.repeat(ie);Q<le;++Q)He+=s.charAt(ae[Q]);return He}function j($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var ie=0;if($[ie]!==" "){for(var ce=0,ue=0;$[ie]===m;)ce++,ie++;for(var fe=($.length-ie)*g+1>>>0,le=new Uint8Array(fe);$[ie];){var ae=r[$.charCodeAt(ie)];if(ae===255)return;for(var ye=0,ve=fe-1;(ae!==0||ye<ue)&&ve!==-1;ve--,ye++)ae+=v*le[ve]>>>0,le[ve]=ae%256>>>0,ae=ae/256>>>0;if(ae!==0)throw new Error("Non-zero carry");ue=ye,ie++}if($[ie]!==" "){for(var re=fe-ue;re!==fe&&le[re]===0;)re++;for(var Q=new Uint8Array(ce+(fe-re)),He=ce;re!==fe;)Q[He++]=le[re++];return Q}}}function z($){var ie=j($);if(ie)return ie;throw new Error(`Non-${t} character`)}return{encode:S,decodeUnsafe:j,decode:z}}var X_=Z_,eb=X_;const Wf=s=>{if(s instanceof Uint8Array&&s.constructor.name==="Uint8Array")return s;if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw new Error("Unknown type, must be binary type")},tb=s=>new TextEncoder().encode(s),rb=s=>new TextDecoder().decode(s);class ib{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class nb{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Jf(this,t)}}class sb{constructor(t){this.decoders=t}or(t){return Jf(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jf=(s,t)=>new sb({...s.decoders||{[s.prefix]:s},...t.decoders||{[t.prefix]:t}});class ob{constructor(t,r,n,a){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=a,this.encoder=new ib(t,r,n),this.decoder=new nb(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const zo=({name:s,prefix:t,encode:r,decode:n})=>new ob(s,t,r,n),ds=({prefix:s,name:t,alphabet:r})=>{const{encode:n,decode:a}=eb(r,t);return zo({prefix:s,name:t,encode:n,decode:h=>Wf(a(h))})},ab=(s,t,r,n)=>{const a={};for(let E=0;E<t.length;++E)a[t[E]]=E;let h=s.length;for(;s[h-1]==="=";)--h;const f=new Uint8Array(h*r/8|0);let v=0,m=0,g=0;for(let E=0;E<h;++E){const S=a[s[E]];if(S===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<r|S,v+=r,v>=8&&(v-=8,f[g++]=255&m>>v)}if(v>=r||255&m<<8-v)throw new SyntaxError("Unexpected end of data");return f},cb=(s,t,r)=>{const n=t[t.length-1]==="=",a=(1<<r)-1;let h="",f=0,v=0;for(let m=0;m<s.length;++m)for(v=v<<8|s[m],f+=8;f>r;)f-=r,h+=t[a&v>>f];if(f&&(h+=t[a&v<<r-f]),n)for(;h.length*r&7;)h+="=";return h},Vt=({name:s,prefix:t,bitsPerChar:r,alphabet:n})=>zo({prefix:t,name:s,encode(a){return cb(a,n,r)},decode(a){return ab(a,n,r,s)}}),ub=zo({prefix:"\0",name:"identity",encode:s=>rb(s),decode:s=>tb(s)});var hb=Object.freeze({__proto__:null,identity:ub});const lb=Vt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fb=Object.freeze({__proto__:null,base2:lb});const pb=Vt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var db=Object.freeze({__proto__:null,base8:pb});const gb=ds({prefix:"9",name:"base10",alphabet:"0123456789"});var yb=Object.freeze({__proto__:null,base10:gb});const vb=Vt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mb=Vt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var wb=Object.freeze({__proto__:null,base16:vb,base16upper:mb});const _b=Vt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bb=Vt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Eb=Vt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ib=Vt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xb=Vt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pb=Vt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Sb=Vt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ob=Vt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ab=Vt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cb=Object.freeze({__proto__:null,base32:_b,base32upper:bb,base32pad:Eb,base32padupper:Ib,base32hex:xb,base32hexupper:Pb,base32hexpad:Sb,base32hexpadupper:Ob,base32z:Ab});const Tb=ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rb=ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Nb=Object.freeze({__proto__:null,base36:Tb,base36upper:Rb});const $b=ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Db=ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fb=Object.freeze({__proto__:null,base58btc:$b,base58flickr:Db});const Lb=Vt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jb=Vt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mb=Vt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qb=Vt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ub=Object.freeze({__proto__:null,base64:Lb,base64pad:jb,base64url:Mb,base64urlpad:qb});const Qf=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),zb=Qf.reduce((s,t,r)=>(s[r]=t,s),[]),Hb=Qf.reduce((s,t,r)=>(s[t.codePointAt(0)]=r,s),[]);function kb(s){return s.reduce((t,r)=>(t+=zb[r],t),"")}function Kb(s){const t=[];for(const r of s){const n=Hb[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const Vb=zo({prefix:"\u{1F680}",name:"base256emoji",encode:kb,decode:Kb});var Bb=Object.freeze({__proto__:null,base256emoji:Vb}),Gb=Yf,jl=128,Wb=127,Jb=~Wb,Qb=Math.pow(2,31);function Yf(s,t,r){t=t||[],r=r||0;for(var n=r;s>=Qb;)t[r++]=s&255|jl,s/=128;for(;s&Jb;)t[r++]=s&255|jl,s>>>=7;return t[r]=s|0,Yf.bytes=r-n+1,t}var Yb=Mc,Zb=128,Ml=127;function Mc(s,n){var r=0,n=n||0,a=0,h=n,f,v=s.length;do{if(h>=v)throw Mc.bytes=0,new RangeError("Could not decode varint");f=s[h++],r+=a<28?(f&Ml)<<a:(f&Ml)*Math.pow(2,a),a+=7}while(f>=Zb);return Mc.bytes=h-n,r}var Xb=Math.pow(2,7),eE=Math.pow(2,14),tE=Math.pow(2,21),rE=Math.pow(2,28),iE=Math.pow(2,35),nE=Math.pow(2,42),sE=Math.pow(2,49),oE=Math.pow(2,56),aE=Math.pow(2,63),cE=function(s){return s<Xb?1:s<eE?2:s<tE?3:s<rE?4:s<iE?5:s<nE?6:s<sE?7:s<oE?8:s<aE?9:10},uE={encode:Gb,decode:Yb,encodingLength:cE},Zf=uE;const ql=(s,t,r=0)=>(Zf.encode(s,t,r),t),Ul=s=>Zf.encodingLength(s),qc=(s,t)=>{const r=t.byteLength,n=Ul(s),a=n+Ul(r),h=new Uint8Array(a+r);return ql(s,h,0),ql(r,h,n),h.set(t,a),new hE(s,r,t,h)};class hE{constructor(t,r,n,a){this.code=t,this.size=r,this.digest=n,this.bytes=a}}const Xf=({name:s,code:t,encode:r})=>new lE(s,t,r);class lE{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?qc(this.code,r):r.then(n=>qc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const ep=s=>async t=>new Uint8Array(await crypto.subtle.digest(s,t)),fE=Xf({name:"sha2-256",code:18,encode:ep("SHA-256")}),pE=Xf({name:"sha2-512",code:19,encode:ep("SHA-512")});var dE=Object.freeze({__proto__:null,sha256:fE,sha512:pE});const tp=0,gE="identity",rp=Wf,yE=s=>qc(tp,rp(s)),vE={code:tp,name:gE,encode:rp,digest:yE};var mE=Object.freeze({__proto__:null,identity:vE});new TextEncoder,new TextDecoder;const zl={...hb,...fb,...db,...yb,...wb,...Cb,...Nb,...Fb,...Ub,...Bb};({...dE,...mE});function ip(s){return globalThis.Buffer!=null?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):s}function wE(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ip(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}function np(s,t,r,n){return{name:s,prefix:t,encoder:{name:s,prefix:t,encode:r},decoder:{decode:n}}}const Hl=np("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),bc=np("ascii","a",s=>{let t="a";for(let r=0;r<s.length;r++)t+=String.fromCharCode(s[r]);return t},s=>{s=s.substring(1);const t=wE(s.length);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}),_E={utf8:Hl,"utf-8":Hl,hex:zl.base16,latin1:bc,ascii:bc,binary:bc,...zl};function bE(s,t="utf8"){const r=_E[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ip(globalThis.Buffer.from(s,"utf-8")):r.decoder.decode(`${r.prefix}${s}`)}const sp="wc",EE=2,su="core",Ci=`${sp}@2:${su}:`,IE={name:su,logger:"error"},xE={database:":memory:"},PE="crypto",kl="client_ed25519_seed",SE=oe.ONE_DAY,OE="keychain",AE="0.3",CE="messages",TE="0.3",RE=oe.SIX_HOURS,NE="publisher",op="irn",$E="error",ap="wss://relay.walletconnect.com",Kl="wss://relay.walletconnect.org",DE="relayer",Wt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},FE="_subscription",hi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},LE=oe.ONE_SECOND,jE="2.10.6",ME=1e4,qE="0.3",UE="WALLETCONNECT_CLIENT_ID",Ur={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},zE="subscription",HE="0.3",kE=oe.FIVE_SECONDS*1e3,KE="pairing",VE="0.3",Yn={wc_pairingDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:0},res:{ttl:oe.ONE_DAY,prompt:!1,tag:0}}},is={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Jr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},BE="history",GE="0.3",WE="expirer",Nr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},JE="0.3",Ec="verify-api",In="https://verify.walletconnect.com",Uc="https://verify.walletconnect.org",QE=[In,Uc];class YE{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=OE,this.version=AE,this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,a)=>{this.isInitialized(),this.keychain.set(n,a),await this.persist()},this.get=n=>{this.isInitialized();const a=this.keychain.get(n);if(typeof a>"u"){const{message:h}=Y("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(h)}return a},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=t,this.logger=$e.generateChildLogger(r,this.name)}get context(){return $e.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Cf(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Tf(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}}class ZE{constructor(t,r,n){this.core=t,this.logger=r,this.name=PE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),h=Dl(a);return Gf(h.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=c1();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const h=await this.getClientSeed(),f=Dl(h),v=$c();return await B_(v,a,SE,f)},this.generateSharedKey=(a,h,f)=>{this.isInitialized();const v=this.getPrivateKey(a),m=u1(v,h);return this.setSymKey(m,f)},this.setSymKey=async(a,h)=>{this.isInitialized();const f=h||h1(a);return await this.keychain.set(f,a),f},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,h,f)=>{this.isInitialized();const v=Af(f),m=Gi(h);if(yl(v)){const j=v.senderPublicKey,z=v.receiverPublicKey;a=await this.generateSharedKey(j,z)}const g=this.getSymKey(a),{type:E,senderPublicKey:S}=v;return f1({type:E,symKey:g,message:m,senderPublicKey:S})},this.decode=async(a,h,f)=>{this.isInitialized();const v=g1(h,f);if(yl(v)){const m=v.receiverPublicKey,g=v.senderPublicKey;a=await this.generateSharedKey(m,g)}try{const m=this.getSymKey(a),g=p1({symKey:m,encoded:h});return us(g)}catch(m){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(m)}},this.getPayloadType=a=>{const h=No(a);return hs(h.type)},this.getPayloadSenderPublicKey=a=>{const h=No(a);return h.senderPublicKey?nr(h.senderPublicKey,ir):void 0},this.core=t,this.logger=$e.generateChildLogger(r,this.name),this.keychain=n||new YE(this.core,this.logger)}get context(){return $e.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(kl)}catch{t=$c(),await this.keychain.set(kl,t)}return bE(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}}class XE extends x_{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=CE,this.version=TE,this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,a)=>{this.isInitialized();const h=xn(a);let f=this.messages.get(n);return typeof f>"u"&&(f={}),typeof f[h]<"u"||(f[h]=a,this.messages.set(n,f),await this.persist()),h},this.get=n=>{this.isInitialized();let a=this.messages.get(n);return typeof a>"u"&&(a={}),a},this.has=(n,a)=>{this.isInitialized();const h=this.get(n),f=xn(a);return typeof h[f]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=$e.generateChildLogger(t,this.name),this.core=r}get context(){return $e.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Cf(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Tf(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}}class eI extends P_{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Hr.exports.EventEmitter,this.name=NE,this.queue=new Map,this.publishTimeout=oe.toMiliseconds(oe.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,a,h)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:a,opts:h}});try{const v=h?.ttl||RE,m=Dc(h),g=h?.prompt||!1,E=h?.tag||0,S=h?.id||e1().toString(),j={topic:n,message:a,opts:{ttl:v,relay:m,prompt:g,tag:E,id:S}},z=setTimeout(()=>this.queue.set(S,j),this.publishTimeout);try{await await os(this.rpcPublish(n,a,v,m,g,E,S),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(S),this.relayer.events.emit(Wt.publish,j)}catch($){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(f=h?.internal)!=null&&f.throwOnFailedPublish)throw this.removeRequestFromQueue(S),$;return}finally{clearTimeout(z)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:a,opts:h}})}catch(v){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(v),v}},this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.relayer=t,this.logger=$e.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return $e.getLoggerContext(this.logger)}rpcPublish(t,r,n,a,h,f,v){var m,g,E,S;const j={method:Oo(a.protocol).publish,params:{topic:t,message:r,ttl:n,prompt:h,tag:f},id:v};return rr((m=j.params)==null?void 0:m.prompt)&&((g=j.params)==null||delete g.prompt),rr((E=j.params)==null?void 0:E.tag)&&((S=j.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:j}),this.relayer.request(j)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:n,opts:a}=t;await this.publish(r,n,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Wt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Wt.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class tI{constructor(){this.map=new Map,this.set=(t,r)=>{const n=this.get(t);this.exists(t,r)||this.map.set(t,[...n,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const n=this.get(t);if(!this.exists(t,r))return;const a=n.filter(h=>h!==r);if(!a.length){this.map.delete(t);return}this.map.set(t,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var rI=Object.defineProperty,iI=Object.defineProperties,nI=Object.getOwnPropertyDescriptors,Vl=Object.getOwnPropertySymbols,sI=Object.prototype.hasOwnProperty,oI=Object.prototype.propertyIsEnumerable,Bl=(s,t,r)=>t in s?rI(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Zn=(s,t)=>{for(var r in t||(t={}))sI.call(t,r)&&Bl(s,r,t[r]);if(Vl)for(var r of Vl(t))oI.call(t,r)&&Bl(s,r,t[r]);return s},Ic=(s,t)=>iI(s,nI(t));class aI extends A_{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new tI,this.events=new Hr.exports.EventEmitter,this.name=zE,this.version=HE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ci,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:a}});try{const h=Dc(a),f={topic:n,relay:h};this.pending.set(n,f);const v=await this.rpcSubscribe(n,h);return this.onSubscribe(v,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:a}}),v}catch(h){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(h),h}},this.unsubscribe=async(n,a)=>{await this.restartToComplete(),this.isInitialized(),typeof a?.id<"u"?await this.unsubscribeById(n,a.id,a):await this.unsubscribeByTopic(n,a)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((a,h)=>{const f=new oe.Watch;f.start(this.pendingSubscriptionWatchLabel);const v=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(v),f.stop(this.pendingSubscriptionWatchLabel),a(!0)),f.elapsed(this.pendingSubscriptionWatchLabel)>=kE&&(clearInterval(v),f.stop(this.pendingSubscriptionWatchLabel),h(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=$e.generateChildLogger(r,this.name),this.clientId=""}get context(){return $e.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let n=!1;try{n=this.getSubscription(t).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const n=this.topicMap.get(t);await Promise.all(n.map(async a=>await this.unsubscribeById(t,a,r)))}async unsubscribeById(t,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}});try{const a=Dc(n);await this.rpcUnsubscribe(t,r,a);const h=It("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,h),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(t,r){const n={method:Oo(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await os(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Wt.connection_stalled)}return xn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,n={method:Oo(r.protocol).batchSubscribe,params:{topics:t.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await os(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Wt.connection_stalled)}}rpcUnsubscribe(t,r,n){const a={method:Oo(n.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(t,r){this.setSubscription(t,Ic(Zn({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,Zn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,n),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,Zn({},r)),this.topicMap.set(r.topic,t),this.events.emit(Ur.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const n=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(n.topic,t),this.events.emit(Ur.deleted,Ic(Zn({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ur.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Ur.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);Yr(r)&&this.onBatchSubscribe(r.map((n,a)=>Ic(Zn({},t[a]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Wt.connect,async()=>{await this.onConnect()}),this.relayer.on(Wt.disconnect,()=>{this.onDisconnect()}),this.events.on(Ur.created,async t=>{const r=Ur.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Ur.deleted,async t=>{const r=Ur.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var cI=Object.defineProperty,Gl=Object.getOwnPropertySymbols,uI=Object.prototype.hasOwnProperty,hI=Object.prototype.propertyIsEnumerable,Wl=(s,t,r)=>t in s?cI(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,lI=(s,t)=>{for(var r in t||(t={}))uI.call(t,r)&&Wl(s,r,t[r]);if(Gl)for(var r of Gl(t))hI.call(t,r)&&Wl(s,r,t[r]);return s};class fI extends S_{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Hr.exports.EventEmitter,this.name=DE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Wt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Wt.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(hi.payload,this.onPayloadHandler),this.provider.on(hi.connect,this.onConnectHandler),this.provider.on(hi.disconnect,this.onDisconnectHandler),this.provider.on(hi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?$e.generateChildLogger(t.logger,this.name):$e.pino($e.getDefaultLoggerOptions({level:t.logger||$E})),this.messages=new XE(this.logger,t.core),this.subscriber=new aI(this,this.logger),this.publisher=new eI(this,this.logger),this.relayUrl=t?.relayUrl||ap,this.projectId=t.projectId,this.bundleId=b1(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Kl}...`),await this.restartTransport(Kl)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},ME)}get context(){return $e.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,n){this.isInitialized(),await this.publisher.publish(t,r,n),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var n;this.isInitialized();let a=((n=this.subscriber.topicMap.get(t))==null?void 0:n[0])||"";if(a)return a;let h;const f=v=>{v.topic===t&&(this.subscriber.off(Ur.created,f),h())};return await Promise.all([new Promise(v=>{h=v,this.subscriber.on(Ur.created,f)}),new Promise(async v=>{a=await this.subscriber.subscribe(t,r),v()})]),a}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await os(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Ur.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await os(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){n(a);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(hi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ol())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new pi(new Q_(O1({sdkVersion:jE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:n}=t;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(t){const{topic:r,message:n}=t;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const a=this.messages.has(r,n);return a&&this.logger.debug(`Ignoring duplicate message: ${n}`),a}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Bc(t)){if(!t.method.endsWith(FE))return;const r=t.params,{topic:n,message:a,publishedAt:h}=r.data,f={topic:n,message:a,publishedAt:h};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(lI({type:"event",event:r.id},f)),this.events.emit(r.id,f),await this.acknowledgePayload(t),await this.onMessageEvent(f)}else Gc(t)&&this.events.emit(Wt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Wt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=Wc(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(hi.payload,this.onPayloadHandler),this.provider.off(hi.connect,this.onConnectHandler),this.provider.off(hi.disconnect,this.onDisconnectHandler),this.provider.off(hi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Wt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let t=await Ol();ww(async r=>{this.initialized&&t!==r&&(t=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Wt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(t=>this.logger.error(t))},oe.toMiliseconds(LE)))}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var pI=Object.defineProperty,Jl=Object.getOwnPropertySymbols,dI=Object.prototype.hasOwnProperty,gI=Object.prototype.propertyIsEnumerable,Ql=(s,t,r)=>t in s?pI(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Yl=(s,t)=>{for(var r in t||(t={}))dI.call(t,r)&&Ql(s,r,t[r]);if(Jl)for(var r of Jl(t))gI.call(t,r)&&Ql(s,r,t[r]);return s};class Ho extends O_{constructor(t,r,n,a=Ci,h=void 0){super(t,r,n,a),this.core=t,this.logger=r,this.name=n,this.map=new Map,this.version=qE,this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!rr(f)?this.map.set(this.getKey(f),f):Q1(f)?this.map.set(f.id,f):Y1(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,v)=>{this.isInitialized(),this.map.has(f)?await this.update(f,v):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:v}),this.map.set(f,v),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(v=>Object.keys(f).every(m=>Y_(v[m],f[m]))):this.values),this.update=async(f,v)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:v});const m=Yl(Yl({},this.getData(f)),v);this.map.set(f,m),await this.persist()},this.delete=async(f,v)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:v}),this.map.delete(f),await this.persist())},this.logger=$e.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=h}get context(){return $e.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}}class yI{constructor(t,r){this.core=t,this.logger=r,this.name=KE,this.version=VE,this.events=new Vc,this.initialized=!1,this.storagePrefix=Ci,this.ignoredPayloadTypes=[Ji],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=$c(),a=await this.core.crypto.setSymKey(n),h=zr(oe.FIVE_MINUTES),f={protocol:op},v={topic:a,expiry:h,relay:f,active:!1},m=U1({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:n,relay:f});return await this.pairings.set(a,v),await this.core.relayer.subscribe(a),this.core.expirer.set(a,h),{topic:a,uri:m}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:a,symKey:h,relay:f}=El(n.uri);let v;if(this.pairings.keys.includes(a)&&(v=this.pairings.get(a),v.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);const m=zr(oe.FIVE_MINUTES),g={topic:a,relay:f,expiry:m,active:!1};return await this.pairings.set(a,g),this.core.expirer.set(a,m),n.activatePairing&&await this.activate({topic:a}),this.events.emit(is.create,g),this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(h,a),await this.core.relayer.subscribe(a,{relay:f})),g},this.activate=async({topic:n})=>{this.isInitialized();const a=zr(oe.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:a}),this.core.expirer.set(n,a)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:a}=n;if(this.pairings.keys.includes(a)){const h=await this.sendRequest(a,"wc_pairingPing",{}),{done:f,resolve:v,reject:m}=En();this.events.once($t("pairing_ping",h),({error:g})=>{g?m(g):v()}),await f()}},this.updateExpiry=async({topic:n,expiry:a})=>{this.isInitialized(),await this.pairings.update(n,{expiry:a})},this.updateMetadata=async({topic:n,metadata:a})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:a}=n;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",It("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(n,a,h)=>{const f=ss(a,h),v=await this.core.crypto.encode(n,f),m=Yn[a].req;return this.core.history.set(n,f),this.core.relayer.publish(n,v,m),f.id},this.sendResult=async(n,a,h)=>{const f=Wc(n,h),v=await this.core.crypto.encode(a,f),m=await this.core.history.get(a,n),g=Yn[m.request.method].res;await this.core.relayer.publish(a,v,g),await this.core.history.resolve(f)},this.sendError=async(n,a,h)=>{const f=jo(n,h),v=await this.core.crypto.encode(a,f),m=await this.core.history.get(a,n),g=Yn[m.request.method]?Yn[m.request.method].res:Yn.unregistered_method.res;await this.core.relayer.publish(a,v,g),await this.core.history.resolve(f)},this.deletePairing=async(n,a)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,It("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),a?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(a=>Oi(a.expiry));await Promise.all(n.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=n=>{const{topic:a,payload:h}=n;switch(h.method){case"wc_pairingPing":return this.onPairingPingRequest(a,h);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,h);default:return this.onUnknownRpcMethodRequest(a,h)}},this.onRelayEventResponse=async n=>{const{topic:a,payload:h}=n,f=(await this.core.history.get(a,h.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(a,h);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(n,a)=>{const{id:h}=a;try{this.isValidPing({topic:n}),await this.sendResult(h,n,!0),this.events.emit(is.ping,{id:h,topic:n})}catch(f){await this.sendError(h,n,f),this.logger.error(f)}},this.onPairingPingResponse=(n,a)=>{const{id:h}=a;setTimeout(()=>{Si(a)?this.events.emit($t("pairing_ping",h),{}):fi(a)&&this.events.emit($t("pairing_ping",h),{error:a.error})},500)},this.onPairingDeleteRequest=async(n,a)=>{const{id:h}=a;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(is.delete,{id:h,topic:n})}catch(f){await this.sendError(h,n,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(n,a)=>{const{id:h,method:f}=a;try{if(this.registeredMethods.includes(f))return;const v=It("WC_METHOD_UNSUPPORTED",f);await this.sendError(h,n,v),this.logger.error(v)}catch(v){await this.sendError(h,n,v),this.logger.error(v)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(It("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{var a;if(!pr(n)){const{message:f}=Y("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(f)}if(!J1(n.uri)){const{message:f}=Y("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(f)}const h=El(n.uri);if(!((a=h?.relay)!=null&&a.protocol)){const{message:f}=Y("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(f)}if(!(h!=null&&h.symKey)){const{message:f}=Y("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(f)}},this.isValidPing=async n=>{if(!pr(n)){const{message:h}=Y("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(h)}const{topic:a}=n;await this.isValidPairingTopic(a)},this.isValidDisconnect=async n=>{if(!pr(n)){const{message:h}=Y("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(h)}const{topic:a}=n;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async n=>{if(!zt(n,!1)){const{message:a}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(a)}if(!this.pairings.keys.includes(n)){const{message:a}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(a)}if(Oi(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:a}=Y("EXPIRED",`pairing topic: ${n}`);throw new Error(a)}},this.core=t,this.logger=$e.generateChildLogger(r,this.name),this.pairings=new Ho(this.core,this.logger,this.name,this.storagePrefix)}get context(){return $e.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Wt.message,async t=>{const{topic:r,message:n}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const a=await this.core.crypto.decode(r,n);try{Bc(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Gc(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))}catch(h){this.logger.error(h)}})}registerExpirerEvents(){this.core.expirer.on(Nr.expired,async t=>{const{topic:r}=Nf(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(is.expire,{topic:r}))})}}class vI extends I_{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Hr.exports.EventEmitter,this.name=BE,this.version=GE,this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,a,h)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:a,chainId:h}),this.records.has(a.id))return;const f={id:a.id,topic:n,request:{method:a.method,params:a.params||null},chainId:h,expiry:zr(oe.THIRTY_DAYS)};this.records.set(f.id,f),this.events.emit(Jr.created,f)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const a=await this.getRecord(n.id);typeof a.response>"u"&&(a.response=fi(n)?{error:n.error}:{result:n.result},this.records.set(a.id,a),this.events.emit(Jr.updated,a))},this.get=async(n,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:a}),await this.getRecord(a)),this.delete=(n,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(h=>{if(h.topic===n){if(typeof a<"u"&&h.id!==a)return;this.records.delete(h.id),this.events.emit(Jr.deleted,h)}})},this.exists=async(n,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===n:!1),this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.logger=$e.generateChildLogger(r,this.name)}get context(){return $e.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:ss(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(n)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Jr.created,t=>{const r=Jr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Jr.updated,t=>{const r=Jr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Jr.deleted,t=>{const r=Jr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{oe.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}}class mI extends C_{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Hr.exports.EventEmitter,this.name=WE,this.version=JE,this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const a=this.formatTarget(n);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(n,a)=>{this.isInitialized();const h=this.formatTarget(n),f={target:h,expiry:a};this.expirations.set(h,f),this.checkExpiry(h,f),this.events.emit(Nr.created,{target:h,expiration:f})},this.get=n=>{this.isInitialized();const a=this.formatTarget(n);return this.getExpiration(a)},this.del=n=>{if(this.isInitialized(),this.has(n)){const a=this.formatTarget(n),h=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Nr.deleted,{target:a,expiration:h})}},this.on=(n,a)=>{this.events.on(n,a)},this.once=(n,a)=>{this.events.once(n,a)},this.off=(n,a)=>{this.events.off(n,a)},this.removeListener=(n,a)=>{this.events.removeListener(n,a)},this.logger=$e.generateChildLogger(r,this.name)}get context(){return $e.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return A1(t);if(typeof t=="number")return C1(t);const{message:r}=Y("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Nr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(t,r){const{expiry:n}=r;oe.toMiliseconds(n)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Nr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Nr.created,t=>{const r=Nr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Nr.expired,t=>{const r=Nr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Nr.deleted,t=>{const r=Nr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}}}class wI extends T_{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Ec,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||On()||!An())return;const a=this.getVerifyUrl(n?.verifyUrl);this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(h){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(h)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Uc;try{await this.createIframe()}catch(h){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(h),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const a=this.getVerifyUrl(n?.verifyUrl);let h;try{h=await this.fetchAttestation(n.attestationId,a)}catch(f){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${a}`),this.logger.info(f),h=await this.fetchAttestation(n.attestationId,Uc)}return h},this.fetchAttestation=async(n,a)=>{this.logger.info(`resolving attestation: ${n} from url: ${a}`);const h=this.startAbortTimer(oe.ONE_SECOND*2),f=await fetch(`${a}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(h),f.status===200?await f.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const a=h=>{h.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),n())};await Promise.race([new Promise(h=>{if(document.getElementById(Ec))return h();window.addEventListener("message",a);const f=document.createElement("iframe");f.id=Ec,f.src=`${this.verifyUrl}/${this.projectId}`,f.style.display="none",document.body.append(f),this.iframe=f,n=h}),new Promise((h,f)=>setTimeout(()=>{window.removeEventListener("message",a),f("verify iframe load timeout")},oe.toMiliseconds(oe.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=n=>{let a=n||In;return QE.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${In}`),a=In),a},this.logger=$e.generateChildLogger(r,this.name),this.verifyUrl=In,this.abortController=new AbortController,this.isDevEnv=Zc()&&{}.IS_VITEST}get context(){return $e.getLoggerContext(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),oe.toMiliseconds(t))}}var _I=Object.defineProperty,Zl=Object.getOwnPropertySymbols,bI=Object.prototype.hasOwnProperty,EI=Object.prototype.propertyIsEnumerable,Xl=(s,t,r)=>t in s?_I(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,ef=(s,t)=>{for(var r in t||(t={}))bI.call(t,r)&&Xl(s,r,t[r]);if(Zl)for(var r of Zl(t))EI.call(t,r)&&Xl(s,r,t[r]);return s};class ou extends E_{constructor(t){super(t),this.protocol=sp,this.version=EE,this.name=su,this.events=new Hr.exports.EventEmitter,this.initialized=!1,this.on=(n,a)=>this.events.on(n,a),this.once=(n,a)=>this.events.once(n,a),this.off=(n,a)=>this.events.off(n,a),this.removeListener=(n,a)=>this.events.removeListener(n,a),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||ap,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:$e.pino($e.getDefaultLoggerOptions({level:t?.logger||IE.logger}));this.logger=$e.generateChildLogger(r,this.name),this.heartbeat=new Tn.HeartBeat,this.crypto=new ZE(this,this.logger,t?.keychain),this.history=new vI(this,this.logger),this.expirer=new mI(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new Yw(ef(ef({},xE),t?.storageOptions)),this.relayer=new fI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new yI(this,this.logger),this.verify=new wI(this.projectId||"",this.logger)}static async init(t){const r=new ou(t);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(UE,n),r}get context(){return $e.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const II=ou,cp="wc",up=2,hp="client",au=`${cp}@${up}:${hp}:`,xc={name:hp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},tf="WALLETCONNECT_DEEPLINK_CHOICE",xI="proposal",lp="Proposal expired",PI="session",xo=oe.SEVEN_DAYS,SI="engine",Xn={wc_sessionPropose:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:oe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:oe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:oe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:oe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:oe.THIRTY_SECONDS,prompt:!1,tag:1115}}},Pc={min:oe.FIVE_MINUTES,max:oe.SEVEN_DAYS},li={idle:"IDLE",active:"ACTIVE"},OI="request",AI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var CI=Object.defineProperty,TI=Object.defineProperties,RI=Object.getOwnPropertyDescriptors,rf=Object.getOwnPropertySymbols,NI=Object.prototype.hasOwnProperty,$I=Object.prototype.propertyIsEnumerable,nf=(s,t,r)=>t in s?CI(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,lr=(s,t)=>{for(var r in t||(t={}))NI.call(t,r)&&nf(s,r,t[r]);if(rf)for(var r of rf(t))$I.call(t,r)&&nf(s,r,t[r]);return s},es=(s,t)=>TI(s,RI(t));class DI extends N_{constructor(t){super(t),this.name=SI,this.events=new Vc,this.initialized=!1,this.ignoredPayloadTypes=[Ji],this.requestQueue={state:li.idle,queue:[]},this.sessionRequestQueue={state:li.idle,queue:[]},this.requestQueueDelay=oe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Xn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=es(lr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:a,requiredNamespaces:h,optionalNamespaces:f,sessionProperties:v,relays:m}=n;let g=a,E,S=!1;if(g&&(S=this.client.core.pairing.pairings.get(g).active),!g||!S){const{topic:le,uri:ae}=await this.client.core.pairing.create();g=le,E=ae}const j=await this.client.core.crypto.generateKeyPair(),z=lr({requiredNamespaces:h,optionalNamespaces:f,relays:m??[{protocol:op}],proposer:{publicKey:j,metadata:this.client.metadata}},v&&{sessionProperties:v}),{reject:$,resolve:ie,done:ce}=En(oe.FIVE_MINUTES,lp);if(this.events.once($t("session_connect"),async({error:le,session:ae})=>{if(le)$(le);else if(ae){ae.self.publicKey=j;const ye=es(lr({},ae),{requiredNamespaces:ae.requiredNamespaces,optionalNamespaces:ae.optionalNamespaces});await this.client.session.set(ae.topic,ye),await this.setExpiry(ae.topic,ae.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:ae.peer.metadata}),ie(ye)}}),!g){const{message:le}=Y("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(le)}const ue=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:z}),fe=zr(oe.FIVE_MINUTES);return await this.setProposal(ue,lr({id:ue,expiry:fe},z)),{uri:E,approval:ce}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:a,namespaces:h,sessionProperties:f}=r,v=this.client.proposal.get(n);let{pairingTopic:m,proposer:g,requiredNamespaces:E,optionalNamespaces:S}=v;m=m||"",Pn(E)||(E=K1(h,"approve()"));const j=await this.client.core.crypto.generateKeyPair(),z=g.publicKey,$=await this.client.core.crypto.generateSharedKey(j,z);m&&n&&(await this.client.core.pairing.updateMetadata({topic:m,metadata:g.metadata}),await this.sendResult({id:n,topic:m,result:{relay:{protocol:a??"irn"},responderPublicKey:j}}),await this.client.proposal.delete(n,It("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}));const ie=lr({relay:{protocol:a??"irn"},namespaces:h,requiredNamespaces:E,optionalNamespaces:S,pairingTopic:m,controller:{publicKey:j,metadata:this.client.metadata},expiry:zr(xo)},f&&{sessionProperties:f});await this.client.core.relayer.subscribe($),await this.sendRequest({topic:$,method:"wc_sessionSettle",params:ie,throwOnFailedPublish:!0});const ce=es(lr({},ie),{topic:$,pairingTopic:m,acknowledged:!1,self:ie.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:j});return await this.client.session.set($,ce),await this.setExpiry($,zr(xo)),{topic:$,acknowledged:()=>new Promise(ue=>setTimeout(()=>ue(this.client.session.get($)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:a}=r,{pairingTopic:h}=this.client.proposal.get(n);h&&(await this.sendError(n,h,a),await this.client.proposal.delete(n,It("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:a}=r,h=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:f,resolve:v,reject:m}=En();return this.events.once($t("session_update",h),({error:g})=>{g?m(g):v()}),await this.client.session.update(n,{namespaces:a}),{acknowledged:f}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,a=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:h,resolve:f,reject:v}=En();return this.events.once($t("session_extend",a),({error:m})=>{m?v(m):f()}),await this.setExpiry(n,zr(xo)),{acknowledged:h}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:a,topic:h,expiry:f}=r,v=t1(),{done:m,resolve:g,reject:E}=En(f,"Request expired. Please try again.");return this.events.once($t("session_request",v),({error:S,result:j})=>{S?E(S):g(j)}),await Promise.all([new Promise(async S=>{await this.sendRequest({clientRpcId:v,topic:h,method:"wc_sessionRequest",params:{request:a,chainId:n},expiry:f,throwOnFailedPublish:!0}).catch(j=>E(j)),this.client.events.emit("session_request_sent",{topic:h,request:a,chainId:n,id:v}),S()}),new Promise(async S=>{const j=await R1(this.client.core.storage,tf);T1({id:v,topic:h,wcDeepLink:j}),S()}),m()]).then(S=>S[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:a}=r,{id:h}=a;Si(a)?await this.sendResult({id:h,topic:n,result:a.result,throwOnFailedPublish:!0}):fi(a)&&await this.sendError(h,n,a.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const a=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:h,resolve:f,reject:v}=En();this.events.once($t("session_ping",a),({error:m})=>{m?v(m):f()}),await h()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:a,chainId:h}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:a,chainId:h}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:It("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>G1(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(h=>{var f,v;return((f=h.peerMetadata)==null?void 0:f.url)&&((v=h.peerMetadata)==null?void 0:v.url)===r.peer.metadata.url&&h.topic&&h.topic!==n.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(h=>this.client.core.pairing.disconnect({topic:h.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,It("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(tf).catch(h=>this.client.logger.warn(h))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,It("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),a?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(h=>h.id!==r),a&&(this.sessionRequestQueue.state=li.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Xn.wc_sessionRequest.req.ttl,{id:a,topic:h,params:f,verifyContext:v}=r;await this.client.pendingRequest.set(a,{id:a,topic:h,params:f,verifyContext:v}),n&&this.client.core.expirer.set(a,zr(n))},this.sendRequest=async r=>{const{topic:n,method:a,params:h,expiry:f,relayRpcId:v,clientRpcId:m,throwOnFailedPublish:g}=r,E=ss(a,h,m);if(An()&&AI.includes(a)){const z=xn(JSON.stringify(E));this.client.core.verify.register({attestationId:z})}const S=await this.client.core.crypto.encode(n,E),j=Xn[a].req;return f&&(j.ttl=f),v&&(j.id=v),this.client.core.history.set(n,E),g?(j.internal=es(lr({},j.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,S,j)):this.client.core.relayer.publish(n,S,j).catch(z=>this.client.logger.error(z)),E.id},this.sendResult=async r=>{const{id:n,topic:a,result:h,throwOnFailedPublish:f}=r,v=Wc(n,h),m=await this.client.core.crypto.encode(a,v),g=await this.client.core.history.get(a,n),E=Xn[g.request.method].res;f?(E.internal=es(lr({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,m,E)):this.client.core.relayer.publish(a,m,E).catch(S=>this.client.logger.error(S)),await this.client.core.history.resolve(v)},this.sendError=async(r,n,a)=>{const h=jo(r,a),f=await this.client.core.crypto.encode(n,h),v=await this.client.core.history.get(n,r),m=Xn[v.request.method].res;this.client.core.relayer.publish(n,f,m),await this.client.core.history.resolve(h)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(a=>{Oi(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Oi(a.expiry)&&n.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...n.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===li.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=li.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=li.idle},this.processRequest=r=>{const{topic:n,payload:a}=r,h=a.method;switch(h){case"wc_sessionPropose":return this.onSessionProposeRequest(n,a);case"wc_sessionSettle":return this.onSessionSettleRequest(n,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,a);case"wc_sessionExtend":return this.onSessionExtendRequest(n,a);case"wc_sessionPing":return this.onSessionPingRequest(n,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,a);case"wc_sessionRequest":return this.onSessionRequest(n,a);case"wc_sessionEvent":return this.onSessionEventRequest(n,a);default:return this.client.logger.info(`Unsupported request method ${h}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:a}=r,h=(await this.client.core.history.get(n,a.id)).request.method;switch(h){case"wc_sessionPropose":return this.onSessionProposeResponse(n,a);case"wc_sessionSettle":return this.onSessionSettleResponse(n,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,a);case"wc_sessionExtend":return this.onSessionExtendResponse(n,a);case"wc_sessionPing":return this.onSessionPingResponse(n,a);case"wc_sessionRequest":return this.onSessionRequestResponse(n,a);default:return this.client.logger.info(`Unsupported response method ${h}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:a}=Y("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,n)=>{const{params:a,id:h}=n;try{this.isValidConnect(lr({},n.params));const f=zr(oe.FIVE_MINUTES),v=lr({id:h,pairingTopic:r,expiry:f},a);await this.setProposal(h,v);const m=xn(JSON.stringify(n)),g=await this.getVerifyContext(m,v.proposer.metadata);this.client.events.emit("session_proposal",{id:h,params:v,verifyContext:g})}catch(f){await this.sendError(h,r,f),this.client.logger.error(f)}},this.onSessionProposeResponse=async(r,n)=>{const{id:a}=n;if(Si(n)){const{result:h}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:h});const f=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const v=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});const m=h.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const g=await this.client.core.crypto.generateSharedKey(v,m);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const E=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:E}),await this.client.core.pairing.activate({topic:r})}else fi(n)&&(await this.client.proposal.delete(a,It("USER_DISCONNECTED")),this.events.emit($t("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:a,params:h}=n;try{this.isValidSessionSettleRequest(h);const{relay:f,controller:v,expiry:m,namespaces:g,requiredNamespaces:E,optionalNamespaces:S,sessionProperties:j,pairingTopic:z}=n.params,$=lr({topic:r,relay:f,expiry:m,namespaces:g,acknowledged:!0,pairingTopic:z,requiredNamespaces:E,optionalNamespaces:S,controller:v.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:v.publicKey,metadata:v.metadata}},j&&{sessionProperties:j});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit($t("session_connect"),{session:$}),this.cleanupDuplicatePairings($)}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionSettleResponse=async(r,n)=>{const{id:a}=n;Si(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit($t("session_approve",a),{})):fi(n)&&(await this.client.session.delete(r,It("USER_DISCONNECTED")),this.events.emit($t("session_approve",a),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:a,id:h}=n;try{const f=`${r}_session_update`,v=_o.get(f);if(v&&this.isRequestOutOfSync(v,h)){this.client.logger.info(`Discarding out of sync request - ${h}`);return}this.isValidUpdate(lr({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult({id:h,topic:r,result:!0}),this.client.events.emit("session_update",{id:h,topic:r,params:a}),_o.set(f,h)}catch(f){await this.sendError(h,r,f),this.client.logger.error(f)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:a}=n;Si(n)?this.events.emit($t("session_update",a),{}):fi(n)&&this.events.emit($t("session_update",a),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:a}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,zr(xo)),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_extend",{id:a,topic:r})}catch(h){await this.sendError(a,r,h),this.client.logger.error(h)}},this.onSessionExtendResponse=(r,n)=>{const{id:a}=n;Si(n)?this.events.emit($t("session_extend",a),{}):fi(n)&&this.events.emit($t("session_extend",a),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:a}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_ping",{id:a,topic:r})}catch(h){await this.sendError(a,r,h),this.client.logger.error(h)}},this.onSessionPingResponse=(r,n)=>{const{id:a}=n;setTimeout(()=>{Si(n)?this.events.emit($t("session_ping",a),{}):fi(n)&&this.events.emit($t("session_ping",a),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:a}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(h=>{this.client.core.relayer.once(Wt.publish,async()=>{h(await this.deleteSession(r))})}),this.sendResult({id:a,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(h){this.client.logger.error(h)}},this.onSessionRequest=async(r,n)=>{const{id:a,params:h}=n;try{this.isValidRequest(lr({topic:r},h));const f=xn(JSON.stringify(ss("wc_sessionRequest",h,a))),v=this.client.session.get(r),m=await this.getVerifyContext(f,v.peer.metadata),g={id:a,topic:r,params:h,verifyContext:m};await this.setPendingSessionRequest(g),this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue()}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.onSessionRequestResponse=(r,n)=>{const{id:a}=n;Si(n)?this.events.emit($t("session_request",a),{result:n.result}):fi(n)&&this.events.emit($t("session_request",a),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:a,params:h}=n;try{const f=`${r}_session_event_${h.event.name}`,v=_o.get(f);if(v&&this.isRequestOutOfSync(v,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(lr({topic:r},h)),this.client.events.emit("session_event",{id:a,topic:r,params:h}),_o.set(f,a)}catch(f){await this.sendError(a,r,f),this.client.logger.error(f)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=li.idle,this.processSessionRequestQueue()},oe.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===li.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=li.active,this.client.events.emit("session_request",r)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=r=>{if(r.active)return;const n=this.client.proposal.getAll().find(a=>a.pairingTopic===r.topic);n&&this.onSessionProposeRequest(r.topic,ss("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id))},this.isValidConnect=async r=>{if(!pr(r)){const{message:m}=Y("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(m)}const{pairingTopic:n,requiredNamespaces:a,optionalNamespaces:h,sessionProperties:f,relays:v}=r;if(rr(n)||await this.isValidPairingTopic(n),!sw(v,!0)){const{message:m}=Y("MISSING_OR_INVALID",`connect() relays: ${v}`);throw new Error(m)}!rr(a)&&Pn(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!rr(h)&&Pn(h)!==0&&this.validateNamespaces(h,"optionalNamespaces"),rr(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(r,n)=>{const a=nw(r,"connect()",n);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!pr(r))throw new Error(Y("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:a,relayProtocol:h,sessionProperties:f}=r;await this.isValidProposalId(n);const v=this.client.proposal.get(n),m=Ao(a,"approve()");if(m)throw new Error(m.message);const g=Pl(v.requiredNamespaces,a,"approve()");if(g)throw new Error(g.message);if(!zt(h,!0)){const{message:E}=Y("MISSING_OR_INVALID",`approve() relayProtocol: ${h}`);throw new Error(E)}rr(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async r=>{if(!pr(r)){const{message:h}=Y("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(h)}const{id:n,reason:a}=r;if(await this.isValidProposalId(n),!aw(a)){const{message:h}=Y("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(h)}},this.isValidSessionSettleRequest=r=>{if(!pr(r)){const{message:g}=Y("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(g)}const{relay:n,controller:a,namespaces:h,expiry:f}=r;if(!Df(n)){const{message:g}=Y("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const v=Z1(a,"onSessionSettleRequest()");if(v)throw new Error(v.message);const m=Ao(h,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(Oi(f)){const{message:g}=Y("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async r=>{if(!pr(r)){const{message:m}=Y("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(m)}const{topic:n,namespaces:a}=r;await this.isValidSessionTopic(n);const h=this.client.session.get(n),f=Ao(a,"update()");if(f)throw new Error(f.message);const v=Pl(h.requiredNamespaces,a,"update()");if(v)throw new Error(v.message)},this.isValidExtend=async r=>{if(!pr(r)){const{message:a}=Y("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!pr(r)){const{message:m}=Y("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(m)}const{topic:n,request:a,chainId:h,expiry:f}=r;await this.isValidSessionTopic(n);const{namespaces:v}=this.client.session.get(n);if(!xl(v,h)){const{message:m}=Y("MISSING_OR_INVALID",`request() chainId: ${h}`);throw new Error(m)}if(!cw(a)){const{message:m}=Y("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(m)}if(!lw(v,h,a.method)){const{message:m}=Y("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(m)}if(f&&!gw(f,Pc)){const{message:m}=Y("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Pc.min} and ${Pc.max}`);throw new Error(m)}},this.isValidRespond=async r=>{if(!pr(r)){const{message:h}=Y("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(h)}const{topic:n,response:a}=r;if(await this.isValidSessionTopic(n),!uw(a)){const{message:h}=Y("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(h)}},this.isValidPing=async r=>{if(!pr(r)){const{message:a}=Y("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!pr(r)){const{message:v}=Y("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(v)}const{topic:n,event:a,chainId:h}=r;await this.isValidSessionTopic(n);const{namespaces:f}=this.client.session.get(n);if(!xl(f,h)){const{message:v}=Y("MISSING_OR_INVALID",`emit() chainId: ${h}`);throw new Error(v)}if(!hw(a)){const{message:v}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(v)}if(!fw(f,h,a.name)){const{message:v}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(v)}},this.isValidDisconnect=async r=>{if(!pr(r)){const{message:a}=Y("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const a={verified:{verifyUrl:n.verifyUrl||In,validation:"UNKNOWN",origin:n.url||""}};try{const h=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});h&&(a.verified.origin=h.origin,a.verified.isScam=h.isScam,a.verified.validation=h.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.info(h)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(a=>{if(!zt(a,!1)){const{message:h}=Y("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(h)}})}}async isInitialized(){if(!this.initialized){const{message:t}=Y("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Wt.message,async t=>{const{topic:r,message:n}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const a=await this.client.core.crypto.decode(r,n);try{Bc(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Gc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})}catch(h){this.client.logger.error(h)}})}registerExpirerEvents(){this.client.core.expirer.on(Nr.expired,async t=>{const{topic:r,id:n}=Nf(t.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Y("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(is.create,t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!zt(t,!1)){const{message:r}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Oi(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=Y("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!zt(t,!1)){const{message:r}=Y("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=Y("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Oi(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=Y("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(zt(t,!1)){const{message:r}=Y("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=Y("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!ow(t)){const{message:r}=Y("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=Y("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Oi(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=Y("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class FI extends Ho{constructor(t,r){super(t,r,xI,au),this.core=t,this.logger=r}}class LI extends Ho{constructor(t,r){super(t,r,PI,au),this.core=t,this.logger=r}}class jI extends Ho{constructor(t,r){super(t,r,OI,au,n=>n.id),this.core=t,this.logger=r}}class cu extends R_{constructor(t){super(t),this.protocol=cp,this.version=up,this.name=xc.name,this.events=new Hr.exports.EventEmitter,this.on=(n,a)=>this.events.on(n,a),this.once=(n,a)=>this.events.once(n,a),this.off=(n,a)=>this.events.off(n,a),this.removeListener=(n,a)=>this.events.removeListener(n,a),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(a){throw this.logger.error(a.message),a}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(a){throw this.logger.error(a.message),a}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(a){throw this.logger.error(a.message),a}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(a){throw this.logger.error(a.message),a}},this.update=async n=>{try{return await this.engine.update(n)}catch(a){throw this.logger.error(a.message),a}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(a){throw this.logger.error(a.message),a}},this.request=async n=>{try{return await this.engine.request(n)}catch(a){throw this.logger.error(a.message),a}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(a){throw this.logger.error(a.message),a}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(a){throw this.logger.error(a.message),a}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(a){throw this.logger.error(a.message),a}},this.find=n=>{try{return this.engine.find(n)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=t?.name||xc.name,this.metadata=t?.metadata||I1();const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:$e.pino($e.getDefaultLoggerOptions({level:t?.logger||xc.logger}));this.core=t?.core||new II(t),this.logger=$e.generateChildLogger(r,this.name),this.session=new LI(this.core,this.logger),this.proposal=new FI(this.core,this.logger),this.pendingRequest=new jI(this.core,this.logger),this.engine=new DI(this)}static async init(t){const r=new cu(t);return await r.initialize(),r}get context(){return $e.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const MI={Accept:"application/json","Content-Type":"application/json"},qI="POST",sf={headers:MI,method:qI},of=10;class Ri{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new Hr.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!fl(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t,r){this.isAvailable||await this.register();try{const n=Gi(t),h=await(await pl(this.url,Object.assign(Object.assign({},sf),{body:n}))).json();this.onPayload({data:h})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!fl(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,a)=>{this.events.once("register_error",h=>{this.resetMaxListeners(),a(h)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));n()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=Gi({id:1,jsonrpc:"2.0",method:"test",params:[]});await pl(t,Object.assign(Object.assign({},sf),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?us(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),a=n.message||n.toString(),h=jo(t,a);this.events.emit("payload",h)}parseError(t,r=this.url){return bf(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>of&&this.events.setMaxListeners(of)}}const af="error",UI="wss://relay.walletconnect.com",zI="wc",HI="universal_provider",cf=`${zI}@2:${HI}:`,kI="https://rpc.walletconnect.com/v1/",di={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(s,t){(function(){var r,n="4.17.21",a=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",v="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",g=500,E="__lodash_placeholder__",S=1,j=2,z=4,$=1,ie=2,ce=1,ue=2,fe=4,le=8,ae=16,ye=32,ve=64,re=128,Q=256,He=512,b=30,O="...",A=800,q=16,x=1,_=2,G=3,X=1/0,W=9007199254740991,D=17976931348623157e292,V=0/0,J=4294967295,he=J-1,Ae=J>>>1,Jt=[["ary",re],["bind",ce],["bindKey",ue],["curry",le],["curryRight",ae],["flip",He],["partial",ye],["partialRight",ve],["rearg",Q]],Ie="[object Arguments]",$r="[object Array]",M="[object AsyncFunction]",L="[object Boolean]",N="[object Date]",u="[object DOMException]",P="[object Error]",ne="[object Function]",me="[object GeneratorFunction]",xe="[object Map]",De="[object Number]",Le="[object Null]",Ce="[object Object]",xt="[object Promise]",mt="[object Proxy]",ot="[object RegExp]",Me="[object Set]",Ye="[object String]",Ze="[object Symbol]",at="[object Undefined]",ke="[object WeakMap]",Xe="[object WeakSet]",Fe="[object ArrayBuffer]",Ve="[object DataView]",ht="[object Float32Array]",Ue="[object Float64Array]",Pt="[object Int8Array]",Dt="[object Int16Array]",Ht="[object Int32Array]",kt="[object Uint8Array]",jt="[object Uint8ClampedArray]",Qt="[object Uint16Array]",sr="[object Uint32Array]",kr=/\b__p \+= '';/g,Yt=/\b(__p \+=) '' \+/g,Zr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gi=/&(?:amp|lt|gt|quot|#39);/g,Ni=/[&<>"']/g,lt=RegExp(gi.source),rt=RegExp(Ni.source),ft=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,ct=/<%=([\s\S]+?)%>/g,it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/[\\^$.*+?()[\]{}|]/g,At=RegExp(dt.source),gt=/^\s+/,wt=/\s/,yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ko=/[()=,{}\[\]\/\s]/,Ko=/\\(\\)?/g,Vo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,Bo=/^[-+]0x[0-9a-f]+$/i,Go=/^0b[01]+$/i,Wo=/^\[object .+?Constructor\]$/,Jo=/^0o[0-7]+$/i,Qo=/^(?:0|[1-9]\d*)$/,Xr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xi=/($^)/,Yo=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",Zo="\\u0300-\\u036f",Xo="\\ufe20-\\ufe2f",tn="\\u20d0-\\u20ff",gs=Zo+Xo+tn,ys="\\u2700-\\u27bf",Dr="a-z\\xdf-\\xf6\\xf8-\\xff",ea="\\xac\\xb1\\xd7\\xf7",ta="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ra="\\u2000-\\u206f",ia=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vs="A-Z\\xc0-\\xd6\\xd8-\\xde",ms="\\ufe0e\\ufe0f",$i=ea+ta+ra+ia,Nn="['\u2019]",Di="["+en+"]",$n="["+$i+"]",Fi="["+gs+"]",ws="\\d+",na="["+ys+"]",_s="["+Dr+"]",bs="[^"+en+$i+ws+ys+Dr+vs+"]",rn="\\ud83c[\\udffb-\\udfff]",sa="(?:"+Fi+"|"+rn+")",Es="[^"+en+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",yi="[\\ud800-\\udbff][\\udc00-\\udfff]",yr="["+vs+"]",Is="\\u200d",xs="(?:"+_s+"|"+bs+")",Kr="(?:"+yr+"|"+bs+")",Ps="(?:"+Nn+"(?:d|ll|m|re|s|t|ve))?",Ss="(?:"+Nn+"(?:D|LL|M|RE|S|T|VE))?",Os=sa+"?",As="["+ms+"]?",oa="(?:"+Is+"(?:"+[Es,nn,yi].join("|")+")"+As+Os+")*",ei="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Cs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ts=As+Os+oa,sn="(?:"+[na,nn,yi].join("|")+")"+Ts,aa="(?:"+[Es+Fi+"?",Fi,nn,yi,Di].join("|")+")",Dn=RegExp(Nn,"g"),ca=RegExp(Fi,"g"),on=RegExp(rn+"(?="+rn+")|"+aa+Ts,"g"),Rs=RegExp([yr+"?"+_s+"+"+Ps+"(?="+[$n,yr,"$"].join("|")+")",Kr+"+"+Ss+"(?="+[$n,yr+xs,"$"].join("|")+")",yr+"?"+xs+"+"+Ps,yr+"+"+Ss,Cs,ei,ws,sn].join("|"),"g"),Ns=RegExp("["+Is+en+gs+ms+"]"),Li=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$s=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ua=-1,Be={};Be[ht]=Be[Ue]=Be[Pt]=Be[Dt]=Be[Ht]=Be[kt]=Be[jt]=Be[Qt]=Be[sr]=!0,Be[Ie]=Be[$r]=Be[Fe]=Be[L]=Be[Ve]=Be[N]=Be[P]=Be[ne]=Be[xe]=Be[De]=Be[Ce]=Be[ot]=Be[Me]=Be[Ye]=Be[ke]=!1;var Ke={};Ke[Ie]=Ke[$r]=Ke[Fe]=Ke[Ve]=Ke[L]=Ke[N]=Ke[ht]=Ke[Ue]=Ke[Pt]=Ke[Dt]=Ke[Ht]=Ke[xe]=Ke[De]=Ke[Ce]=Ke[ot]=Ke[Me]=Ke[Ye]=Ke[Ze]=Ke[kt]=Ke[jt]=Ke[Qt]=Ke[sr]=!0,Ke[P]=Ke[ne]=Ke[ke]=!1;var y={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ee={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,_e=parseInt,et=typeof ts=="object"&&ts&&ts.Object===Object&&ts,Rt=typeof self=="object"&&self&&self.Object===Object&&self,Re=et||Rt||Function("return this")(),We=t&&!t.nodeType&&t,_t=We&&!0&&s&&!s.nodeType&&s,or=_t&&_t.exports===We,Nt=or&&et.process,tt=function(){try{var T=_t&&_t.require&&_t.require("util").types;return T||Nt&&Nt.binding&&Nt.binding("util")}catch{}}(),Zt=tt&&tt.isArrayBuffer,Fr=tt&&tt.isDate,xr=tt&&tt.isMap,Vr=tt&&tt.isRegExp,Fn=tt&&tt.isSet,ji=tt&&tt.isTypedArray;function Mt(T,U,F){switch(F.length){case 0:return T.call(U);case 1:return T.call(U,F[0]);case 2:return T.call(U,F[0],F[1]);case 3:return T.call(U,F[0],F[1],F[2])}return T.apply(U,F)}function dp(T,U,F,te){for(var we=-1,je=T==null?0:T.length;++we<je;){var Ft=T[we];U(te,Ft,F(Ft),T)}return te}function Pr(T,U){for(var F=-1,te=T==null?0:T.length;++F<te&&U(T[F],F,T)!==!1;);return T}function gp(T,U){for(var F=T==null?0:T.length;F--&&U(T[F],F,T)!==!1;);return T}function lu(T,U){for(var F=-1,te=T==null?0:T.length;++F<te;)if(!U(T[F],F,T))return!1;return!0}function vi(T,U){for(var F=-1,te=T==null?0:T.length,we=0,je=[];++F<te;){var Ft=T[F];U(Ft,F,T)&&(je[we++]=Ft)}return je}function Ds(T,U){var F=T==null?0:T.length;return!!F&&an(T,U,0)>-1}function ha(T,U,F){for(var te=-1,we=T==null?0:T.length;++te<we;)if(F(U,T[te]))return!0;return!1}function nt(T,U){for(var F=-1,te=T==null?0:T.length,we=Array(te);++F<te;)we[F]=U(T[F],F,T);return we}function mi(T,U){for(var F=-1,te=U.length,we=T.length;++F<te;)T[we+F]=U[F];return T}function la(T,U,F,te){var we=-1,je=T==null?0:T.length;for(te&&je&&(F=T[++we]);++we<je;)F=U(F,T[we],we,T);return F}function yp(T,U,F,te){var we=T==null?0:T.length;for(te&&we&&(F=T[--we]);we--;)F=U(F,T[we],we,T);return F}function fa(T,U){for(var F=-1,te=T==null?0:T.length;++F<te;)if(U(T[F],F,T))return!0;return!1}var vp=pa("length");function mp(T){return T.split("")}function wp(T){return T.match(Tt)||[]}function fu(T,U,F){var te;return F(T,function(we,je,Ft){if(U(we,je,Ft))return te=je,!1}),te}function Fs(T,U,F,te){for(var we=T.length,je=F+(te?1:-1);te?je--:++je<we;)if(U(T[je],je,T))return je;return-1}function an(T,U,F){return U===U?Rp(T,U,F):Fs(T,pu,F)}function _p(T,U,F,te){for(var we=F-1,je=T.length;++we<je;)if(te(T[we],U))return we;return-1}function pu(T){return T!==T}function du(T,U){var F=T==null?0:T.length;return F?ga(T,U)/F:V}function pa(T){return function(U){return U==null?r:U[T]}}function da(T){return function(U){return T==null?r:T[U]}}function gu(T,U,F,te,we){return we(T,function(je,Ft,Je){F=te?(te=!1,je):U(F,je,Ft,Je)}),F}function bp(T,U){var F=T.length;for(T.sort(U);F--;)T[F]=T[F].value;return T}function ga(T,U){for(var F,te=-1,we=T.length;++te<we;){var je=U(T[te]);je!==r&&(F=F===r?je:F+je)}return F}function ya(T,U){for(var F=-1,te=Array(T);++F<T;)te[F]=U(F);return te}function Ep(T,U){return nt(U,function(F){return[F,T[F]]})}function yu(T){return T&&T.slice(0,_u(T)+1).replace(gt,"")}function vr(T){return function(U){return T(U)}}function va(T,U){return nt(U,function(F){return T[F]})}function Ln(T,U){return T.has(U)}function vu(T,U){for(var F=-1,te=T.length;++F<te&&an(U,T[F],0)>-1;);return F}function mu(T,U){for(var F=T.length;F--&&an(U,T[F],0)>-1;);return F}function Ip(T,U){for(var F=T.length,te=0;F--;)T[F]===U&&++te;return te}var xp=da(y),Pp=da(C);function Sp(T){return"\\"+ee[T]}function Op(T,U){return T==null?r:T[U]}function cn(T){return Ns.test(T)}function Ap(T){return Li.test(T)}function Cp(T){for(var U,F=[];!(U=T.next()).done;)F.push(U.value);return F}function ma(T){var U=-1,F=Array(T.size);return T.forEach(function(te,we){F[++U]=[we,te]}),F}function wu(T,U){return function(F){return T(U(F))}}function wi(T,U){for(var F=-1,te=T.length,we=0,je=[];++F<te;){var Ft=T[F];(Ft===U||Ft===E)&&(T[F]=E,je[we++]=F)}return je}function Ls(T){var U=-1,F=Array(T.size);return T.forEach(function(te){F[++U]=te}),F}function Tp(T){var U=-1,F=Array(T.size);return T.forEach(function(te){F[++U]=[te,te]}),F}function Rp(T,U,F){for(var te=F-1,we=T.length;++te<we;)if(T[te]===U)return te;return-1}function Np(T,U,F){for(var te=F+1;te--;)if(T[te]===U)return te;return te}function un(T){return cn(T)?Dp(T):vp(T)}function Lr(T){return cn(T)?Fp(T):mp(T)}function _u(T){for(var U=T.length;U--&&wt.test(T.charAt(U)););return U}var $p=da(K);function Dp(T){for(var U=on.lastIndex=0;on.test(T);)++U;return U}function Fp(T){return T.match(on)||[]}function Lp(T){return T.match(Rs)||[]}var jp=function T(U){U=U==null?Re:hn.defaults(Re.Object(),U,hn.pick(Re,$s));var F=U.Array,te=U.Date,we=U.Error,je=U.Function,Ft=U.Math,Je=U.Object,wa=U.RegExp,Mp=U.String,Sr=U.TypeError,js=F.prototype,qp=je.prototype,ln=Je.prototype,Ms=U["__core-js_shared__"],qs=qp.toString,ze=ln.hasOwnProperty,Up=0,bu=function(){var e=/[^.]+$/.exec(Ms&&Ms.keys&&Ms.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Us=ln.toString,zp=qs.call(Je),Hp=Re._,kp=wa("^"+qs.call(ze).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zs=or?U.Buffer:r,_i=U.Symbol,Hs=U.Uint8Array,Eu=zs?zs.allocUnsafe:r,ks=wu(Je.getPrototypeOf,Je),Iu=Je.create,xu=ln.propertyIsEnumerable,Ks=js.splice,Pu=_i?_i.isConcatSpreadable:r,jn=_i?_i.iterator:r,Mi=_i?_i.toStringTag:r,Vs=function(){try{var e=ki(Je,"defineProperty");return e({},"",{}),e}catch{}}(),Kp=U.clearTimeout!==Re.clearTimeout&&U.clearTimeout,Vp=te&&te.now!==Re.Date.now&&te.now,Bp=U.setTimeout!==Re.setTimeout&&U.setTimeout,Bs=Ft.ceil,Gs=Ft.floor,_a=Je.getOwnPropertySymbols,Gp=zs?zs.isBuffer:r,Su=U.isFinite,Wp=js.join,Jp=wu(Je.keys,Je),Lt=Ft.max,Bt=Ft.min,Qp=te.now,Yp=U.parseInt,Ou=Ft.random,Zp=js.reverse,ba=ki(U,"DataView"),Mn=ki(U,"Map"),Ea=ki(U,"Promise"),fn=ki(U,"Set"),qn=ki(U,"WeakMap"),Un=ki(Je,"create"),Ws=qn&&new qn,pn={},Xp=Ki(ba),ed=Ki(Mn),td=Ki(Ea),rd=Ki(fn),id=Ki(qn),Js=_i?_i.prototype:r,zn=Js?Js.valueOf:r,Au=Js?Js.toString:r;function p(e){if(vt(e)&&!be(e)&&!(e instanceof Te)){if(e instanceof Or)return e;if(ze.call(e,"__wrapped__"))return Ch(e)}return new Or(e)}var dn=function(){function e(){}return function(i){if(!ut(i))return{};if(Iu)return Iu(i);e.prototype=i;var o=new e;return e.prototype=r,o}}();function Qs(){}function Or(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}p.templateSettings={escape:ft,evaluate:pt,interpolate:ct,variable:"",imports:{_:p}},p.prototype=Qs.prototype,p.prototype.constructor=p,Or.prototype=dn(Qs.prototype),Or.prototype.constructor=Or;function Te(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function nd(){var e=new Te(this.__wrapped__);return e.__actions__=ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ar(this.__views__),e}function sd(){if(this.__filtered__){var e=new Te(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function od(){var e=this.__wrapped__.value(),i=this.__dir__,o=be(e),c=i<0,l=o?e.length:0,d=mg(0,l,this.__views__),w=d.start,I=d.end,R=I-w,H=c?I:w-1,k=this.__iteratees__,B=k.length,Z=0,se=Bt(R,this.__takeCount__);if(!o||!c&&l==R&&se==R)return Zu(e,this.__actions__);var de=[];e:for(;R--&&Z<se;){H+=i;for(var Pe=-1,ge=e[H];++Pe<B;){var Oe=k[Pe],Ne=Oe.iteratee,_r=Oe.type,tr=Ne(ge);if(_r==_)ge=tr;else if(!tr){if(_r==x)continue e;break e}}de[Z++]=ge}return de}Te.prototype=dn(Qs.prototype),Te.prototype.constructor=Te;function qi(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var c=e[i];this.set(c[0],c[1])}}function ad(){this.__data__=Un?Un(null):{},this.size=0}function cd(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function ud(e){var i=this.__data__;if(Un){var o=i[e];return o===m?r:o}return ze.call(i,e)?i[e]:r}function hd(e){var i=this.__data__;return Un?i[e]!==r:ze.call(i,e)}function ld(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Un&&i===r?m:i,this}qi.prototype.clear=ad,qi.prototype.delete=cd,qi.prototype.get=ud,qi.prototype.has=hd,qi.prototype.set=ld;function ti(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var c=e[i];this.set(c[0],c[1])}}function fd(){this.__data__=[],this.size=0}function pd(e){var i=this.__data__,o=Ys(i,e);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():Ks.call(i,o,1),--this.size,!0}function dd(e){var i=this.__data__,o=Ys(i,e);return o<0?r:i[o][1]}function gd(e){return Ys(this.__data__,e)>-1}function yd(e,i){var o=this.__data__,c=Ys(o,e);return c<0?(++this.size,o.push([e,i])):o[c][1]=i,this}ti.prototype.clear=fd,ti.prototype.delete=pd,ti.prototype.get=dd,ti.prototype.has=gd,ti.prototype.set=yd;function ri(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var c=e[i];this.set(c[0],c[1])}}function vd(){this.size=0,this.__data__={hash:new qi,map:new(Mn||ti),string:new qi}}function md(e){var i=uo(this,e).delete(e);return this.size-=i?1:0,i}function wd(e){return uo(this,e).get(e)}function _d(e){return uo(this,e).has(e)}function bd(e,i){var o=uo(this,e),c=o.size;return o.set(e,i),this.size+=o.size==c?0:1,this}ri.prototype.clear=vd,ri.prototype.delete=md,ri.prototype.get=wd,ri.prototype.has=_d,ri.prototype.set=bd;function Ui(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new ri;++i<o;)this.add(e[i])}function Ed(e){return this.__data__.set(e,m),this}function Id(e){return this.__data__.has(e)}Ui.prototype.add=Ui.prototype.push=Ed,Ui.prototype.has=Id;function jr(e){var i=this.__data__=new ti(e);this.size=i.size}function xd(){this.__data__=new ti,this.size=0}function Pd(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function Sd(e){return this.__data__.get(e)}function Od(e){return this.__data__.has(e)}function Ad(e,i){var o=this.__data__;if(o instanceof ti){var c=o.__data__;if(!Mn||c.length<a-1)return c.push([e,i]),this.size=++o.size,this;o=this.__data__=new ri(c)}return o.set(e,i),this.size=o.size,this}jr.prototype.clear=xd,jr.prototype.delete=Pd,jr.prototype.get=Sd,jr.prototype.has=Od,jr.prototype.set=Ad;function Cu(e,i){var o=be(e),c=!o&&Vi(e),l=!o&&!c&&Pi(e),d=!o&&!c&&!l&&mn(e),w=o||c||l||d,I=w?ya(e.length,Mp):[],R=I.length;for(var H in e)(i||ze.call(e,H))&&!(w&&(H=="length"||l&&(H=="offset"||H=="parent")||d&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||oi(H,R)))&&I.push(H);return I}function Tu(e){var i=e.length;return i?e[$a(0,i-1)]:r}function Cd(e,i){return ho(ar(e),zi(i,0,e.length))}function Td(e){return ho(ar(e))}function Ia(e,i,o){(o!==r&&!Mr(e[i],o)||o===r&&!(i in e))&&ii(e,i,o)}function Hn(e,i,o){var c=e[i];(!(ze.call(e,i)&&Mr(c,o))||o===r&&!(i in e))&&ii(e,i,o)}function Ys(e,i){for(var o=e.length;o--;)if(Mr(e[o][0],i))return o;return-1}function Rd(e,i,o,c){return bi(e,function(l,d,w){i(c,l,o(l),w)}),c}function Ru(e,i){return e&&Gr(i,qt(i),e)}function Nd(e,i){return e&&Gr(i,ur(i),e)}function ii(e,i,o){i=="__proto__"&&Vs?Vs(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function xa(e,i){for(var o=-1,c=i.length,l=F(c),d=e==null;++o<c;)l[o]=d?r:nc(e,i[o]);return l}function zi(e,i,o){return e===e&&(o!==r&&(e=e<=o?e:o),i!==r&&(e=e>=i?e:i)),e}function Ar(e,i,o,c,l,d){var w,I=i&S,R=i&j,H=i&z;if(o&&(w=l?o(e,c,l,d):o(e)),w!==r)return w;if(!ut(e))return e;var k=be(e);if(k){if(w=_g(e),!I)return ar(e,w)}else{var B=Gt(e),Z=B==ne||B==me;if(Pi(e))return th(e,I);if(B==Ce||B==Ie||Z&&!l){if(w=R||Z?{}:_h(e),!I)return R?ug(e,Nd(w,e)):cg(e,Ru(w,e))}else{if(!Ke[B])return l?e:{};w=bg(e,B,I)}}d||(d=new jr);var se=d.get(e);if(se)return se;d.set(e,w),Jh(e)?e.forEach(function(ge){w.add(Ar(ge,i,o,ge,e,d))}):Gh(e)&&e.forEach(function(ge,Oe){w.set(Oe,Ar(ge,i,o,Oe,e,d))});var de=H?R?Ka:ka:R?ur:qt,Pe=k?r:de(e);return Pr(Pe||e,function(ge,Oe){Pe&&(Oe=ge,ge=e[Oe]),Hn(w,Oe,Ar(ge,i,o,Oe,e,d))}),w}function $d(e){var i=qt(e);return function(o){return Nu(o,e,i)}}function Nu(e,i,o){var c=o.length;if(e==null)return!c;for(e=Je(e);c--;){var l=o[c],d=i[l],w=e[l];if(w===r&&!(l in e)||!d(w))return!1}return!0}function $u(e,i,o){if(typeof e!="function")throw new Sr(f);return Jn(function(){e.apply(r,o)},i)}function kn(e,i,o,c){var l=-1,d=Ds,w=!0,I=e.length,R=[],H=i.length;if(!I)return R;o&&(i=nt(i,vr(o))),c?(d=ha,w=!1):i.length>=a&&(d=Ln,w=!1,i=new Ui(i));e:for(;++l<I;){var k=e[l],B=o==null?k:o(k);if(k=c||k!==0?k:0,w&&B===B){for(var Z=H;Z--;)if(i[Z]===B)continue e;R.push(k)}else d(i,B,c)||R.push(k)}return R}var bi=oh(Br),Du=oh(Sa,!0);function Dd(e,i){var o=!0;return bi(e,function(c,l,d){return o=!!i(c,l,d),o}),o}function Zs(e,i,o){for(var c=-1,l=e.length;++c<l;){var d=e[c],w=i(d);if(w!=null&&(I===r?w===w&&!wr(w):o(w,I)))var I=w,R=d}return R}function Fd(e,i,o,c){var l=e.length;for(o=Ee(o),o<0&&(o=-o>l?0:l+o),c=c===r||c>l?l:Ee(c),c<0&&(c+=l),c=o>c?0:Yh(c);o<c;)e[o++]=i;return e}function Fu(e,i){var o=[];return bi(e,function(c,l,d){i(c,l,d)&&o.push(c)}),o}function Kt(e,i,o,c,l){var d=-1,w=e.length;for(o||(o=Ig),l||(l=[]);++d<w;){var I=e[d];i>0&&o(I)?i>1?Kt(I,i-1,o,c,l):mi(l,I):c||(l[l.length]=I)}return l}var Pa=ah(),Lu=ah(!0);function Br(e,i){return e&&Pa(e,i,qt)}function Sa(e,i){return e&&Lu(e,i,qt)}function Xs(e,i){return vi(i,function(o){return ai(e[o])})}function Hi(e,i){i=Ii(i,e);for(var o=0,c=i.length;e!=null&&o<c;)e=e[Wr(i[o++])];return o&&o==c?e:r}function ju(e,i,o){var c=i(e);return be(e)?c:mi(c,o(e))}function Xt(e){return e==null?e===r?at:Le:Mi&&Mi in Je(e)?vg(e):Tg(e)}function Oa(e,i){return e>i}function Ld(e,i){return e!=null&&ze.call(e,i)}function jd(e,i){return e!=null&&i in Je(e)}function Md(e,i,o){return e>=Bt(i,o)&&e<Lt(i,o)}function Aa(e,i,o){for(var c=o?ha:Ds,l=e[0].length,d=e.length,w=d,I=F(d),R=1/0,H=[];w--;){var k=e[w];w&&i&&(k=nt(k,vr(i))),R=Bt(k.length,R),I[w]=!o&&(i||l>=120&&k.length>=120)?new Ui(w&&k):r}k=e[0];var B=-1,Z=I[0];e:for(;++B<l&&H.length<R;){var se=k[B],de=i?i(se):se;if(se=o||se!==0?se:0,!(Z?Ln(Z,de):c(H,de,o))){for(w=d;--w;){var Pe=I[w];if(!(Pe?Ln(Pe,de):c(e[w],de,o)))continue e}Z&&Z.push(de),H.push(se)}}return H}function qd(e,i,o,c){return Br(e,function(l,d,w){i(c,o(l),d,w)}),c}function Kn(e,i,o){i=Ii(i,e),e=xh(e,i);var c=e==null?e:e[Wr(Tr(i))];return c==null?r:Mt(c,e,o)}function Mu(e){return vt(e)&&Xt(e)==Ie}function Ud(e){return vt(e)&&Xt(e)==Fe}function zd(e){return vt(e)&&Xt(e)==N}function Vn(e,i,o,c,l){return e===i?!0:e==null||i==null||!vt(e)&&!vt(i)?e!==e&&i!==i:Hd(e,i,o,c,Vn,l)}function Hd(e,i,o,c,l,d){var w=be(e),I=be(i),R=w?$r:Gt(e),H=I?$r:Gt(i);R=R==Ie?Ce:R,H=H==Ie?Ce:H;var k=R==Ce,B=H==Ce,Z=R==H;if(Z&&Pi(e)){if(!Pi(i))return!1;w=!0,k=!1}if(Z&&!k)return d||(d=new jr),w||mn(e)?vh(e,i,o,c,l,d):gg(e,i,R,o,c,l,d);if(!(o&$)){var se=k&&ze.call(e,"__wrapped__"),de=B&&ze.call(i,"__wrapped__");if(se||de){var Pe=se?e.value():e,ge=de?i.value():i;return d||(d=new jr),l(Pe,ge,o,c,d)}}return Z?(d||(d=new jr),yg(e,i,o,c,l,d)):!1}function kd(e){return vt(e)&&Gt(e)==xe}function Ca(e,i,o,c){var l=o.length,d=l,w=!c;if(e==null)return!d;for(e=Je(e);l--;){var I=o[l];if(w&&I[2]?I[1]!==e[I[0]]:!(I[0]in e))return!1}for(;++l<d;){I=o[l];var R=I[0],H=e[R],k=I[1];if(w&&I[2]){if(H===r&&!(R in e))return!1}else{var B=new jr;if(c)var Z=c(H,k,R,e,i,B);if(!(Z===r?Vn(k,H,$|ie,c,B):Z))return!1}}return!0}function qu(e){if(!ut(e)||Pg(e))return!1;var i=ai(e)?kp:Wo;return i.test(Ki(e))}function Kd(e){return vt(e)&&Xt(e)==ot}function Vd(e){return vt(e)&&Gt(e)==Me}function Bd(e){return vt(e)&&vo(e.length)&&!!Be[Xt(e)]}function Uu(e){return typeof e=="function"?e:e==null?hr:typeof e=="object"?be(e)?ku(e[0],e[1]):Hu(e):cl(e)}function Ta(e){if(!Wn(e))return Jp(e);var i=[];for(var o in Je(e))ze.call(e,o)&&o!="constructor"&&i.push(o);return i}function Gd(e){if(!ut(e))return Cg(e);var i=Wn(e),o=[];for(var c in e)c=="constructor"&&(i||!ze.call(e,c))||o.push(c);return o}function Ra(e,i){return e<i}function zu(e,i){var o=-1,c=cr(e)?F(e.length):[];return bi(e,function(l,d,w){c[++o]=i(l,d,w)}),c}function Hu(e){var i=Ba(e);return i.length==1&&i[0][2]?Eh(i[0][0],i[0][1]):function(o){return o===e||Ca(o,e,i)}}function ku(e,i){return Wa(e)&&bh(i)?Eh(Wr(e),i):function(o){var c=nc(o,e);return c===r&&c===i?sc(o,e):Vn(i,c,$|ie)}}function eo(e,i,o,c,l){e!==i&&Pa(i,function(d,w){if(l||(l=new jr),ut(d))Wd(e,i,w,o,eo,c,l);else{var I=c?c(Qa(e,w),d,w+"",e,i,l):r;I===r&&(I=d),Ia(e,w,I)}},ur)}function Wd(e,i,o,c,l,d,w){var I=Qa(e,o),R=Qa(i,o),H=w.get(R);if(H){Ia(e,o,H);return}var k=d?d(I,R,o+"",e,i,w):r,B=k===r;if(B){var Z=be(R),se=!Z&&Pi(R),de=!Z&&!se&&mn(R);k=R,Z||se||de?be(I)?k=I:bt(I)?k=ar(I):se?(B=!1,k=th(R,!0)):de?(B=!1,k=rh(R,!0)):k=[]:Qn(R)||Vi(R)?(k=I,Vi(I)?k=Zh(I):(!ut(I)||ai(I))&&(k=_h(R))):B=!1}B&&(w.set(R,k),l(k,R,c,d,w),w.delete(R)),Ia(e,o,k)}function Ku(e,i){var o=e.length;if(o)return i+=i<0?o:0,oi(i,o)?e[i]:r}function Vu(e,i,o){i.length?i=nt(i,function(d){return be(d)?function(w){return Hi(w,d.length===1?d[0]:d)}:d}):i=[hr];var c=-1;i=nt(i,vr(pe()));var l=zu(e,function(d,w,I){var R=nt(i,function(H){return H(d)});return{criteria:R,index:++c,value:d}});return bp(l,function(d,w){return ag(d,w,o)})}function Jd(e,i){return Bu(e,i,function(o,c){return sc(e,c)})}function Bu(e,i,o){for(var c=-1,l=i.length,d={};++c<l;){var w=i[c],I=Hi(e,w);o(I,w)&&Bn(d,Ii(w,e),I)}return d}function Qd(e){return function(i){return Hi(i,e)}}function Na(e,i,o,c){var l=c?_p:an,d=-1,w=i.length,I=e;for(e===i&&(i=ar(i)),o&&(I=nt(e,vr(o)));++d<w;)for(var R=0,H=i[d],k=o?o(H):H;(R=l(I,k,R,c))>-1;)I!==e&&Ks.call(I,R,1),Ks.call(e,R,1);return e}function Gu(e,i){for(var o=e?i.length:0,c=o-1;o--;){var l=i[o];if(o==c||l!==d){var d=l;oi(l)?Ks.call(e,l,1):La(e,l)}}return e}function $a(e,i){return e+Gs(Ou()*(i-e+1))}function Yd(e,i,o,c){for(var l=-1,d=Lt(Bs((i-e)/(o||1)),0),w=F(d);d--;)w[c?d:++l]=e,e+=o;return w}function Da(e,i){var o="";if(!e||i<1||i>W)return o;do i%2&&(o+=e),i=Gs(i/2),i&&(e+=e);while(i);return o}function Se(e,i){return Ya(Ih(e,i,hr),e+"")}function Zd(e){return Tu(wn(e))}function Xd(e,i){var o=wn(e);return ho(o,zi(i,0,o.length))}function Bn(e,i,o,c){if(!ut(e))return e;i=Ii(i,e);for(var l=-1,d=i.length,w=d-1,I=e;I!=null&&++l<d;){var R=Wr(i[l]),H=o;if(R==="__proto__"||R==="constructor"||R==="prototype")return e;if(l!=w){var k=I[R];H=c?c(k,R,I):r,H===r&&(H=ut(k)?k:oi(i[l+1])?[]:{})}Hn(I,R,H),I=I[R]}return e}var Wu=Ws?function(e,i){return Ws.set(e,i),e}:hr,eg=Vs?function(e,i){return Vs(e,"toString",{configurable:!0,enumerable:!1,value:ac(i),writable:!0})}:hr;function tg(e){return ho(wn(e))}function Cr(e,i,o){var c=-1,l=e.length;i<0&&(i=-i>l?0:l+i),o=o>l?l:o,o<0&&(o+=l),l=i>o?0:o-i>>>0,i>>>=0;for(var d=F(l);++c<l;)d[c]=e[c+i];return d}function rg(e,i){var o;return bi(e,function(c,l,d){return o=i(c,l,d),!o}),!!o}function to(e,i,o){var c=0,l=e==null?c:e.length;if(typeof i=="number"&&i===i&&l<=Ae){for(;c<l;){var d=c+l>>>1,w=e[d];w!==null&&!wr(w)&&(o?w<=i:w<i)?c=d+1:l=d}return l}return Fa(e,i,hr,o)}function Fa(e,i,o,c){var l=0,d=e==null?0:e.length;if(d===0)return 0;i=o(i);for(var w=i!==i,I=i===null,R=wr(i),H=i===r;l<d;){var k=Gs((l+d)/2),B=o(e[k]),Z=B!==r,se=B===null,de=B===B,Pe=wr(B);if(w)var ge=c||de;else H?ge=de&&(c||Z):I?ge=de&&Z&&(c||!se):R?ge=de&&Z&&!se&&(c||!Pe):se||Pe?ge=!1:ge=c?B<=i:B<i;ge?l=k+1:d=k}return Bt(d,he)}function Ju(e,i){for(var o=-1,c=e.length,l=0,d=[];++o<c;){var w=e[o],I=i?i(w):w;if(!o||!Mr(I,R)){var R=I;d[l++]=w===0?0:w}}return d}function Qu(e){return typeof e=="number"?e:wr(e)?V:+e}function mr(e){if(typeof e=="string")return e;if(be(e))return nt(e,mr)+"";if(wr(e))return Au?Au.call(e):"";var i=e+"";return i=="0"&&1/e==-X?"-0":i}function Ei(e,i,o){var c=-1,l=Ds,d=e.length,w=!0,I=[],R=I;if(o)w=!1,l=ha;else if(d>=a){var H=i?null:pg(e);if(H)return Ls(H);w=!1,l=Ln,R=new Ui}else R=i?[]:I;e:for(;++c<d;){var k=e[c],B=i?i(k):k;if(k=o||k!==0?k:0,w&&B===B){for(var Z=R.length;Z--;)if(R[Z]===B)continue e;i&&R.push(B),I.push(k)}else l(R,B,o)||(R!==I&&R.push(B),I.push(k))}return I}function La(e,i){return i=Ii(i,e),e=xh(e,i),e==null||delete e[Wr(Tr(i))]}function Yu(e,i,o,c){return Bn(e,i,o(Hi(e,i)),c)}function ro(e,i,o,c){for(var l=e.length,d=c?l:-1;(c?d--:++d<l)&&i(e[d],d,e););return o?Cr(e,c?0:d,c?d+1:l):Cr(e,c?d+1:0,c?l:d)}function Zu(e,i){var o=e;return o instanceof Te&&(o=o.value()),la(i,function(c,l){return l.func.apply(l.thisArg,mi([c],l.args))},o)}function ja(e,i,o){var c=e.length;if(c<2)return c?Ei(e[0]):[];for(var l=-1,d=F(c);++l<c;)for(var w=e[l],I=-1;++I<c;)I!=l&&(d[l]=kn(d[l]||w,e[I],i,o));return Ei(Kt(d,1),i,o)}function Xu(e,i,o){for(var c=-1,l=e.length,d=i.length,w={};++c<l;){var I=c<d?i[c]:r;o(w,e[c],I)}return w}function Ma(e){return bt(e)?e:[]}function qa(e){return typeof e=="function"?e:hr}function Ii(e,i){return be(e)?e:Wa(e,i)?[e]:Ah(qe(e))}var ig=Se;function xi(e,i,o){var c=e.length;return o=o===r?c:o,!i&&o>=c?e:Cr(e,i,o)}var eh=Kp||function(e){return Re.clearTimeout(e)};function th(e,i){if(i)return e.slice();var o=e.length,c=Eu?Eu(o):new e.constructor(o);return e.copy(c),c}function Ua(e){var i=new e.constructor(e.byteLength);return new Hs(i).set(new Hs(e)),i}function ng(e,i){var o=i?Ua(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function sg(e){var i=new e.constructor(e.source,Ir.exec(e));return i.lastIndex=e.lastIndex,i}function og(e){return zn?Je(zn.call(e)):{}}function rh(e,i){var o=i?Ua(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function ih(e,i){if(e!==i){var o=e!==r,c=e===null,l=e===e,d=wr(e),w=i!==r,I=i===null,R=i===i,H=wr(i);if(!I&&!H&&!d&&e>i||d&&w&&R&&!I&&!H||c&&w&&R||!o&&R||!l)return 1;if(!c&&!d&&!H&&e<i||H&&o&&l&&!c&&!d||I&&o&&l||!w&&l||!R)return-1}return 0}function ag(e,i,o){for(var c=-1,l=e.criteria,d=i.criteria,w=l.length,I=o.length;++c<w;){var R=ih(l[c],d[c]);if(R){if(c>=I)return R;var H=o[c];return R*(H=="desc"?-1:1)}}return e.index-i.index}function nh(e,i,o,c){for(var l=-1,d=e.length,w=o.length,I=-1,R=i.length,H=Lt(d-w,0),k=F(R+H),B=!c;++I<R;)k[I]=i[I];for(;++l<w;)(B||l<d)&&(k[o[l]]=e[l]);for(;H--;)k[I++]=e[l++];return k}function sh(e,i,o,c){for(var l=-1,d=e.length,w=-1,I=o.length,R=-1,H=i.length,k=Lt(d-I,0),B=F(k+H),Z=!c;++l<k;)B[l]=e[l];for(var se=l;++R<H;)B[se+R]=i[R];for(;++w<I;)(Z||l<d)&&(B[se+o[w]]=e[l++]);return B}function ar(e,i){var o=-1,c=e.length;for(i||(i=F(c));++o<c;)i[o]=e[o];return i}function Gr(e,i,o,c){var l=!o;o||(o={});for(var d=-1,w=i.length;++d<w;){var I=i[d],R=c?c(o[I],e[I],I,o,e):r;R===r&&(R=e[I]),l?ii(o,I,R):Hn(o,I,R)}return o}function cg(e,i){return Gr(e,Ga(e),i)}function ug(e,i){return Gr(e,mh(e),i)}function io(e,i){return function(o,c){var l=be(o)?dp:Rd,d=i?i():{};return l(o,e,pe(c,2),d)}}function gn(e){return Se(function(i,o){var c=-1,l=o.length,d=l>1?o[l-1]:r,w=l>2?o[2]:r;for(d=e.length>3&&typeof d=="function"?(l--,d):r,w&&er(o[0],o[1],w)&&(d=l<3?r:d,l=1),i=Je(i);++c<l;){var I=o[c];I&&e(i,I,c,d)}return i})}function oh(e,i){return function(o,c){if(o==null)return o;if(!cr(o))return e(o,c);for(var l=o.length,d=i?l:-1,w=Je(o);(i?d--:++d<l)&&c(w[d],d,w)!==!1;);return o}}function ah(e){return function(i,o,c){for(var l=-1,d=Je(i),w=c(i),I=w.length;I--;){var R=w[e?I:++l];if(o(d[R],R,d)===!1)break}return i}}function hg(e,i,o){var c=i&ce,l=Gn(e);function d(){var w=this&&this!==Re&&this instanceof d?l:e;return w.apply(c?o:this,arguments)}return d}function ch(e){return function(i){i=qe(i);var o=cn(i)?Lr(i):r,c=o?o[0]:i.charAt(0),l=o?xi(o,1).join(""):i.slice(1);return c[e]()+l}}function yn(e){return function(i){return la(ol(sl(i).replace(Dn,"")),e,"")}}function Gn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=dn(e.prototype),c=e.apply(o,i);return ut(c)?c:o}}function lg(e,i,o){var c=Gn(e);function l(){for(var d=arguments.length,w=F(d),I=d,R=vn(l);I--;)w[I]=arguments[I];var H=d<3&&w[0]!==R&&w[d-1]!==R?[]:wi(w,R);if(d-=H.length,d<o)return ph(e,i,no,l.placeholder,r,w,H,r,r,o-d);var k=this&&this!==Re&&this instanceof l?c:e;return Mt(k,this,w)}return l}function uh(e){return function(i,o,c){var l=Je(i);if(!cr(i)){var d=pe(o,3);i=qt(i),o=function(I){return d(l[I],I,l)}}var w=e(i,o,c);return w>-1?l[d?i[w]:w]:r}}function hh(e){return si(function(i){var o=i.length,c=o,l=Or.prototype.thru;for(e&&i.reverse();c--;){var d=i[c];if(typeof d!="function")throw new Sr(f);if(l&&!w&&co(d)=="wrapper")var w=new Or([],!0)}for(c=w?c:o;++c<o;){d=i[c];var I=co(d),R=I=="wrapper"?Va(d):r;R&&Ja(R[0])&&R[1]==(re|le|ye|Q)&&!R[4].length&&R[9]==1?w=w[co(R[0])].apply(w,R[3]):w=d.length==1&&Ja(d)?w[I]():w.thru(d)}return function(){var H=arguments,k=H[0];if(w&&H.length==1&&be(k))return w.plant(k).value();for(var B=0,Z=o?i[B].apply(this,H):k;++B<o;)Z=i[B].call(this,Z);return Z}})}function no(e,i,o,c,l,d,w,I,R,H){var k=i&re,B=i&ce,Z=i&ue,se=i&(le|ae),de=i&He,Pe=Z?r:Gn(e);function ge(){for(var Oe=arguments.length,Ne=F(Oe),_r=Oe;_r--;)Ne[_r]=arguments[_r];if(se)var tr=vn(ge),br=Ip(Ne,tr);if(c&&(Ne=nh(Ne,c,l,se)),d&&(Ne=sh(Ne,d,w,se)),Oe-=br,se&&Oe<H){var Et=wi(Ne,tr);return ph(e,i,no,ge.placeholder,o,Ne,Et,I,R,H-Oe)}var qr=B?o:this,ui=Z?qr[e]:e;return Oe=Ne.length,I?Ne=Rg(Ne,I):de&&Oe>1&&Ne.reverse(),k&&R<Oe&&(Ne.length=R),this&&this!==Re&&this instanceof ge&&(ui=Pe||Gn(ui)),ui.apply(qr,Ne)}return ge}function lh(e,i){return function(o,c){return qd(o,e,i(c),{})}}function so(e,i){return function(o,c){var l;if(o===r&&c===r)return i;if(o!==r&&(l=o),c!==r){if(l===r)return c;typeof o=="string"||typeof c=="string"?(o=mr(o),c=mr(c)):(o=Qu(o),c=Qu(c)),l=e(o,c)}return l}}function za(e){return si(function(i){return i=nt(i,vr(pe())),Se(function(o){var c=this;return e(i,function(l){return Mt(l,c,o)})})})}function oo(e,i){i=i===r?" ":mr(i);var o=i.length;if(o<2)return o?Da(i,e):i;var c=Da(i,Bs(e/un(i)));return cn(i)?xi(Lr(c),0,e).join(""):c.slice(0,e)}function fg(e,i,o,c){var l=i&ce,d=Gn(e);function w(){for(var I=-1,R=arguments.length,H=-1,k=c.length,B=F(k+R),Z=this&&this!==Re&&this instanceof w?d:e;++H<k;)B[H]=c[H];for(;R--;)B[H++]=arguments[++I];return Mt(Z,l?o:this,B)}return w}function fh(e){return function(i,o,c){return c&&typeof c!="number"&&er(i,o,c)&&(o=c=r),i=ci(i),o===r?(o=i,i=0):o=ci(o),c=c===r?i<o?1:-1:ci(c),Yd(i,o,c,e)}}function ao(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Rr(i),o=Rr(o)),e(i,o)}}function ph(e,i,o,c,l,d,w,I,R,H){var k=i&le,B=k?w:r,Z=k?r:w,se=k?d:r,de=k?r:d;i|=k?ye:ve,i&=~(k?ve:ye),i&fe||(i&=~(ce|ue));var Pe=[e,i,l,se,B,de,Z,I,R,H],ge=o.apply(r,Pe);return Ja(e)&&Ph(ge,Pe),ge.placeholder=c,Sh(ge,e,i)}function Ha(e){var i=Ft[e];return function(o,c){if(o=Rr(o),c=c==null?0:Bt(Ee(c),292),c&&Su(o)){var l=(qe(o)+"e").split("e"),d=i(l[0]+"e"+(+l[1]+c));return l=(qe(d)+"e").split("e"),+(l[0]+"e"+(+l[1]-c))}return i(o)}}var pg=fn&&1/Ls(new fn([,-0]))[1]==X?function(e){return new fn(e)}:hc;function dh(e){return function(i){var o=Gt(i);return o==xe?ma(i):o==Me?Tp(i):Ep(i,e(i))}}function ni(e,i,o,c,l,d,w,I){var R=i&ue;if(!R&&typeof e!="function")throw new Sr(f);var H=c?c.length:0;if(H||(i&=~(ye|ve),c=l=r),w=w===r?w:Lt(Ee(w),0),I=I===r?I:Ee(I),H-=l?l.length:0,i&ve){var k=c,B=l;c=l=r}var Z=R?r:Va(e),se=[e,i,o,c,l,k,B,d,w,I];if(Z&&Ag(se,Z),e=se[0],i=se[1],o=se[2],c=se[3],l=se[4],I=se[9]=se[9]===r?R?0:e.length:Lt(se[9]-H,0),!I&&i&(le|ae)&&(i&=~(le|ae)),!i||i==ce)var de=hg(e,i,o);else i==le||i==ae?de=lg(e,i,I):(i==ye||i==(ce|ye))&&!l.length?de=fg(e,i,o,c):de=no.apply(r,se);var Pe=Z?Wu:Ph;return Sh(Pe(de,se),e,i)}function gh(e,i,o,c){return e===r||Mr(e,ln[o])&&!ze.call(c,o)?i:e}function yh(e,i,o,c,l,d){return ut(e)&&ut(i)&&(d.set(i,e),eo(e,i,r,yh,d),d.delete(i)),e}function dg(e){return Qn(e)?r:e}function vh(e,i,o,c,l,d){var w=o&$,I=e.length,R=i.length;if(I!=R&&!(w&&R>I))return!1;var H=d.get(e),k=d.get(i);if(H&&k)return H==i&&k==e;var B=-1,Z=!0,se=o&ie?new Ui:r;for(d.set(e,i),d.set(i,e);++B<I;){var de=e[B],Pe=i[B];if(c)var ge=w?c(Pe,de,B,i,e,d):c(de,Pe,B,e,i,d);if(ge!==r){if(ge)continue;Z=!1;break}if(se){if(!fa(i,function(Oe,Ne){if(!Ln(se,Ne)&&(de===Oe||l(de,Oe,o,c,d)))return se.push(Ne)})){Z=!1;break}}else if(!(de===Pe||l(de,Pe,o,c,d))){Z=!1;break}}return d.delete(e),d.delete(i),Z}function gg(e,i,o,c,l,d,w){switch(o){case Ve:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Fe:return!(e.byteLength!=i.byteLength||!d(new Hs(e),new Hs(i)));case L:case N:case De:return Mr(+e,+i);case P:return e.name==i.name&&e.message==i.message;case ot:case Ye:return e==i+"";case xe:var I=ma;case Me:var R=c&$;if(I||(I=Ls),e.size!=i.size&&!R)return!1;var H=w.get(e);if(H)return H==i;c|=ie,w.set(e,i);var k=vh(I(e),I(i),c,l,d,w);return w.delete(e),k;case Ze:if(zn)return zn.call(e)==zn.call(i)}return!1}function yg(e,i,o,c,l,d){var w=o&$,I=ka(e),R=I.length,H=ka(i),k=H.length;if(R!=k&&!w)return!1;for(var B=R;B--;){var Z=I[B];if(!(w?Z in i:ze.call(i,Z)))return!1}var se=d.get(e),de=d.get(i);if(se&&de)return se==i&&de==e;var Pe=!0;d.set(e,i),d.set(i,e);for(var ge=w;++B<R;){Z=I[B];var Oe=e[Z],Ne=i[Z];if(c)var _r=w?c(Ne,Oe,Z,i,e,d):c(Oe,Ne,Z,e,i,d);if(!(_r===r?Oe===Ne||l(Oe,Ne,o,c,d):_r)){Pe=!1;break}ge||(ge=Z=="constructor")}if(Pe&&!ge){var tr=e.constructor,br=i.constructor;tr!=br&&"constructor"in e&&"constructor"in i&&!(typeof tr=="function"&&tr instanceof tr&&typeof br=="function"&&br instanceof br)&&(Pe=!1)}return d.delete(e),d.delete(i),Pe}function si(e){return Ya(Ih(e,r,Nh),e+"")}function ka(e){return ju(e,qt,Ga)}function Ka(e){return ju(e,ur,mh)}var Va=Ws?function(e){return Ws.get(e)}:hc;function co(e){for(var i=e.name+"",o=pn[i],c=ze.call(pn,i)?o.length:0;c--;){var l=o[c],d=l.func;if(d==null||d==e)return l.name}return i}function vn(e){var i=ze.call(p,"placeholder")?p:e;return i.placeholder}function pe(){var e=p.iteratee||cc;return e=e===cc?Uu:e,arguments.length?e(arguments[0],arguments[1]):e}function uo(e,i){var o=e.__data__;return xg(i)?o[typeof i=="string"?"string":"hash"]:o.map}function Ba(e){for(var i=qt(e),o=i.length;o--;){var c=i[o],l=e[c];i[o]=[c,l,bh(l)]}return i}function ki(e,i){var o=Op(e,i);return qu(o)?o:r}function vg(e){var i=ze.call(e,Mi),o=e[Mi];try{e[Mi]=r;var c=!0}catch{}var l=Us.call(e);return c&&(i?e[Mi]=o:delete e[Mi]),l}var Ga=_a?function(e){return e==null?[]:(e=Je(e),vi(_a(e),function(i){return xu.call(e,i)}))}:lc,mh=_a?function(e){for(var i=[];e;)mi(i,Ga(e)),e=ks(e);return i}:lc,Gt=Xt;(ba&&Gt(new ba(new ArrayBuffer(1)))!=Ve||Mn&&Gt(new Mn)!=xe||Ea&&Gt(Ea.resolve())!=xt||fn&&Gt(new fn)!=Me||qn&&Gt(new qn)!=ke)&&(Gt=function(e){var i=Xt(e),o=i==Ce?e.constructor:r,c=o?Ki(o):"";if(c)switch(c){case Xp:return Ve;case ed:return xe;case td:return xt;case rd:return Me;case id:return ke}return i});function mg(e,i,o){for(var c=-1,l=o.length;++c<l;){var d=o[c],w=d.size;switch(d.type){case"drop":e+=w;break;case"dropRight":i-=w;break;case"take":i=Bt(i,e+w);break;case"takeRight":e=Lt(e,i-w);break}}return{start:e,end:i}}function wg(e){var i=e.match(Qe);return i?i[1].split(Ct):[]}function wh(e,i,o){i=Ii(i,e);for(var c=-1,l=i.length,d=!1;++c<l;){var w=Wr(i[c]);if(!(d=e!=null&&o(e,w)))break;e=e[w]}return d||++c!=l?d:(l=e==null?0:e.length,!!l&&vo(l)&&oi(w,l)&&(be(e)||Vi(e)))}function _g(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&ze.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function _h(e){return typeof e.constructor=="function"&&!Wn(e)?dn(ks(e)):{}}function bg(e,i,o){var c=e.constructor;switch(i){case Fe:return Ua(e);case L:case N:return new c(+e);case Ve:return ng(e,o);case ht:case Ue:case Pt:case Dt:case Ht:case kt:case jt:case Qt:case sr:return rh(e,o);case xe:return new c;case De:case Ye:return new c(e);case ot:return sg(e);case Me:return new c;case Ze:return og(e)}}function Eg(e,i){var o=i.length;if(!o)return e;var c=o-1;return i[c]=(o>1?"& ":"")+i[c],i=i.join(o>2?", ":" "),e.replace(yt,`{
/* [wrapped with `+i+`] */
`)}function Ig(e){return be(e)||Vi(e)||!!(Pu&&e&&e[Pu])}function oi(e,i){var o=typeof e;return i=i??W,!!i&&(o=="number"||o!="symbol"&&Qo.test(e))&&e>-1&&e%1==0&&e<i}function er(e,i,o){if(!ut(o))return!1;var c=typeof i;return(c=="number"?cr(o)&&oi(i,o.length):c=="string"&&i in o)?Mr(o[i],e):!1}function Wa(e,i){if(be(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||wr(e)?!0:St.test(e)||!it.test(e)||i!=null&&e in Je(i)}function xg(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Ja(e){var i=co(e),o=p[i];if(typeof o!="function"||!(i in Te.prototype))return!1;if(e===o)return!0;var c=Va(o);return!!c&&e===c[0]}function Pg(e){return!!bu&&bu in e}var Sg=Ms?ai:fc;function Wn(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||ln;return e===o}function bh(e){return e===e&&!ut(e)}function Eh(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==r||e in Je(o))}}function Og(e){var i=go(e,function(c){return o.size===g&&o.clear(),c}),o=i.cache;return i}function Ag(e,i){var o=e[1],c=i[1],l=o|c,d=l<(ce|ue|re),w=c==re&&o==le||c==re&&o==Q&&e[7].length<=i[8]||c==(re|Q)&&i[7].length<=i[8]&&o==le;if(!(d||w))return e;c&ce&&(e[2]=i[2],l|=o&ce?0:fe);var I=i[3];if(I){var R=e[3];e[3]=R?nh(R,I,i[4]):I,e[4]=R?wi(e[3],E):i[4]}return I=i[5],I&&(R=e[5],e[5]=R?sh(R,I,i[6]):I,e[6]=R?wi(e[5],E):i[6]),I=i[7],I&&(e[7]=I),c&re&&(e[8]=e[8]==null?i[8]:Bt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=l,e}function Cg(e){var i=[];if(e!=null)for(var o in Je(e))i.push(o);return i}function Tg(e){return Us.call(e)}function Ih(e,i,o){return i=Lt(i===r?e.length-1:i,0),function(){for(var c=arguments,l=-1,d=Lt(c.length-i,0),w=F(d);++l<d;)w[l]=c[i+l];l=-1;for(var I=F(i+1);++l<i;)I[l]=c[l];return I[i]=o(w),Mt(e,this,I)}}function xh(e,i){return i.length<2?e:Hi(e,Cr(i,0,-1))}function Rg(e,i){for(var o=e.length,c=Bt(i.length,o),l=ar(e);c--;){var d=i[c];e[c]=oi(d,o)?l[d]:r}return e}function Qa(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Ph=Oh(Wu),Jn=Bp||function(e,i){return Re.setTimeout(e,i)},Ya=Oh(eg);function Sh(e,i,o){var c=i+"";return Ya(e,Eg(c,Ng(wg(c),o)))}function Oh(e){var i=0,o=0;return function(){var c=Qp(),l=q-(c-o);if(o=c,l>0){if(++i>=A)return arguments[0]}else i=0;return e.apply(r,arguments)}}function ho(e,i){var o=-1,c=e.length,l=c-1;for(i=i===r?c:i;++o<i;){var d=$a(o,l),w=e[d];e[d]=e[o],e[o]=w}return e.length=i,e}var Ah=Og(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ot,function(o,c,l,d){i.push(l?d.replace(Ko,"$1"):c||o)}),i});function Wr(e){if(typeof e=="string"||wr(e))return e;var i=e+"";return i=="0"&&1/e==-X?"-0":i}function Ki(e){if(e!=null){try{return qs.call(e)}catch{}try{return e+""}catch{}}return""}function Ng(e,i){return Pr(Jt,function(o){var c="_."+o[0];i&o[1]&&!Ds(e,c)&&e.push(c)}),e.sort()}function Ch(e){if(e instanceof Te)return e.clone();var i=new Or(e.__wrapped__,e.__chain__);return i.__actions__=ar(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function $g(e,i,o){(o?er(e,i,o):i===r)?i=1:i=Lt(Ee(i),0);var c=e==null?0:e.length;if(!c||i<1)return[];for(var l=0,d=0,w=F(Bs(c/i));l<c;)w[d++]=Cr(e,l,l+=i);return w}function Dg(e){for(var i=-1,o=e==null?0:e.length,c=0,l=[];++i<o;){var d=e[i];d&&(l[c++]=d)}return l}function Fg(){var e=arguments.length;if(!e)return[];for(var i=F(e-1),o=arguments[0],c=e;c--;)i[c-1]=arguments[c];return mi(be(o)?ar(o):[o],Kt(i,1))}var Lg=Se(function(e,i){return bt(e)?kn(e,Kt(i,1,bt,!0)):[]}),jg=Se(function(e,i){var o=Tr(i);return bt(o)&&(o=r),bt(e)?kn(e,Kt(i,1,bt,!0),pe(o,2)):[]}),Mg=Se(function(e,i){var o=Tr(i);return bt(o)&&(o=r),bt(e)?kn(e,Kt(i,1,bt,!0),r,o):[]});function qg(e,i,o){var c=e==null?0:e.length;return c?(i=o||i===r?1:Ee(i),Cr(e,i<0?0:i,c)):[]}function Ug(e,i,o){var c=e==null?0:e.length;return c?(i=o||i===r?1:Ee(i),i=c-i,Cr(e,0,i<0?0:i)):[]}function zg(e,i){return e&&e.length?ro(e,pe(i,3),!0,!0):[]}function Hg(e,i){return e&&e.length?ro(e,pe(i,3),!0):[]}function kg(e,i,o,c){var l=e==null?0:e.length;return l?(o&&typeof o!="number"&&er(e,i,o)&&(o=0,c=l),Fd(e,i,o,c)):[]}function Th(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var l=o==null?0:Ee(o);return l<0&&(l=Lt(c+l,0)),Fs(e,pe(i,3),l)}function Rh(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var l=c-1;return o!==r&&(l=Ee(o),l=o<0?Lt(c+l,0):Bt(l,c-1)),Fs(e,pe(i,3),l,!0)}function Nh(e){var i=e==null?0:e.length;return i?Kt(e,1):[]}function Kg(e){var i=e==null?0:e.length;return i?Kt(e,X):[]}function Vg(e,i){var o=e==null?0:e.length;return o?(i=i===r?1:Ee(i),Kt(e,i)):[]}function Bg(e){for(var i=-1,o=e==null?0:e.length,c={};++i<o;){var l=e[i];c[l[0]]=l[1]}return c}function $h(e){return e&&e.length?e[0]:r}function Gg(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var l=o==null?0:Ee(o);return l<0&&(l=Lt(c+l,0)),an(e,i,l)}function Wg(e){var i=e==null?0:e.length;return i?Cr(e,0,-1):[]}var Jg=Se(function(e){var i=nt(e,Ma);return i.length&&i[0]===e[0]?Aa(i):[]}),Qg=Se(function(e){var i=Tr(e),o=nt(e,Ma);return i===Tr(o)?i=r:o.pop(),o.length&&o[0]===e[0]?Aa(o,pe(i,2)):[]}),Yg=Se(function(e){var i=Tr(e),o=nt(e,Ma);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===e[0]?Aa(o,r,i):[]});function Zg(e,i){return e==null?"":Wp.call(e,i)}function Tr(e){var i=e==null?0:e.length;return i?e[i-1]:r}function Xg(e,i,o){var c=e==null?0:e.length;if(!c)return-1;var l=c;return o!==r&&(l=Ee(o),l=l<0?Lt(c+l,0):Bt(l,c-1)),i===i?Np(e,i,l):Fs(e,pu,l,!0)}function ey(e,i){return e&&e.length?Ku(e,Ee(i)):r}var ty=Se(Dh);function Dh(e,i){return e&&e.length&&i&&i.length?Na(e,i):e}function ry(e,i,o){return e&&e.length&&i&&i.length?Na(e,i,pe(o,2)):e}function iy(e,i,o){return e&&e.length&&i&&i.length?Na(e,i,r,o):e}var ny=si(function(e,i){var o=e==null?0:e.length,c=xa(e,i);return Gu(e,nt(i,function(l){return oi(l,o)?+l:l}).sort(ih)),c});function sy(e,i){var o=[];if(!(e&&e.length))return o;var c=-1,l=[],d=e.length;for(i=pe(i,3);++c<d;){var w=e[c];i(w,c,e)&&(o.push(w),l.push(c))}return Gu(e,l),o}function Za(e){return e==null?e:Zp.call(e)}function oy(e,i,o){var c=e==null?0:e.length;return c?(o&&typeof o!="number"&&er(e,i,o)?(i=0,o=c):(i=i==null?0:Ee(i),o=o===r?c:Ee(o)),Cr(e,i,o)):[]}function ay(e,i){return to(e,i)}function cy(e,i,o){return Fa(e,i,pe(o,2))}function uy(e,i){var o=e==null?0:e.length;if(o){var c=to(e,i);if(c<o&&Mr(e[c],i))return c}return-1}function hy(e,i){return to(e,i,!0)}function ly(e,i,o){return Fa(e,i,pe(o,2),!0)}function fy(e,i){var o=e==null?0:e.length;if(o){var c=to(e,i,!0)-1;if(Mr(e[c],i))return c}return-1}function py(e){return e&&e.length?Ju(e):[]}function dy(e,i){return e&&e.length?Ju(e,pe(i,2)):[]}function gy(e){var i=e==null?0:e.length;return i?Cr(e,1,i):[]}function yy(e,i,o){return e&&e.length?(i=o||i===r?1:Ee(i),Cr(e,0,i<0?0:i)):[]}function vy(e,i,o){var c=e==null?0:e.length;return c?(i=o||i===r?1:Ee(i),i=c-i,Cr(e,i<0?0:i,c)):[]}function my(e,i){return e&&e.length?ro(e,pe(i,3),!1,!0):[]}function wy(e,i){return e&&e.length?ro(e,pe(i,3)):[]}var _y=Se(function(e){return Ei(Kt(e,1,bt,!0))}),by=Se(function(e){var i=Tr(e);return bt(i)&&(i=r),Ei(Kt(e,1,bt,!0),pe(i,2))}),Ey=Se(function(e){var i=Tr(e);return i=typeof i=="function"?i:r,Ei(Kt(e,1,bt,!0),r,i)});function Iy(e){return e&&e.length?Ei(e):[]}function xy(e,i){return e&&e.length?Ei(e,pe(i,2)):[]}function Py(e,i){return i=typeof i=="function"?i:r,e&&e.length?Ei(e,r,i):[]}function Xa(e){if(!(e&&e.length))return[];var i=0;return e=vi(e,function(o){if(bt(o))return i=Lt(o.length,i),!0}),ya(i,function(o){return nt(e,pa(o))})}function Fh(e,i){if(!(e&&e.length))return[];var o=Xa(e);return i==null?o:nt(o,function(c){return Mt(i,r,c)})}var Sy=Se(function(e,i){return bt(e)?kn(e,i):[]}),Oy=Se(function(e){return ja(vi(e,bt))}),Ay=Se(function(e){var i=Tr(e);return bt(i)&&(i=r),ja(vi(e,bt),pe(i,2))}),Cy=Se(function(e){var i=Tr(e);return i=typeof i=="function"?i:r,ja(vi(e,bt),r,i)}),Ty=Se(Xa);function Ry(e,i){return Xu(e||[],i||[],Hn)}function Ny(e,i){return Xu(e||[],i||[],Bn)}var $y=Se(function(e){var i=e.length,o=i>1?e[i-1]:r;return o=typeof o=="function"?(e.pop(),o):r,Fh(e,o)});function Lh(e){var i=p(e);return i.__chain__=!0,i}function Dy(e,i){return i(e),e}function lo(e,i){return i(e)}var Fy=si(function(e){var i=e.length,o=i?e[0]:0,c=this.__wrapped__,l=function(d){return xa(d,e)};return i>1||this.__actions__.length||!(c instanceof Te)||!oi(o)?this.thru(l):(c=c.slice(o,+o+(i?1:0)),c.__actions__.push({func:lo,args:[l],thisArg:r}),new Or(c,this.__chain__).thru(function(d){return i&&!d.length&&d.push(r),d}))});function Ly(){return Lh(this)}function jy(){return new Or(this.value(),this.__chain__)}function My(){this.__values__===r&&(this.__values__=Qh(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function qy(){return this}function Uy(e){for(var i,o=this;o instanceof Qs;){var c=Ch(o);c.__index__=0,c.__values__=r,i?l.__wrapped__=c:i=c;var l=c;o=o.__wrapped__}return l.__wrapped__=e,i}function zy(){var e=this.__wrapped__;if(e instanceof Te){var i=e;return this.__actions__.length&&(i=new Te(this)),i=i.reverse(),i.__actions__.push({func:lo,args:[Za],thisArg:r}),new Or(i,this.__chain__)}return this.thru(Za)}function Hy(){return Zu(this.__wrapped__,this.__actions__)}var ky=io(function(e,i,o){ze.call(e,o)?++e[o]:ii(e,o,1)});function Ky(e,i,o){var c=be(e)?lu:Dd;return o&&er(e,i,o)&&(i=r),c(e,pe(i,3))}function Vy(e,i){var o=be(e)?vi:Fu;return o(e,pe(i,3))}var By=uh(Th),Gy=uh(Rh);function Wy(e,i){return Kt(fo(e,i),1)}function Jy(e,i){return Kt(fo(e,i),X)}function Qy(e,i,o){return o=o===r?1:Ee(o),Kt(fo(e,i),o)}function jh(e,i){var o=be(e)?Pr:bi;return o(e,pe(i,3))}function Mh(e,i){var o=be(e)?gp:Du;return o(e,pe(i,3))}var Yy=io(function(e,i,o){ze.call(e,o)?e[o].push(i):ii(e,o,[i])});function Zy(e,i,o,c){e=cr(e)?e:wn(e),o=o&&!c?Ee(o):0;var l=e.length;return o<0&&(o=Lt(l+o,0)),mo(e)?o<=l&&e.indexOf(i,o)>-1:!!l&&an(e,i,o)>-1}var Xy=Se(function(e,i,o){var c=-1,l=typeof i=="function",d=cr(e)?F(e.length):[];return bi(e,function(w){d[++c]=l?Mt(i,w,o):Kn(w,i,o)}),d}),ev=io(function(e,i,o){ii(e,o,i)});function fo(e,i){var o=be(e)?nt:zu;return o(e,pe(i,3))}function tv(e,i,o,c){return e==null?[]:(be(i)||(i=i==null?[]:[i]),o=c?r:o,be(o)||(o=o==null?[]:[o]),Vu(e,i,o))}var rv=io(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function iv(e,i,o){var c=be(e)?la:gu,l=arguments.length<3;return c(e,pe(i,4),o,l,bi)}function nv(e,i,o){var c=be(e)?yp:gu,l=arguments.length<3;return c(e,pe(i,4),o,l,Du)}function sv(e,i){var o=be(e)?vi:Fu;return o(e,yo(pe(i,3)))}function ov(e){var i=be(e)?Tu:Zd;return i(e)}function av(e,i,o){(o?er(e,i,o):i===r)?i=1:i=Ee(i);var c=be(e)?Cd:Xd;return c(e,i)}function cv(e){var i=be(e)?Td:tg;return i(e)}function uv(e){if(e==null)return 0;if(cr(e))return mo(e)?un(e):e.length;var i=Gt(e);return i==xe||i==Me?e.size:Ta(e).length}function hv(e,i,o){var c=be(e)?fa:rg;return o&&er(e,i,o)&&(i=r),c(e,pe(i,3))}var lv=Se(function(e,i){if(e==null)return[];var o=i.length;return o>1&&er(e,i[0],i[1])?i=[]:o>2&&er(i[0],i[1],i[2])&&(i=[i[0]]),Vu(e,Kt(i,1),[])}),po=Vp||function(){return Re.Date.now()};function fv(e,i){if(typeof i!="function")throw new Sr(f);return e=Ee(e),function(){if(--e<1)return i.apply(this,arguments)}}function qh(e,i,o){return i=o?r:i,i=e&&i==null?e.length:i,ni(e,re,r,r,r,r,i)}function Uh(e,i){var o;if(typeof i!="function")throw new Sr(f);return e=Ee(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=r),o}}var ec=Se(function(e,i,o){var c=ce;if(o.length){var l=wi(o,vn(ec));c|=ye}return ni(e,c,i,o,l)}),zh=Se(function(e,i,o){var c=ce|ue;if(o.length){var l=wi(o,vn(zh));c|=ye}return ni(i,c,e,o,l)});function Hh(e,i,o){i=o?r:i;var c=ni(e,le,r,r,r,r,r,i);return c.placeholder=Hh.placeholder,c}function kh(e,i,o){i=o?r:i;var c=ni(e,ae,r,r,r,r,r,i);return c.placeholder=kh.placeholder,c}function Kh(e,i,o){var c,l,d,w,I,R,H=0,k=!1,B=!1,Z=!0;if(typeof e!="function")throw new Sr(f);i=Rr(i)||0,ut(o)&&(k=!!o.leading,B="maxWait"in o,d=B?Lt(Rr(o.maxWait)||0,i):d,Z="trailing"in o?!!o.trailing:Z);function se(Et){var qr=c,ui=l;return c=l=r,H=Et,w=e.apply(ui,qr),w}function de(Et){return H=Et,I=Jn(Oe,i),k?se(Et):w}function Pe(Et){var qr=Et-R,ui=Et-H,ul=i-qr;return B?Bt(ul,d-ui):ul}function ge(Et){var qr=Et-R,ui=Et-H;return R===r||qr>=i||qr<0||B&&ui>=d}function Oe(){var Et=po();if(ge(Et))return Ne(Et);I=Jn(Oe,Pe(Et))}function Ne(Et){return I=r,Z&&c?se(Et):(c=l=r,w)}function _r(){I!==r&&eh(I),H=0,c=R=l=I=r}function tr(){return I===r?w:Ne(po())}function br(){var Et=po(),qr=ge(Et);if(c=arguments,l=this,R=Et,qr){if(I===r)return de(R);if(B)return eh(I),I=Jn(Oe,i),se(R)}return I===r&&(I=Jn(Oe,i)),w}return br.cancel=_r,br.flush=tr,br}var pv=Se(function(e,i){return $u(e,1,i)}),dv=Se(function(e,i,o){return $u(e,Rr(i)||0,o)});function gv(e){return ni(e,He)}function go(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Sr(f);var o=function(){var c=arguments,l=i?i.apply(this,c):c[0],d=o.cache;if(d.has(l))return d.get(l);var w=e.apply(this,c);return o.cache=d.set(l,w)||d,w};return o.cache=new(go.Cache||ri),o}go.Cache=ri;function yo(e){if(typeof e!="function")throw new Sr(f);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function yv(e){return Uh(2,e)}var vv=ig(function(e,i){i=i.length==1&&be(i[0])?nt(i[0],vr(pe())):nt(Kt(i,1),vr(pe()));var o=i.length;return Se(function(c){for(var l=-1,d=Bt(c.length,o);++l<d;)c[l]=i[l].call(this,c[l]);return Mt(e,this,c)})}),tc=Se(function(e,i){var o=wi(i,vn(tc));return ni(e,ye,r,i,o)}),Vh=Se(function(e,i){var o=wi(i,vn(Vh));return ni(e,ve,r,i,o)}),mv=si(function(e,i){return ni(e,Q,r,r,r,i)});function wv(e,i){if(typeof e!="function")throw new Sr(f);return i=i===r?i:Ee(i),Se(e,i)}function _v(e,i){if(typeof e!="function")throw new Sr(f);return i=i==null?0:Lt(Ee(i),0),Se(function(o){var c=o[i],l=xi(o,0,i);return c&&mi(l,c),Mt(e,this,l)})}function bv(e,i,o){var c=!0,l=!0;if(typeof e!="function")throw new Sr(f);return ut(o)&&(c="leading"in o?!!o.leading:c,l="trailing"in o?!!o.trailing:l),Kh(e,i,{leading:c,maxWait:i,trailing:l})}function Ev(e){return qh(e,1)}function Iv(e,i){return tc(qa(i),e)}function xv(){if(!arguments.length)return[];var e=arguments[0];return be(e)?e:[e]}function Pv(e){return Ar(e,z)}function Sv(e,i){return i=typeof i=="function"?i:r,Ar(e,z,i)}function Ov(e){return Ar(e,S|z)}function Av(e,i){return i=typeof i=="function"?i:r,Ar(e,S|z,i)}function Cv(e,i){return i==null||Nu(e,i,qt(i))}function Mr(e,i){return e===i||e!==e&&i!==i}var Tv=ao(Oa),Rv=ao(function(e,i){return e>=i}),Vi=Mu(function(){return arguments}())?Mu:function(e){return vt(e)&&ze.call(e,"callee")&&!xu.call(e,"callee")},be=F.isArray,Nv=Zt?vr(Zt):Ud;function cr(e){return e!=null&&vo(e.length)&&!ai(e)}function bt(e){return vt(e)&&cr(e)}function $v(e){return e===!0||e===!1||vt(e)&&Xt(e)==L}var Pi=Gp||fc,Dv=Fr?vr(Fr):zd;function Fv(e){return vt(e)&&e.nodeType===1&&!Qn(e)}function Lv(e){if(e==null)return!0;if(cr(e)&&(be(e)||typeof e=="string"||typeof e.splice=="function"||Pi(e)||mn(e)||Vi(e)))return!e.length;var i=Gt(e);if(i==xe||i==Me)return!e.size;if(Wn(e))return!Ta(e).length;for(var o in e)if(ze.call(e,o))return!1;return!0}function jv(e,i){return Vn(e,i)}function Mv(e,i,o){o=typeof o=="function"?o:r;var c=o?o(e,i):r;return c===r?Vn(e,i,r,o):!!c}function rc(e){if(!vt(e))return!1;var i=Xt(e);return i==P||i==u||typeof e.message=="string"&&typeof e.name=="string"&&!Qn(e)}function qv(e){return typeof e=="number"&&Su(e)}function ai(e){if(!ut(e))return!1;var i=Xt(e);return i==ne||i==me||i==M||i==mt}function Bh(e){return typeof e=="number"&&e==Ee(e)}function vo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=W}function ut(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function vt(e){return e!=null&&typeof e=="object"}var Gh=xr?vr(xr):kd;function Uv(e,i){return e===i||Ca(e,i,Ba(i))}function zv(e,i,o){return o=typeof o=="function"?o:r,Ca(e,i,Ba(i),o)}function Hv(e){return Wh(e)&&e!=+e}function kv(e){if(Sg(e))throw new we(h);return qu(e)}function Kv(e){return e===null}function Vv(e){return e==null}function Wh(e){return typeof e=="number"||vt(e)&&Xt(e)==De}function Qn(e){if(!vt(e)||Xt(e)!=Ce)return!1;var i=ks(e);if(i===null)return!0;var o=ze.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&qs.call(o)==zp}var ic=Vr?vr(Vr):Kd;function Bv(e){return Bh(e)&&e>=-W&&e<=W}var Jh=Fn?vr(Fn):Vd;function mo(e){return typeof e=="string"||!be(e)&&vt(e)&&Xt(e)==Ye}function wr(e){return typeof e=="symbol"||vt(e)&&Xt(e)==Ze}var mn=ji?vr(ji):Bd;function Gv(e){return e===r}function Wv(e){return vt(e)&&Gt(e)==ke}function Jv(e){return vt(e)&&Xt(e)==Xe}var Qv=ao(Ra),Yv=ao(function(e,i){return e<=i});function Qh(e){if(!e)return[];if(cr(e))return mo(e)?Lr(e):ar(e);if(jn&&e[jn])return Cp(e[jn]());var i=Gt(e),o=i==xe?ma:i==Me?Ls:wn;return o(e)}function ci(e){if(!e)return e===0?e:0;if(e=Rr(e),e===X||e===-X){var i=e<0?-1:1;return i*D}return e===e?e:0}function Ee(e){var i=ci(e),o=i%1;return i===i?o?i-o:i:0}function Yh(e){return e?zi(Ee(e),0,J):0}function Rr(e){if(typeof e=="number")return e;if(wr(e))return V;if(ut(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=ut(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=yu(e);var o=Go.test(e);return o||Jo.test(e)?_e(e.slice(2),o?2:8):Bo.test(e)?V:+e}function Zh(e){return Gr(e,ur(e))}function Zv(e){return e?zi(Ee(e),-W,W):e===0?e:0}function qe(e){return e==null?"":mr(e)}var Xv=gn(function(e,i){if(Wn(i)||cr(i)){Gr(i,qt(i),e);return}for(var o in i)ze.call(i,o)&&Hn(e,o,i[o])}),Xh=gn(function(e,i){Gr(i,ur(i),e)}),wo=gn(function(e,i,o,c){Gr(i,ur(i),e,c)}),e0=gn(function(e,i,o,c){Gr(i,qt(i),e,c)}),t0=si(xa);function r0(e,i){var o=dn(e);return i==null?o:Ru(o,i)}var i0=Se(function(e,i){e=Je(e);var o=-1,c=i.length,l=c>2?i[2]:r;for(l&&er(i[0],i[1],l)&&(c=1);++o<c;)for(var d=i[o],w=ur(d),I=-1,R=w.length;++I<R;){var H=w[I],k=e[H];(k===r||Mr(k,ln[H])&&!ze.call(e,H))&&(e[H]=d[H])}return e}),n0=Se(function(e){return e.push(r,yh),Mt(el,r,e)});function s0(e,i){return fu(e,pe(i,3),Br)}function o0(e,i){return fu(e,pe(i,3),Sa)}function a0(e,i){return e==null?e:Pa(e,pe(i,3),ur)}function c0(e,i){return e==null?e:Lu(e,pe(i,3),ur)}function u0(e,i){return e&&Br(e,pe(i,3))}function h0(e,i){return e&&Sa(e,pe(i,3))}function l0(e){return e==null?[]:Xs(e,qt(e))}function f0(e){return e==null?[]:Xs(e,ur(e))}function nc(e,i,o){var c=e==null?r:Hi(e,i);return c===r?o:c}function p0(e,i){return e!=null&&wh(e,i,Ld)}function sc(e,i){return e!=null&&wh(e,i,jd)}var d0=lh(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=Us.call(i)),e[i]=o},ac(hr)),g0=lh(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=Us.call(i)),ze.call(e,i)?e[i].push(o):e[i]=[o]},pe),y0=Se(Kn);function qt(e){return cr(e)?Cu(e):Ta(e)}function ur(e){return cr(e)?Cu(e,!0):Gd(e)}function v0(e,i){var o={};return i=pe(i,3),Br(e,function(c,l,d){ii(o,i(c,l,d),c)}),o}function m0(e,i){var o={};return i=pe(i,3),Br(e,function(c,l,d){ii(o,l,i(c,l,d))}),o}var w0=gn(function(e,i,o){eo(e,i,o)}),el=gn(function(e,i,o,c){eo(e,i,o,c)}),_0=si(function(e,i){var o={};if(e==null)return o;var c=!1;i=nt(i,function(d){return d=Ii(d,e),c||(c=d.length>1),d}),Gr(e,Ka(e),o),c&&(o=Ar(o,S|j|z,dg));for(var l=i.length;l--;)La(o,i[l]);return o});function b0(e,i){return tl(e,yo(pe(i)))}var E0=si(function(e,i){return e==null?{}:Jd(e,i)});function tl(e,i){if(e==null)return{};var o=nt(Ka(e),function(c){return[c]});return i=pe(i),Bu(e,o,function(c,l){return i(c,l[0])})}function I0(e,i,o){i=Ii(i,e);var c=-1,l=i.length;for(l||(l=1,e=r);++c<l;){var d=e==null?r:e[Wr(i[c])];d===r&&(c=l,d=o),e=ai(d)?d.call(e):d}return e}function x0(e,i,o){return e==null?e:Bn(e,i,o)}function P0(e,i,o,c){return c=typeof c=="function"?c:r,e==null?e:Bn(e,i,o,c)}var rl=dh(qt),il=dh(ur);function S0(e,i,o){var c=be(e),l=c||Pi(e)||mn(e);if(i=pe(i,4),o==null){var d=e&&e.constructor;l?o=c?new d:[]:ut(e)?o=ai(d)?dn(ks(e)):{}:o={}}return(l?Pr:Br)(e,function(w,I,R){return i(o,w,I,R)}),o}function O0(e,i){return e==null?!0:La(e,i)}function A0(e,i,o){return e==null?e:Yu(e,i,qa(o))}function C0(e,i,o,c){return c=typeof c=="function"?c:r,e==null?e:Yu(e,i,qa(o),c)}function wn(e){return e==null?[]:va(e,qt(e))}function T0(e){return e==null?[]:va(e,ur(e))}function R0(e,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Rr(o),o=o===o?o:0),i!==r&&(i=Rr(i),i=i===i?i:0),zi(Rr(e),i,o)}function N0(e,i,o){return i=ci(i),o===r?(o=i,i=0):o=ci(o),e=Rr(e),Md(e,i,o)}function $0(e,i,o){if(o&&typeof o!="boolean"&&er(e,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof e=="boolean"&&(o=e,e=r)),e===r&&i===r?(e=0,i=1):(e=ci(e),i===r?(i=e,e=0):i=ci(i)),e>i){var c=e;e=i,i=c}if(o||e%1||i%1){var l=Ou();return Bt(e+l*(i-e+Ge("1e-"+((l+"").length-1))),i)}return $a(e,i)}var D0=yn(function(e,i,o){return i=i.toLowerCase(),e+(o?nl(i):i)});function nl(e){return oc(qe(e).toLowerCase())}function sl(e){return e=qe(e),e&&e.replace(Xr,xp).replace(ca,"")}function F0(e,i,o){e=qe(e),i=mr(i);var c=e.length;o=o===r?c:zi(Ee(o),0,c);var l=o;return o-=i.length,o>=0&&e.slice(o,l)==i}function L0(e){return e=qe(e),e&&rt.test(e)?e.replace(Ni,Pp):e}function j0(e){return e=qe(e),e&&At.test(e)?e.replace(dt,"\\$&"):e}var M0=yn(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),q0=yn(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),U0=ch("toLowerCase");function z0(e,i,o){e=qe(e),i=Ee(i);var c=i?un(e):0;if(!i||c>=i)return e;var l=(i-c)/2;return oo(Gs(l),o)+e+oo(Bs(l),o)}function H0(e,i,o){e=qe(e),i=Ee(i);var c=i?un(e):0;return i&&c<i?e+oo(i-c,o):e}function k0(e,i,o){e=qe(e),i=Ee(i);var c=i?un(e):0;return i&&c<i?oo(i-c,o)+e:e}function K0(e,i,o){return o||i==null?i=0:i&&(i=+i),Yp(qe(e).replace(gt,""),i||0)}function V0(e,i,o){return(o?er(e,i,o):i===r)?i=1:i=Ee(i),Da(qe(e),i)}function B0(){var e=arguments,i=qe(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var G0=yn(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function W0(e,i,o){return o&&typeof o!="number"&&er(e,i,o)&&(i=o=r),o=o===r?J:o>>>0,o?(e=qe(e),e&&(typeof i=="string"||i!=null&&!ic(i))&&(i=mr(i),!i&&cn(e))?xi(Lr(e),0,o):e.split(i,o)):[]}var J0=yn(function(e,i,o){return e+(o?" ":"")+oc(i)});function Q0(e,i,o){return e=qe(e),o=o==null?0:zi(Ee(o),0,e.length),i=mr(i),e.slice(o,o+i.length)==i}function Y0(e,i,o){var c=p.templateSettings;o&&er(e,i,o)&&(i=r),e=qe(e),i=wo({},i,c,gh);var l=wo({},i.imports,c.imports,gh),d=qt(l),w=va(l,d),I,R,H=0,k=i.interpolate||Xi,B="__p += '",Z=wa((i.escape||Xi).source+"|"+k.source+"|"+(k===ct?Vo:Xi).source+"|"+(i.evaluate||Xi).source+"|$","g"),se="//# sourceURL="+(ze.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ua+"]")+`
`;e.replace(Z,function(ge,Oe,Ne,_r,tr,br){return Ne||(Ne=_r),B+=e.slice(H,br).replace(Yo,Sp),Oe&&(I=!0,B+=`' +
__e(`+Oe+`) +
'`),tr&&(R=!0,B+=`';
`+tr+`;
__p += '`),Ne&&(B+=`' +
((__t = (`+Ne+`)) == null ? '' : __t) +
'`),H=br+ge.length,ge}),B+=`';
`;var de=ze.call(i,"variable")&&i.variable;if(!de)B=`with (obj) {
`+B+`
}
`;else if(ko.test(de))throw new we(v);B=(R?B.replace(kr,""):B).replace(Yt,"$1").replace(Zr,"$1;"),B="function("+(de||"obj")+`) {
`+(de?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(R?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var Pe=al(function(){return je(d,se+"return "+B).apply(r,w)});if(Pe.source=B,rc(Pe))throw Pe;return Pe}function Z0(e){return qe(e).toLowerCase()}function X0(e){return qe(e).toUpperCase()}function em(e,i,o){if(e=qe(e),e&&(o||i===r))return yu(e);if(!e||!(i=mr(i)))return e;var c=Lr(e),l=Lr(i),d=vu(c,l),w=mu(c,l)+1;return xi(c,d,w).join("")}function tm(e,i,o){if(e=qe(e),e&&(o||i===r))return e.slice(0,_u(e)+1);if(!e||!(i=mr(i)))return e;var c=Lr(e),l=mu(c,Lr(i))+1;return xi(c,0,l).join("")}function rm(e,i,o){if(e=qe(e),e&&(o||i===r))return e.replace(gt,"");if(!e||!(i=mr(i)))return e;var c=Lr(e),l=vu(c,Lr(i));return xi(c,l).join("")}function im(e,i){var o=b,c=O;if(ut(i)){var l="separator"in i?i.separator:l;o="length"in i?Ee(i.length):o,c="omission"in i?mr(i.omission):c}e=qe(e);var d=e.length;if(cn(e)){var w=Lr(e);d=w.length}if(o>=d)return e;var I=o-un(c);if(I<1)return c;var R=w?xi(w,0,I).join(""):e.slice(0,I);if(l===r)return R+c;if(w&&(I+=R.length-I),ic(l)){if(e.slice(I).search(l)){var H,k=R;for(l.global||(l=wa(l.source,qe(Ir.exec(l))+"g")),l.lastIndex=0;H=l.exec(k);)var B=H.index;R=R.slice(0,B===r?I:B)}}else if(e.indexOf(mr(l),I)!=I){var Z=R.lastIndexOf(l);Z>-1&&(R=R.slice(0,Z))}return R+c}function nm(e){return e=qe(e),e&&lt.test(e)?e.replace(gi,$p):e}var sm=yn(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),oc=ch("toUpperCase");function ol(e,i,o){return e=qe(e),i=o?r:i,i===r?Ap(e)?Lp(e):wp(e):e.match(i)||[]}var al=Se(function(e,i){try{return Mt(e,r,i)}catch(o){return rc(o)?o:new we(o)}}),om=si(function(e,i){return Pr(i,function(o){o=Wr(o),ii(e,o,ec(e[o],e))}),e});function am(e){var i=e==null?0:e.length,o=pe();return e=i?nt(e,function(c){if(typeof c[1]!="function")throw new Sr(f);return[o(c[0]),c[1]]}):[],Se(function(c){for(var l=-1;++l<i;){var d=e[l];if(Mt(d[0],this,c))return Mt(d[1],this,c)}})}function cm(e){return $d(Ar(e,S))}function ac(e){return function(){return e}}function um(e,i){return e==null||e!==e?i:e}var hm=hh(),lm=hh(!0);function hr(e){return e}function cc(e){return Uu(typeof e=="function"?e:Ar(e,S))}function fm(e){return Hu(Ar(e,S))}function pm(e,i){return ku(e,Ar(i,S))}var dm=Se(function(e,i){return function(o){return Kn(o,e,i)}}),gm=Se(function(e,i){return function(o){return Kn(e,o,i)}});function uc(e,i,o){var c=qt(i),l=Xs(i,c);o==null&&!(ut(i)&&(l.length||!c.length))&&(o=i,i=e,e=this,l=Xs(i,qt(i)));var d=!(ut(o)&&"chain"in o)||!!o.chain,w=ai(e);return Pr(l,function(I){var R=i[I];e[I]=R,w&&(e.prototype[I]=function(){var H=this.__chain__;if(d||H){var k=e(this.__wrapped__),B=k.__actions__=ar(this.__actions__);return B.push({func:R,args:arguments,thisArg:e}),k.__chain__=H,k}return R.apply(e,mi([this.value()],arguments))})}),e}function ym(){return Re._===this&&(Re._=Hp),this}function hc(){}function vm(e){return e=Ee(e),Se(function(i){return Ku(i,e)})}var mm=za(nt),wm=za(lu),_m=za(fa);function cl(e){return Wa(e)?pa(Wr(e)):Qd(e)}function bm(e){return function(i){return e==null?r:Hi(e,i)}}var Em=fh(),Im=fh(!0);function lc(){return[]}function fc(){return!1}function xm(){return{}}function Pm(){return""}function Sm(){return!0}function Om(e,i){if(e=Ee(e),e<1||e>W)return[];var o=J,c=Bt(e,J);i=pe(i),e-=J;for(var l=ya(c,i);++o<e;)i(o);return l}function Am(e){return be(e)?nt(e,Wr):wr(e)?[e]:ar(Ah(qe(e)))}function Cm(e){var i=++Up;return qe(e)+i}var Tm=so(function(e,i){return e+i},0),Rm=Ha("ceil"),Nm=so(function(e,i){return e/i},1),$m=Ha("floor");function Dm(e){return e&&e.length?Zs(e,hr,Oa):r}function Fm(e,i){return e&&e.length?Zs(e,pe(i,2),Oa):r}function Lm(e){return du(e,hr)}function jm(e,i){return du(e,pe(i,2))}function Mm(e){return e&&e.length?Zs(e,hr,Ra):r}function qm(e,i){return e&&e.length?Zs(e,pe(i,2),Ra):r}var Um=so(function(e,i){return e*i},1),zm=Ha("round"),Hm=so(function(e,i){return e-i},0);function km(e){return e&&e.length?ga(e,hr):0}function Km(e,i){return e&&e.length?ga(e,pe(i,2)):0}return p.after=fv,p.ary=qh,p.assign=Xv,p.assignIn=Xh,p.assignInWith=wo,p.assignWith=e0,p.at=t0,p.before=Uh,p.bind=ec,p.bindAll=om,p.bindKey=zh,p.castArray=xv,p.chain=Lh,p.chunk=$g,p.compact=Dg,p.concat=Fg,p.cond=am,p.conforms=cm,p.constant=ac,p.countBy=ky,p.create=r0,p.curry=Hh,p.curryRight=kh,p.debounce=Kh,p.defaults=i0,p.defaultsDeep=n0,p.defer=pv,p.delay=dv,p.difference=Lg,p.differenceBy=jg,p.differenceWith=Mg,p.drop=qg,p.dropRight=Ug,p.dropRightWhile=zg,p.dropWhile=Hg,p.fill=kg,p.filter=Vy,p.flatMap=Wy,p.flatMapDeep=Jy,p.flatMapDepth=Qy,p.flatten=Nh,p.flattenDeep=Kg,p.flattenDepth=Vg,p.flip=gv,p.flow=hm,p.flowRight=lm,p.fromPairs=Bg,p.functions=l0,p.functionsIn=f0,p.groupBy=Yy,p.initial=Wg,p.intersection=Jg,p.intersectionBy=Qg,p.intersectionWith=Yg,p.invert=d0,p.invertBy=g0,p.invokeMap=Xy,p.iteratee=cc,p.keyBy=ev,p.keys=qt,p.keysIn=ur,p.map=fo,p.mapKeys=v0,p.mapValues=m0,p.matches=fm,p.matchesProperty=pm,p.memoize=go,p.merge=w0,p.mergeWith=el,p.method=dm,p.methodOf=gm,p.mixin=uc,p.negate=yo,p.nthArg=vm,p.omit=_0,p.omitBy=b0,p.once=yv,p.orderBy=tv,p.over=mm,p.overArgs=vv,p.overEvery=wm,p.overSome=_m,p.partial=tc,p.partialRight=Vh,p.partition=rv,p.pick=E0,p.pickBy=tl,p.property=cl,p.propertyOf=bm,p.pull=ty,p.pullAll=Dh,p.pullAllBy=ry,p.pullAllWith=iy,p.pullAt=ny,p.range=Em,p.rangeRight=Im,p.rearg=mv,p.reject=sv,p.remove=sy,p.rest=wv,p.reverse=Za,p.sampleSize=av,p.set=x0,p.setWith=P0,p.shuffle=cv,p.slice=oy,p.sortBy=lv,p.sortedUniq=py,p.sortedUniqBy=dy,p.split=W0,p.spread=_v,p.tail=gy,p.take=yy,p.takeRight=vy,p.takeRightWhile=my,p.takeWhile=wy,p.tap=Dy,p.throttle=bv,p.thru=lo,p.toArray=Qh,p.toPairs=rl,p.toPairsIn=il,p.toPath=Am,p.toPlainObject=Zh,p.transform=S0,p.unary=Ev,p.union=_y,p.unionBy=by,p.unionWith=Ey,p.uniq=Iy,p.uniqBy=xy,p.uniqWith=Py,p.unset=O0,p.unzip=Xa,p.unzipWith=Fh,p.update=A0,p.updateWith=C0,p.values=wn,p.valuesIn=T0,p.without=Sy,p.words=ol,p.wrap=Iv,p.xor=Oy,p.xorBy=Ay,p.xorWith=Cy,p.zip=Ty,p.zipObject=Ry,p.zipObjectDeep=Ny,p.zipWith=$y,p.entries=rl,p.entriesIn=il,p.extend=Xh,p.extendWith=wo,uc(p,p),p.add=Tm,p.attempt=al,p.camelCase=D0,p.capitalize=nl,p.ceil=Rm,p.clamp=R0,p.clone=Pv,p.cloneDeep=Ov,p.cloneDeepWith=Av,p.cloneWith=Sv,p.conformsTo=Cv,p.deburr=sl,p.defaultTo=um,p.divide=Nm,p.endsWith=F0,p.eq=Mr,p.escape=L0,p.escapeRegExp=j0,p.every=Ky,p.find=By,p.findIndex=Th,p.findKey=s0,p.findLast=Gy,p.findLastIndex=Rh,p.findLastKey=o0,p.floor=$m,p.forEach=jh,p.forEachRight=Mh,p.forIn=a0,p.forInRight=c0,p.forOwn=u0,p.forOwnRight=h0,p.get=nc,p.gt=Tv,p.gte=Rv,p.has=p0,p.hasIn=sc,p.head=$h,p.identity=hr,p.includes=Zy,p.indexOf=Gg,p.inRange=N0,p.invoke=y0,p.isArguments=Vi,p.isArray=be,p.isArrayBuffer=Nv,p.isArrayLike=cr,p.isArrayLikeObject=bt,p.isBoolean=$v,p.isBuffer=Pi,p.isDate=Dv,p.isElement=Fv,p.isEmpty=Lv,p.isEqual=jv,p.isEqualWith=Mv,p.isError=rc,p.isFinite=qv,p.isFunction=ai,p.isInteger=Bh,p.isLength=vo,p.isMap=Gh,p.isMatch=Uv,p.isMatchWith=zv,p.isNaN=Hv,p.isNative=kv,p.isNil=Vv,p.isNull=Kv,p.isNumber=Wh,p.isObject=ut,p.isObjectLike=vt,p.isPlainObject=Qn,p.isRegExp=ic,p.isSafeInteger=Bv,p.isSet=Jh,p.isString=mo,p.isSymbol=wr,p.isTypedArray=mn,p.isUndefined=Gv,p.isWeakMap=Wv,p.isWeakSet=Jv,p.join=Zg,p.kebabCase=M0,p.last=Tr,p.lastIndexOf=Xg,p.lowerCase=q0,p.lowerFirst=U0,p.lt=Qv,p.lte=Yv,p.max=Dm,p.maxBy=Fm,p.mean=Lm,p.meanBy=jm,p.min=Mm,p.minBy=qm,p.stubArray=lc,p.stubFalse=fc,p.stubObject=xm,p.stubString=Pm,p.stubTrue=Sm,p.multiply=Um,p.nth=ey,p.noConflict=ym,p.noop=hc,p.now=po,p.pad=z0,p.padEnd=H0,p.padStart=k0,p.parseInt=K0,p.random=$0,p.reduce=iv,p.reduceRight=nv,p.repeat=V0,p.replace=B0,p.result=I0,p.round=zm,p.runInContext=T,p.sample=ov,p.size=uv,p.snakeCase=G0,p.some=hv,p.sortedIndex=ay,p.sortedIndexBy=cy,p.sortedIndexOf=uy,p.sortedLastIndex=hy,p.sortedLastIndexBy=ly,p.sortedLastIndexOf=fy,p.startCase=J0,p.startsWith=Q0,p.subtract=Hm,p.sum=km,p.sumBy=Km,p.template=Y0,p.times=Om,p.toFinite=ci,p.toInteger=Ee,p.toLength=Yh,p.toLower=Z0,p.toNumber=Rr,p.toSafeInteger=Zv,p.toString=qe,p.toUpper=X0,p.trim=em,p.trimEnd=tm,p.trimStart=rm,p.truncate=im,p.unescape=nm,p.uniqueId=Cm,p.upperCase=sm,p.upperFirst=oc,p.each=jh,p.eachRight=Mh,p.first=$h,uc(p,function(){var e={};return Br(p,function(i,o){ze.call(p.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),p.VERSION=n,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Pr(["drop","take"],function(e,i){Te.prototype[e]=function(o){o=o===r?1:Lt(Ee(o),0);var c=this.__filtered__&&!i?new Te(this):this.clone();return c.__filtered__?c.__takeCount__=Bt(o,c.__takeCount__):c.__views__.push({size:Bt(o,J),type:e+(c.__dir__<0?"Right":"")}),c},Te.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),Pr(["filter","map","takeWhile"],function(e,i){var o=i+1,c=o==x||o==G;Te.prototype[e]=function(l){var d=this.clone();return d.__iteratees__.push({iteratee:pe(l,3),type:o}),d.__filtered__=d.__filtered__||c,d}}),Pr(["head","last"],function(e,i){var o="take"+(i?"Right":"");Te.prototype[e]=function(){return this[o](1).value()[0]}}),Pr(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");Te.prototype[e]=function(){return this.__filtered__?new Te(this):this[o](1)}}),Te.prototype.compact=function(){return this.filter(hr)},Te.prototype.find=function(e){return this.filter(e).head()},Te.prototype.findLast=function(e){return this.reverse().find(e)},Te.prototype.invokeMap=Se(function(e,i){return typeof e=="function"?new Te(this):this.map(function(o){return Kn(o,e,i)})}),Te.prototype.reject=function(e){return this.filter(yo(pe(e)))},Te.prototype.slice=function(e,i){e=Ee(e);var o=this;return o.__filtered__&&(e>0||i<0)?new Te(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==r&&(i=Ee(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},Te.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Te.prototype.toArray=function(){return this.take(J)},Br(Te.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),c=/^(?:head|last)$/.test(i),l=p[c?"take"+(i=="last"?"Right":""):i],d=c||/^find/.test(i);l&&(p.prototype[i]=function(){var w=this.__wrapped__,I=c?[1]:arguments,R=w instanceof Te,H=I[0],k=R||be(w),B=function(Oe){var Ne=l.apply(p,mi([Oe],I));return c&&Z?Ne[0]:Ne};k&&o&&typeof H=="function"&&H.length!=1&&(R=k=!1);var Z=this.__chain__,se=!!this.__actions__.length,de=d&&!Z,Pe=R&&!se;if(!d&&k){w=Pe?w:new Te(this);var ge=e.apply(w,I);return ge.__actions__.push({func:lo,args:[B],thisArg:r}),new Or(ge,Z)}return de&&Pe?e.apply(this,I):(ge=this.thru(B),de?c?ge.value()[0]:ge.value():ge)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(e){var i=js[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",c=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var l=arguments;if(c&&!this.__chain__){var d=this.value();return i.apply(be(d)?d:[],l)}return this[o](function(w){return i.apply(be(w)?w:[],l)})}}),Br(Te.prototype,function(e,i){var o=p[i];if(o){var c=o.name+"";ze.call(pn,c)||(pn[c]=[]),pn[c].push({name:i,func:o})}}),pn[no(r,ue).name]=[{name:"wrapper",func:r}],Te.prototype.clone=nd,Te.prototype.reverse=sd,Te.prototype.value=od,p.prototype.at=Fy,p.prototype.chain=Ly,p.prototype.commit=jy,p.prototype.next=My,p.prototype.plant=Uy,p.prototype.reverse=zy,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Hy,p.prototype.first=p.prototype.head,jn&&(p.prototype[jn]=qy),p},hn=jp();_t?((_t.exports=hn)._=hn,We._=hn):Re._=hn}).call(ts)})(zc,zc.exports);var KI=Object.defineProperty,VI=Object.defineProperties,BI=Object.getOwnPropertyDescriptors,uf=Object.getOwnPropertySymbols,GI=Object.prototype.hasOwnProperty,WI=Object.prototype.propertyIsEnumerable,hf=(s,t,r)=>t in s?KI(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Po=(s,t)=>{for(var r in t||(t={}))GI.call(t,r)&&hf(s,r,t[r]);if(uf)for(var r of uf(t))WI.call(t,r)&&hf(s,r,t[r]);return s},JI=(s,t)=>VI(s,BI(t));function Ti(s,t,r){var n;const a=s1(s);return((n=t.rpcMap)==null?void 0:n[a.reference])||`${kI}?chainId=${a.namespace}:${a.reference}&projectId=${r}`}function Zi(s){return s.includes(":")?s.split(":")[1]:s}function fp(s){return s.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function QI(s,t){const r=Object.keys(t.namespaces).filter(a=>a.includes(s));if(!r.length)return[];const n=[];return r.forEach(a=>{const h=t.namespaces[a].accounts;n.push(...h)}),n}function YI(s={},t={}){const r=lf(s),n=lf(t);return zc.exports.merge(r,n)}function lf(s){var t,r,n,a;const h={};if(!Pn(s))return h;for(const[f,v]of Object.entries(s)){const m=Xc(f)?[f]:v.chains,g=v.methods||[],E=v.events||[],S=v.rpcMap||{},j=rs(f);h[j]=JI(Po(Po({},h[j]),v),{chains:dc(m,(t=h[j])==null?void 0:t.chains),methods:dc(g,(r=h[j])==null?void 0:r.methods),events:dc(E,(n=h[j])==null?void 0:n.events),rpcMap:Po(Po({},S),(a=h[j])==null?void 0:a.rpcMap)})}return h}function ZI(s){return s.includes(":")?s.split(":")[2]:s}function XI(s){const t={};for(const[r,n]of Object.entries(s)){const a=n.methods||[],h=n.events||[],f=n.accounts||[],v=Xc(r)?[r]:n.chains?n.chains:fp(n.accounts);t[r]={chains:v,methods:a,events:h,accounts:f}}return t}function Sc(s){return typeof s=="number"?s:s.includes("0x")?parseInt(s,16):s.includes(":")?Number(s.split(":")[1]):Number(s)}const pp={},st=s=>pp[s],Oc=(s,t)=>{pp[s]=t};class ex{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const a=Zi(r);t[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||Ti(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}}class tx{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const n=r||Ti(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const a=parseInt(Zi(r));t[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,n;let a=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const h=parseInt(a,16);if(this.isChainApproved(h))this.setDefaultChain(`${h}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:a}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${h}`);else throw new Error(`Failed to switch to chain 'eip155:${h}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class rx{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const a=Zi(r);t[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||Ti(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}}class ix{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const a=Zi(r);t[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||Ti(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}}class nx{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),a=Zi(r);t[a]=this.createHttpProvider(a,n)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||this.getCardanoRPCUrl(t);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}}class sx{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const a=Zi(r);t[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||Ti(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}}class ox{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;const a=Zi(r);t[a]=this.createHttpProvider(a,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||Ti(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new pi(new Ri(n,st("disableProviderPing")))}}class ax{constructor(t){this.name="near",this.namespace=t.namespace,this.events=st("events"),this.client=st("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const n=r||Ti(`${this.name}:${t}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,n)}this.events.emit(di.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var n;t[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||Ti(t,this.namespace);return typeof n>"u"?void 0:new pi(new Ri(n,st("disableProviderPing")))}}var cx=Object.defineProperty,ux=Object.defineProperties,hx=Object.getOwnPropertyDescriptors,ff=Object.getOwnPropertySymbols,lx=Object.prototype.hasOwnProperty,fx=Object.prototype.propertyIsEnumerable,pf=(s,t,r)=>t in s?cx(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,So=(s,t)=>{for(var r in t||(t={}))lx.call(t,r)&&pf(s,r,t[r]);if(ff)for(var r of ff(t))fx.call(t,r)&&pf(s,r,t[r]);return s},Ac=(s,t)=>ux(s,hx(t));class uu{constructor(t){this.events=new Vc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:$e.pino($e.getDefaultLoggerOptions({level:t?.logger||af})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const r=new uu(t);return await r.initialize(),r}async request(t,r){const[n,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:So({},t),chainId:`${n}:${a}`,topic:this.session.topic})}sendAsync(t,r,n){this.request(t,n).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:It("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:a}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await a().then(h=>{this.session=h,this.namespaces||(this.namespaces=XI(h.namespaces),this.persist("namespaces",this.namespaces))}).catch(h=>{if(h.message!==lp)throw h;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[n,a]=this.validateChain(t);this.getProvider(n).setDefaultChain(a,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Yr(r)){for(const n of r)t.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await cu.init({logger:this.providerOpts.logger||af,relayUrl:this.providerOpts.relayUrl||UI,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>rs(r)))];Oc("client",this.client),Oc("events",this.events),Oc("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const n=QI(r,this.session),a=fp(n),h=YI(this.namespaces,this.optionalNamespaces),f=Ac(So({},h[r]),{accounts:n,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new tx({namespace:f});break;case"solana":this.rpcProviders[r]=new rx({namespace:f});break;case"cosmos":this.rpcProviders[r]=new ix({namespace:f});break;case"polkadot":this.rpcProviders[r]=new ex({namespace:f});break;case"cip34":this.rpcProviders[r]=new nx({namespace:f});break;case"elrond":this.rpcProviders[r]=new sx({namespace:f});break;case"multiversx":this.rpcProviders[r]=new ox({namespace:f});break;case"near":this.rpcProviders[r]=new ax({namespace:f});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:n}=r;if(n.name==="accountsChanged"){const a=n.data;a&&Yr(a)&&this.events.emit("accountsChanged",a.map(ZI))}else if(n.name==="chainChanged"){const a=r.chainId,h=r.event.data,f=rs(a),v=Sc(a)!==Sc(h)?`${f}:${Sc(h)}`:a;this.onChainChanged(v)}else this.events.emit(n.name,n.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var n;const{namespaces:a}=r,h=(n=this.client)==null?void 0:n.session.get(t);this.session=Ac(So({},h),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Ac(So({},It("USER_DISCONNECTED")),{data:t.topic}))}),this.on(di.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:n,sessionProperties:a}=t;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(t){const[r,n]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(f=>rs(f)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const a=rs(Object.keys(this.namespaces)[0]),h=this.rpcProviders[a].getDefaultChain();return[a,h]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var n;if(!this.namespaces)return;const[a,h]=this.validateChain(t);r||this.getProvider(a).setDefaultChain(h),((n=this.namespaces[a])!=null?n:this.namespaces[`${a}:${h}`]).defaultChain=h,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",h)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${cf}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${cf}/${t}`)}}const px=uu,dx="wc",gx="ethereum_provider",yx=`${dx}@2:${gx}:`,vx="https://rpc.walletconnect.com/v1/",Hc=["eth_sendTransaction","personal_sign"],mx=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],kc=["chainChanged","accountsChanged"],wx=["chainChanged","accountsChanged","message","disconnect","connect"];var _x=Object.defineProperty,bx=Object.defineProperties,Ex=Object.getOwnPropertyDescriptors,df=Object.getOwnPropertySymbols,Ix=Object.prototype.hasOwnProperty,xx=Object.prototype.propertyIsEnumerable,gf=(s,t,r)=>t in s?_x(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,ns=(s,t)=>{for(var r in t||(t={}))Ix.call(t,r)&&gf(s,r,t[r]);if(df)for(var r of df(t))xx.call(t,r)&&gf(s,r,t[r]);return s},yf=(s,t)=>bx(s,Ex(t));function Fo(s){return Number(s[0].split(":")[1])}function Cc(s){return`0x${s.toString(16)}`}function Px(s){const{chains:t,optionalChains:r,methods:n,optionalMethods:a,events:h,optionalEvents:f,rpcMap:v}=s;if(!Yr(t))throw new Error("Invalid chains");const m={chains:t,methods:n||Hc,events:h||kc,rpcMap:ns({},t.length?{[Fo(t)]:v[Fo(t)]}:{})},g=h?.filter(z=>!kc.includes(z)),E=n?.filter(z=>!Hc.includes(z));if(!r&&!f&&!a&&!(g!=null&&g.length)&&!(E!=null&&E.length))return{required:t.length?m:void 0};const S=g?.length&&E?.length||!r,j={chains:[...new Set(S?m.chains.concat(r||[]):r)],methods:[...new Set(m.methods.concat(a!=null&&a.length?a:mx))],events:[...new Set(m.events.concat(f!=null&&f.length?f:wx))],rpcMap:v};return{required:t.length?m:void 0,optional:r.length?j:void 0}}class hu{constructor(){this.events=new Hr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=yx,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new hu;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:n}=Px(this.rpc);try{const a=await new Promise(async(f,v)=>{var m;this.rpc.showQrModal&&((m=this.modal)==null||m.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),v(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(yf(ns({namespaces:ns({},r&&{[this.namespace]:r})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:t?.pairingTopic})).then(g=>{f(g)}).catch(g=>{v(new Error(g.message))})});if(!a)return;const h=o1(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:h),this.setAccounts(h),this.events.emit("connect",{chainId:Cc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:n}=r;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Cc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",yf(ns({},It("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,n;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(n=this.modal)==null||n.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Cc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,n,a]=t.split(":");return{chainId:`${r}:${n}`,address:a}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,n;const a=(r=t?.chains)!=null?r:[],h=(n=t?.optionalChains)!=null?n:[],f=a.concat(h);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const v=a.length?t?.methods||Hc:[],m=a.length?t?.events||kc:[],g=t?.optionalMethods||[],E=t?.optionalEvents||[],S=t?.rpcMap||this.buildRpcMap(f,t.projectId),j=t?.qrModalOptions||void 0;return{chains:a?.map(z=>this.formatChainId(z)),optionalChains:h.map(z=>this.formatChainId(z)),methods:v,events:m,optionalMethods:g,optionalEvents:E,rpcMap:S,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:j,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const n={};return t.forEach(a=>{n[a]=this.getRpcUrl(a,r)}),n}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?Fo(this.rpc.chains):Fo(this.rpc.optionalChains),this.signer=await px.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:n}=await Qm(()=>import("./index5.js").then(function(a){return a.i}),["assets/index5.js","assets/index.js","assets/index.css","assets/vendor.js","assets/bn.js","assets/ethers.js"]);r=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ns({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:n,rpcMap:a}=t;r&&Yr(r)&&(this.rpc.chains=r.map(h=>this.formatChainId(h)),r.forEach(h=>{this.rpc.rpcMap[h]=a?.[h]||this.getRpcUrl(h)})),n&&Yr(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n?.map(h=>this.formatChainId(h)),n.forEach(h=>{this.rpc.rpcMap[h]=a?.[h]||this.getRpcUrl(h)}))}getRpcUrl(t,r){var n;return((n=this.rpc.rpcMap)==null?void 0:n[t])||`${vx}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const Nx=hu;export{Nx as EthereumProvider,wx as OPTIONAL_EVENTS,mx as OPTIONAL_METHODS,kc as REQUIRED_EVENTS,Hc as REQUIRED_METHODS,hu as default};
